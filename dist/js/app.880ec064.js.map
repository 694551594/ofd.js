{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?9b05","webpack:///./src/utils/ofd/pipeline.js","webpack:///./src/App.vue?63d9","webpack:///./src/components/HelloWorld.vue?bdb9","webpack:///./src/components/HelloWorld.vue?ddb2","webpack:///./src/components/HelloWorld.vue","webpack:///src/App.vue","webpack:///./src/App.vue?a7d1","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/components/HelloWorld.vue?2f91","webpack:///./src/utils/ofd/ofd_parser.js","webpack:///./src/utils/ofd/ofd_util.js","webpack:///./src/utils/jbig2/util.js","webpack:///./src/utils/jbig2/core_utils.js","webpack:///./src/utils/jbig2/arithmetic_decoder.js","webpack:///./src/utils/jbig2/ccitt.js","webpack:///./src/utils/jbig2/jbig2.js","webpack:///./src/utils/jbig2/compatibility.js","webpack:///./src/utils/ofd/ofd_render.js","webpack:///./src/utils/ofd/ofd.js","webpack:///src/components/HelloWorld.vue","webpack:///./src/utils/ofd/sm3.js","webpack:///./src/utils/ofd/verify_signature_util.js","webpack:///./src/utils/ofd/ses_signature_parser.js","webpack:///./src/utils/jbig2/is_node.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","Array","pipeline","callback","this","TypeError","index","_pipeline","funcs","a","b","_vm","_h","$createElement","_c","_self","attrs","staticRenderFns","staticStyle","staticClass","on","plus","minus","firstPage","prePage","_v","_s","pageIndex","pageCount","nextPage","lastPage","_e","directives","rawName","expression","ref","scrool","closeSealInfoDialog","$event","showMore","title","dialogFormVisible","slot","component","components","HelloWorld","Vue","$axios","axios","library","add","fas","config","productionTip","FontAwesomeIcon","use","ElementUI","render","h","App","$mount","parser","require","unzipOfd","file","Promise","resolve","reject","JsZip","loadAsync","then","zip","e","getDocRoots","getJsonFromXmlContent","docbodys","array","concat","parseSingleDoc","docs","docbody","doGetDocRoot","res","getDocument","getDocumentRes","getPublicRes","getTemplatePage","getPage","docRoot","replaceFirstSlash","doc","split","signatures","getSignature","stampAnnot","stampAnnotArray","stamp","sealObj","keys","type","getSealDocumentObj","stampObjs","stampObj","boundary","parseStBox","pageRef","obj","img","btoa","String","fromCharCode","ofdArray","stampArray","annot","pageId","documentObj","annotations","indexOf","annoBase","substring","getAnnotations","annotationObjs","anno","fileLoc","files","visible","appearance","appearanceObj","Document","documentResPath","fontResObj","drawParamResObj","multiMediaResObj","documentResObj","getFont","getDrawParam","getMultiMediaRes","publicResPath","publicResObj","fontObj","assign","drawParamObj","multiMediaObj","templatePages","tpls","templatePage","parsePage","pageObj","pages","page","currentPageStamp","annotationObj","annotation","fonts","fontArray","_fonts","_font","font","drawParams","item","multiMedias","toLowerCase","format","ext","getExtensionByPath","parseJbig2ImageFromZip","jbig2","parseOtherImageFromZip","pagePath","signature","signatureArray","sign","signatureLoc","signatureID","getSignatureData","getFileData","async","signedValue","toString","replace","lastIndexOf","parseSesSignature","checkMethod","global","toBeChecked","Map","arr","forEach","reference","hashed","fileData","set","verifyRet","catch","xmlName","content","ops","attributeNamePrefix","ignoreAttributes","parseNodeValue","trimValues","jsonObj","parse","bytes","Jbig2Image","width","height","convertPathAbbreviatedDatatoPoint","abbreviatedData","pointList","point","parseFloat","calPathPoint","abbreviatedPoint","x","y","converterDpi","x1","y1","x2","y2","x3","y3","realPoint","millimetersToPixel","mm","dpi","MaxScale","Scale","setMaxPageScal","scale","setPageScal","getPageScal","deltaFormatter","delta","floatList","f","gFlag","gProcessing","gItemCount","trim","parseInt","calTextPoint","textCodes","textCodePointList","textCode","isNaN","deltaXList","deltaYList","textStr","decodeHtml","text","textCodePoint","str","path","REGX_HTML_DECODE","HTML_DECODE","undefined","$0","$1","FONT_FAMILY","getFontFamily","w","parseCtm","ctm","parseColor","color","converterBox","box","Uint8ArrayToHexString","words","hexChars","bite","join","VerbosityLevel","ERRORS","WARNINGS","INFOS","verbosity","info","msg","console","log","unreachable","Error","shadow","prop","configurable","writable","BaseException","message","constructor","digits","log2","Math","ceil","readInt8","offset","readUint16","readUint32","QeTable","qe","nmps","nlps","switchFlag","ArithmeticDecoder","start","end","bp","dataEnd","chigh","clow","byteIn","ct","contexts","pos","cx_index","cx_mps","qeTableIcx","qeIcx","CCITTFaxDecoder","ccittEOL","ccittEOF","twoDimPass","twoDimHoriz","twoDimVert0","twoDimVertR1","twoDimVertL1","twoDimVertR2","twoDimVertL2","twoDimVertR3","twoDimVertL3","twoDimTable","whiteTable1","whiteTable2","blackTable1","blackTable2","blackTable3","source","options","next","eof","encoding","K","eoline","EndOfLine","byteAlign","EncodedByteAlign","columns","Columns","rows","Rows","code1","eoblock","EndOfBlock","black","BlackIs1","codingLine","Uint32Array","refLine","codingPos","row","nextLine2D","inputBits","inputBuf","outputBits","rowsDone","_lookBits","_eatBits","readNextChar","refPos","blackPixels","bits","code2","code3","err","_getTwoDimCode","_addPixels","_getBlackCode","_getWhiteCode","_addPixelsNeg","gotEOL","a1","_findTableCode","table","limit","limitValue","code","Jbig2Error","ContextCache","DecodingContext","decodeInteger","contextCache","procedure","decoder","getContexts","prev","readBits","v","bit","readBit","decodeIAID","codeLength","id","Int8Array","cache","SegmentTypes","CodingTemplates","RefinementTemplates","coding","ReusedContexts","RefinementReusedContexts","decodeBitmapTemplate0","decodingContext","contextLabel","pixel","row1","row2","bitmap","OLD_PIXEL_MASK","Uint8Array","decodeBitmap","mmr","templateIndex","prediction","skip","at","input","Reader","decodeMMRBitmap","useskip","template","sort","k","templateLength","templateX","templateY","changingTemplateEntries","reuseMask","minX","maxX","minY","min","max","changingEntriesLength","changingTemplateX","changingTemplateY","changingTemplateBit","Uint16Array","i0","j0","sbb_left","sbb_top","sbb_right","pseudoPixelContext","ltp","sltp","decodeRefinement","referenceBitmap","offsetX","offsetY","codingTemplate","codingTemplateLength","codingTemplateX","Int32Array","codingTemplateY","referenceTemplate","referenceTemplateLength","referenceTemplateX","referenceTemplateY","referenceWidth","referenceHeight","decodeSymbolDictionary","huffman","refinement","symbols","numberOfNewSymbols","numberOfExportedSymbols","huffmanTables","refinementTemplateIndex","refinementAt","huffmanInput","tableB1","symbolWidths","newSymbols","currentHeight","symbolCodeLength","getStandardTable","deltaHeight","tableDeltaHeight","decode","currentWidth","totalWidth","firstSymbol","deltaWidth","tableDeltaWidth","numberOfInstances","decodeTextRegion","symbolId","rdx","rdy","symbol","bitmapSize","tableBitmapSize","collectiveBitmap","readUncompressedBitmap","originalEnd","bitmapEnd","position","numberOfSymbolsDecoded","xMin","xMax","bitmapWidth","symbolBitmap","subarray","exportedSymbols","flags","currentFlag","totalSymbolsLength","runLength","ii","defaultPixelValue","numberOfSymbolInstances","stripSize","inputSymbols","transposed","dsOffset","referenceCorner","combinationOperator","logStripSize","stripT","tableDeltaT","firstS","deltaT","deltaFirstS","tableFirstS","currentS","currentT","symbolIDTable","applyRefinement","symbolWidth","symbolHeight","rdw","rdh","s2","t2","symbolRow","offsetT","offsetS","maxWidth","deltaS","tableDeltaS","decodePatternDictionary","patternWidth","patternHeight","maxPatternIndex","collectiveWidth","patterns","patternBitmap","decodeHalftoneRegion","regionWidth","regionHeight","enableSkip","gridWidth","gridHeight","gridOffsetX","gridOffsetY","gridVectorX","gridVectorY","regionBitmap","numberOfPatterns","pattern0","bitsPerValue","mmrInput","mg","ng","patternIndex","patternRow","regionRow","grayScaleBitPlanes","regionX","regionY","readSegmentHeader","segmentHeader","number","segmentType","typeName","deferredNonRetain","pageAssociationFieldSize","referredFlags","referredToCount","retainBits","referredToSegmentNumberSize","referredTo","pageAssociation","genericRegionInfo","readRegionSegmentInformation","genericRegionSegmentFlags","RegionSegmentInformationFieldLength","genericRegionMmr","searchPatternLength","searchPattern","headerEnd","readSegments","header","segments","segment","randomAccess","processSegment","visitor","args","atLength","dictionary","dictionaryFlags","huffmanDHSelector","huffmanDWSelector","bitmapSizeSelector","aggregationInstancesSelector","bitmapCodingContextUsed","bitmapCodingContextRetained","refinementTemplate","textRegion","textRegionSegmentFlags","textRegionHuffmanFlags","huffmanFS","huffmanDS","huffmanDT","huffmanRefinementDW","huffmanRefinementDH","huffmanRefinementDX","huffmanRefinementDY","huffmanRefinementSizeSelector","patternDictionary","patternDictionaryFlags","halftoneRegion","halftoneRegionFlags","genericRegion","pageInfo","resolutionX","resolutionY","pageSegmentFlags","lossless","requiresBuffer","combinationOperatorOverride","callbackName","processSegments","parseJbig2Chunks","chunks","SimpleSegmentVisitor","chunk","buffer","parseJbig2","numberOfPages","currentPageInfo","bitPacked","imgData","Uint8ClampedArray","q","mask","HuffmanLine","lineData","isOOB","rangeLow","prefixLength","rangeLength","prefixCode","isLowerRange","HuffmanTreeNode","line","children","isLeaf","HuffmanTable","lines","prefixCodesDone","assignPrefixCodes","rootNode","buildTree","decodeTablesSegment","lowestValue","highestValue","reader","prefixSizeBits","rangeSizeBits","currentRangeLow","onPageInformation","rowSize","drawBitmap","regionInfo","mask0","offset0","onImmediateGenericRegion","region","onImmediateLosslessGenericRegion","arguments","onSymbolDictionary","currentSegment","referredSegments","getSymbolDictionaryHuffmanTables","customTables","referredSymbols","onImmediateTextRegion","getTextRegionHuffmanTables","onImmediateLosslessTextRegion","onPatternDictionary","onImmediateHalftoneRegion","onImmediateLosslessHalftoneRegion","onTables","node","decodeNode","htOffset","linesLength","prefixLengthMax","histogram","currentCode","currentTemp","currentLength","firstCode","standardTablesCache","currentByte","getCustomHuffmanTable","currentIndex","numberOfSymbols","codes","runCodesTable","repeatedLength","numberOfRepeats","customIndex","tableAggregateInstances","endOfBlock","params","lookForEOFLimit","numBits","parseChunks","PDFJSDev","test","globalThis","_pdfjsCompatibilityChecked","isNodeJS","chars","Buffer","from","atob","startsWith","endsWith","includes","fromEntries","Number","isInteger","allSettled","URL","isReadableStreamSupported","ReadableStream","controller","close","entries","Set","WeakMap","WeakSet","codePointAt","fromCodePoint","padStart","padEnd","values","calPageBox","screenWidth","document","area","physicalBox","applicationBox","contentBox","documentArea","toFixed","calPageBoxScale","renderPage","pageDiv","layers","layer","renderLayer","contentLayers","contentLayer","renderSealPage","SES_Signature","signedInfo","sealBoundary","element","renderImageOnDiv","style","clip","appendChild","renderAnnotation","div","createElement","setAttribute","divBoundary","isStampAnnot","stampAnnotBoundary","JSON","stringify","fillColor","strokeColor","lineWith","drawParam","imageObjects","imageObjectArray","imageObject","renderImageObject","pathObjects","pathObjectArray","pathObject","svg","renderPathObject","textObjects","textObjectArray","textObject","renderTextObject","pageBlockArray","pageBlock","pageWidth","pageHeight","resId","renderImageOnCanvas","imgWidth","imgHeight","oid","imageData","ImageData","canvas","context","getContext","putImageData","imgSrc","src","pw","ph","defaultFillColor","defaultStrokeColor","defaultFillOpacity","hScale","weight","size","createElementNS","alpha","innerHTML","ctms","left","top","defaultLineWith","lineWidth","points","LineWidth","strokeStyle","fillStyle","parseOfdDocument","ofd","File","ArrayBuffer","doParseOFD","JSZipUtils","fail","success","renderOfd","divArray","renderOfdByScale","digestCheck","digestCheckProcess","setPageScale","getPageScale","ofdBase64","loading","ofdObj","body","clientWidth","created","mounted","$refs","contentDiv","addEventListener","onresize","that","displayOfdDiv","divs","loadOfd","methods","abs","scrolled","sealInfoDiv","getElementById","innerText","ele","parseQueryString","decodeURIComponent","filename","base64String","getOfdDocumentObj","ofdFile","t1","t3","$alert","error","confirmButtonText","addEventOnSealDiv","HashRet","VerifyRet","hidden","realVersion","setTimeout","leftPad","num","binary2hex","binary","binaryLength","hex","substr","hex2binary","hexLength","rol","binaryCal","method","prevResult","xor","and","or","carry","not","calMulti","reduce","curr","P0","X","P1","FF","Y","Z","GG","T","CF","V","Bi","wordLength","W","M","wordRegister","SS1","SS2","TT1","TT2","A","B","C","D","E","F","G","H","sm3","hexstr","len","digestByteArray","hashedBase64","hashedHex","Base64","md5","sha1","SES_Signature_Verify","signAlg","toSign","signatureAlgorithm","signatureAlgID","toSignDer","sigValueHex","cert","publicKey","subjectPublicKeyInfo","subjectPublicKey","sm2","doVerifySignature","der","hash","userId","sig","rsa","KJUR","crypto","Signature","init","updateHex","verify","reHex","decodeText","ret","val","Hex","unarmor","decodeSES_Signature","eseal","esealInfo","picture","byte","decodeUTCTime","asn1","ASN1","createDate","sub","stream","parseTime","validStart","validEnd","timeInfo","asn1CertList","certList","asn1Cert","parseOctetString","asn1ExtDatas","extDatas","asn1ExtData","parseOID","parseInteger","enc","parseStringUTF","decodeCert","hexDump","certListType","Uint8ArrayToString","asn1Subject","subject","asn1PublicKeyInfo","dataString","process","versions","nw","electron"],"mappings":"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,CAAC,EAAGA,GACvB,CAAC,EAAGA,GAAe,CAAC,EAAGA,GACvB,CAAC,EAAGD,GAAe,CAAC,EAAGA,GACvB,CAAC,EAAGA,GAAe,CAAC,EAAGA,GACvB,CAAC,EAAGA,GAAe,CAAC,EAAGA,GACvB,CAAC,EAAGA,GAAe,CAAC,EAAGA,GACvB,CAAC,EAAGA,GAAe,CAAC,EAAGA,GACvB,CAAC,EAAGA,GAAe,CAAC,EAAGA,GACvB,CAAC,EAAGA,GAAe,CAAC,EAAGA,GACvB,CAAC,EAAGA,GAAe,CAAC,EAAGA,GACvB,CAAC,EAAGD,GAAc,CAAC,EAAGA,GACtB,CAAC,EAAGA,GAAc,CAAC,EAAGA,GACtB,CAAC,EAAGA,GAAc,CAAC,EAAGA,GACtB,CAAC,EAAGA,GAAc,CAAC,EAAGA,GACtB,CAAC,EAAGA,GAAc,CAAC,EAAGA,GACtB,CAAC,EAAGA,GAAc,CAAC,EAAGA,GACtB,CAAC,EAAGA,GAAc,CAAC,EAAGA,GACtB,CAAC,EAAGA,GAAc,CAAC,EAAGA,GACtB,CAAC,EAAGA,GAAc,CAAC,EAAGA,GACtB,CAAC,EAAGA,GAAc,CAAC,EAAGA,GACtB,CAAC,EAAGA,GAAc,CAAC,EAAGA,GACtB,CAAC,EAAGA,GAAc,CAAC,EAAGA,GACtB,CAAC,EAAGA,GAAc,CAAC,EAAGA,GACtB,CAAC,EAAGA,GAAc,CAAC,EAAGA,GACtB,CAAC,EAAGA,GAAc,CAAC,EAAGA,GACtB,CAAC,EAAGA,GAAc,CAAC,EAAGA,GACtB,CAAC,EAAGA,GAAc,CAAC,EAAGA,GACtB,CAAC,EAAGA,GAAc,CAAC,EAAGA,GACtB,CAAC,EAAGA,GAAc,CAAC,EAAGA,GACtB,CAAC,EAAGA,GAAc,CAAC,EAAGA,GACtB,CAAC,EAAGA,GAAc,CAAC,EAAGA,GACtB,CAAC,EAAGA,GAAc,CAAC,EAAGA,GACtB,CAAC,EAAGA,GAAc,CAAC,EAAGA,GACtB,CAAC,EAAGA,GAAc,CAAC,EAAGA,GACtB,CAAC,EAAGA,GAAc,CAAC,EAAGA,GACtB,CAAC,EAAGA,GAAc,CAAC,EAAGA,GACtB,CAAC,EAAGA,GAAc,CAAC,EAAGA,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G,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IACb,CAAC,EAAG,IAAK,CAAC,EAAG,IACb,CAAC,EAAG,MACJ,CAAC,EAAG,MACJ,CAAC,EAAG,MACJ,CAAC,EAAG,MACJ,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IACb,CAAC,EAAG,IAAK,CAAC,EAAG,IACb,CAAC,EAAG,IAAK,CAAC,EAAG,IACb,CAAC,EAAG,IAAK,CAAC,EAAG,IACb,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IACb,CAAC,EAAG,IAAK,CAAC,EAAG,IACb,CAAC,EAAG,IAAK,CAAC,EAAG,IACb,CAAC,EAAG,IAAK,CAAC,EAAG,IACb,CAAC,EAAG,KAAM,CAAC,EAAG,KAAM,CAAC,EAAG,KAAM,CAAC,EAAG,KAClC,CAAC,EAAG,KAAM,CAAC,EAAG,KAAM,CAAC,EAAG,KAAM,CAAC,EAAG,KAClC,CAAC,EAAG,MAAO,CAAC,EAAG,MAAO,CAAC,EAAG,MAAO,CAAC,EAAG,MACrC,CAAC,EAAG,MAAO,CAAC,EAAG,MAAO,CAAC,EAAG,MAAO,CAAC,EAAG,MACrC,CAAC,EAAG,KAAM,CAAC,EAAG,KACd,CAAC,EAAG,KAAM,CAAC,EAAG,KACd,CAAC,EAAG,KACJ,CAAC,EAAG,KACJ,CAAC,EAAG,KAAM,CAAC,EAAG,KACd,CAAC,EAAG,KAAM,CAAC,EAAG,KACd,CAAC,EAAG,KACJ,CAAC,EAAG,KACJ,CAAC,EAAG,KACJ,CAAC,EAAG,MACJ,CAAC,EAAG,MACJ,CAAC,EAAG,MACJ,CAAC,EAAG,MACJ,CAAC,EAAG,MACJ,CAAC,EAAG,MACJ,CAAC,EAAG,MACJ,CAAC,EAAG,KAAM,CAAC,EAAG,KAAM,CAAC,EAAG,KAAM,CAAC,EAAG,KAClC,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,KAAM,CAAC,EAAG,KAAM,CAAC,EAAG,KAAM,CAAC,EAAG,KAClC,CAAC,EAAG,KAAM,CAAC,EAAG,KAAM,CAAC,EAAG,KAAM,CAAC,EAAG,KAClC,CAAC,EAAG,KAAM,CAAC,EAAG,KAAM,CAAC,EAAG,KAAM,CAAC,EAAG,KAClC,CAAC,EAAG,KAAM,CAAC,EAAG,KAAM,CAAC,EAAG,KAAM,CAAC,EAAG,KAClC,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAC5B,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,GAAI,CAAC,EAAG,G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I,IACL,CAAC,GAAI,IACL,CAAC,GAAI,IACL,CAAC,GAAI,IACL,CAAC,GAAI,KACL,CAAC,GAAI,IAAK,CAAC,GAAI,IAAK,CAAC,GAAI,IAAK,CAAC,GAAI,IACnC,CAAC,GAAI,IAAK,CAAC,GAAI,IAAK,CAAC,GAAI,IAAK,CAAC,GAAI,IACnC,CAAC,GAAI,IACL,CAAC,GAAI,IACL,CAAC,GAAI,IACL,CAAC,GAAI,IACL,CAAC,GAAI,IACL,CAAC,GAAI,IACL,CAAC,GAAI,IACL,CAAC,GAAI,IACL,CAAC,GAAI,IACL,CAAC,GAAI,IACL,CAAC,GAAI,IAAK,CAAC,GAAI,IACf,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,GAAI,KACL,CAAC,GAAI,KACL,CAAC,GAAI,IACL,CAAC,GAAI,IACL,CAAC,GAAI,IACL,CAAC,GAAI,IACL,CAAC,GAAI,IAAK,CAAC,GAAI,IACf,CAAC,GAAI,IAAK,CAAC,GAAI,IACf,CAAC,GAAI,IACL,CAAC,GAAI,IACL,CAAC,GAAI,IACL,CAAC,GAAI,IACL,CAAC,GAAI,IACL,CAAC,GAAI,IACL,CAAC,GAAI,IAAK,CAAC,GAAI,IACf,CAAC,GAAI,IACL,CAAC,GAAI,IACL,CAAC,GAAI,GAAI,CAAC,GAAI,GAAI,CAAC,GAAI,GAAI,CAAC,GAAI,GAChC,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAAK,CAAC,EAAG,IAC/B,CAAC,EAAG,IAAK,CAAC,EAA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","file":"js/app.880ec064.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","\r\n'use strict';\r\nArray.prototype.pipeline = async function(callback){\r\n  if (null === this || 'undefined' === typeof this) {\r\n    // At the moment all modern browsers, that support strict mode, have\r\n    // native implementation of Array.prototype.reduce. For instance, IE8\r\n    // does not support strict mode, so this check is actually useless.\r\n    throw new TypeError(\r\n      'Array.prototype.pipeline called on null or undefined');\r\n  }\r\n  if ('function' !== typeof callback) {\r\n    throw new TypeError(callback + ' is not a function');\r\n  }\r\n  var index, value,\r\n    length = this.length >>> 0;\r\n  for (index = 0; length > index; ++index) {\r\n    value = await callback(value, this[index], index, this);\r\n  }\r\n  return value;\r\n};\r\n\r\nlet _pipeline = function(...funcs){\r\n  return funcs.pipeline((a, b) => b.call(this, a));\r\n}\r\n\r\nexport const pipeline = _pipeline;\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('HelloWorld')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-container',{staticStyle:{\"width\":\"100vw\",\"height\":\"100vh\"}},[_c('el-header',{staticStyle:{\"background\":\"#f5f5f5\",\"display\":\"flex\",\"height\":\"40px\",\"border\":\"1px solid #e8e8e8\",\"align-items\":\"center\"}},[(_vm.ofdObj)?_c('div',{staticStyle:{\"display\":\"flex\",\"align-items\":\"center\"}},[_c('div',{staticClass:\"scale-icon\",staticStyle:{\"margin-left\":\"10px\"},on:{\"click\":_vm.plus}},[_c('font-awesome-icon',{attrs:{\"icon\":\"search-plus\"}})],1),_c('div',{staticClass:\"scale-icon\",on:{\"click\":_vm.minus}},[_c('font-awesome-icon',{attrs:{\"icon\":\"search-minus\"}})],1),_c('div',{staticClass:\"scale-icon\"},[_c('font-awesome-icon',{attrs:{\"icon\":\"step-backward\"},on:{\"click\":_vm.firstPage}})],1),_c('div',{staticClass:\"scale-icon\",staticStyle:{\"font-size\":\"18px\"},on:{\"click\":_vm.prePage}},[_c('font-awesome-icon',{attrs:{\"icon\":\"caret-left\"}})],1),_c('div',{staticClass:\"scale-icon\"},[_vm._v(_vm._s(_vm.pageIndex)+\"/\"+_vm._s(_vm.pageCount))]),_c('div',{staticClass:\"scale-icon\",staticStyle:{\"font-size\":\"18px\"},on:{\"click\":_vm.nextPage}},[_c('font-awesome-icon',{attrs:{\"icon\":\"caret-right\"}})],1),_c('div',{staticClass:\"scale-icon\",on:{\"click\":_vm.lastPage}},[_c('font-awesome-icon',{attrs:{\"icon\":\"step-forward\"}})],1)]):_vm._e()]),_c('el-main',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"height\":\"auto\",\"background\":\"#808080\",\"padding\":\"0\"}},[_c('div',{ref:\"contentDiv\",staticClass:\"main-section\",attrs:{\"id\":\"content\"},on:{\"mousewheel\":_vm.scrool}})]),_c('div',{ref:\"sealInfoDiv\",staticClass:\"SealContainer\",attrs:{\"id\":\"sealInfoDiv\",\"hidden\":\"hidden\"}},[_c('div',{staticClass:\"SealContainer mask\",on:{\"click\":_vm.closeSealInfoDialog}}),_c('div',{staticClass:\"SealContainer-layout\"},[_c('div',{staticClass:\"SealContainer-content\"},[_c('p',{staticClass:\"content-title\"},[_vm._v(\"签章信息\")]),_c('div',{staticClass:\"subcontent\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"签章人\")]),_c('span',{staticClass:\"value\",attrs:{\"id\":\"spSigner\"}},[_vm._v(\"[无效的签章结构]\")])]),_c('div',{staticClass:\"subcontent\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"签章提供者\")]),_c('span',{staticClass:\"value\",attrs:{\"id\":\"spProvider\"}},[_vm._v(\"[无效的签章结构]\")])]),_c('div',{staticClass:\"subcontent\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"原文摘要值\")]),_c('span',{staticClass:\"value\",staticStyle:{\"cursor\":\"pointer\"},attrs:{\"id\":\"spHashedValue\"},on:{\"click\":function($event){return _vm.showMore('原文摘要值', 'spHashedValue')}}},[_vm._v(\"[无效的签章结构]\")])]),_c('div',{staticClass:\"subcontent\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"签名值\")]),_c('span',{staticClass:\"value\",staticStyle:{\"cursor\":\"pointer\"},attrs:{\"id\":\"spSignedValue\"},on:{\"click\":function($event){return _vm.showMore('签名值', 'spSignedValue')}}},[_vm._v(\"[无效的签章结构]\")])]),_c('div',{staticClass:\"subcontent\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"签名算法\")]),_c('span',{staticClass:\"value\",attrs:{\"id\":\"spSignMethod\"}},[_vm._v(\"[无效的签章结构]\")])]),_c('div',{staticClass:\"subcontent\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"版本号\")]),_c('span',{staticClass:\"value\",attrs:{\"id\":\"spVersion\"}},[_vm._v(\"[无效的签章结构]\")])]),_c('div',{staticClass:\"subcontent\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"验签结果\")]),_c('span',{staticClass:\"value\",attrs:{\"id\":\"VerifyRet\"}},[_vm._v(\"[无效的签章结构]\")])]),_c('p',{staticClass:\"content-title\"},[_vm._v(\"印章信息\")]),_c('div',{staticClass:\"subcontent\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"印章标识\")]),_c('span',{staticClass:\"value\",attrs:{\"id\":\"spSealID\"}},[_vm._v(\"[无效的签章结构]\")])]),_c('div',{staticClass:\"subcontent\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"印章名称\")]),_c('span',{staticClass:\"value\",attrs:{\"id\":\"spSealName\"}},[_vm._v(\"[无效的签章结构]\")])]),_c('div',{staticClass:\"subcontent\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"印章类型\")]),_c('span',{staticClass:\"value\",attrs:{\"id\":\"spSealType\"}},[_vm._v(\"[无效的签章结构]\")])]),_c('div',{staticClass:\"subcontent\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"有效时间\")]),_c('span',{staticClass:\"value\",attrs:{\"id\":\"spSealAuthTime\"}},[_vm._v(\"[无效的签章结构]\")])]),_c('div',{staticClass:\"subcontent\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"制章日期\")]),_c('span',{staticClass:\"value\",attrs:{\"id\":\"spSealMakeTime\"}},[_vm._v(\"[无效的签章结构]\")])]),_c('div',{staticClass:\"subcontent\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"印章版本\")]),_c('span',{staticClass:\"value\",attrs:{\"id\":\"spSealVersion\"}},[_vm._v(\"[无效的签章结构]\")])])]),_c('input',{staticStyle:{\"position\":\"absolute\",\"right\":\"1%\",\"top\":\"1%\"},attrs:{\"type\":\"button\",\"name\":\"\",\"id\":\"\",\"value\":\"X\"},on:{\"click\":function($event){return _vm.closeSealInfoDialog()}}})])]),_c('el-dialog',{attrs:{\"title\":_vm.title,\"visible\":_vm.dialogFormVisible},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('span',{staticStyle:{\"text-align\":\"left\"}},[_vm._v(\" \"+_vm._s(_vm.value)+\" \")]),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.dialogFormVisible = false}}},[_vm._v(\"确 定\")])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HelloWorld.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HelloWorld.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HelloWorld.vue?vue&type=template&id=495bfd6a&scoped=true&\"\nimport script from \"./HelloWorld.vue?vue&type=script&lang=js&\"\nexport * from \"./HelloWorld.vue?vue&type=script&lang=js&\"\nimport style0 from \"./HelloWorld.vue?vue&type=style&index=0&id=495bfd6a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"495bfd6a\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div id=\"app\">\r\n    <HelloWorld/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport HelloWorld from './components/HelloWorld.vue'\r\n\r\nexport default {\r\n  name: 'App',\r\n  components: {\r\n    HelloWorld\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n#app {\r\n  font-family: \"Helvetica Neue\",Helvetica,\"PingFang SC\",\"Hiragino Sans GB\",\"Microsoft YaHei\",\"微软雅黑\",Arial,sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  text-align: center;\r\n  color: #2c3e50;\r\n\r\n}\r\n</style>\r\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=0b4d63a2&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\r\nimport App from './App.vue'\r\nimport './styles/index.css'\r\nimport ElementUI from 'element-ui';\r\nimport 'element-ui/lib/theme-chalk/index.css';\r\nimport { library } from '@fortawesome/fontawesome-svg-core'\r\nimport { fas } from '@fortawesome/free-solid-svg-icons'\r\nimport { FontAwesomeIcon } from '@fortawesome/vue-fontawesome'\r\nimport axios from 'axios';\r\n\r\nVue.prototype.$axios = axios\r\nlibrary.add(fas)\r\nVue.config.productionTip = false\r\nVue.component('font-awesome-icon', FontAwesomeIcon)\r\nVue.use(ElementUI);\r\n\r\nnew Vue({\r\n  render: h => h(App),\r\n}).$mount('#app')\r\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HelloWorld.vue?vue&type=style&index=0&id=495bfd6a&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HelloWorld.vue?vue&type=style&index=0&id=495bfd6a&scoped=true&lang=css&\"","/*\r\n * ofd.js - A Javascript class for reading and rendering ofd files\r\n * <https://github.com/DLTech21/ofd.js>\r\n *\r\n * Copyright (c) 2020. DLTech21 All Rights Reserved.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * You may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *      http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n *  Unless required by applicable law or agreed to in writing, software\r\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\r\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n *  See the License for the specific language governing permissions and\r\n *  limitations under the License.\r\n *\r\n */\r\n\r\nimport {pipeline} from \"@/utils/ofd/pipeline\";\r\nimport JsZip from \"jszip\";\r\nimport {parseStBox, getExtensionByPath, replaceFirstSlash} from \"@/utils/ofd/ofd_util\";\r\nlet parser = require('fast-xml-parser');\r\n\r\nimport {Jbig2Image} from '../jbig2/jbig2';\r\nimport {parseSesSignature} from \"@/utils/ofd/ses_signature_parser\";\r\n\r\nexport const unzipOfd = function (file) {\r\n    return new Promise((resolve, reject) => {\r\n        JsZip.loadAsync(file)\r\n            .then(function (zip) {\r\n                resolve(zip);\r\n            }, function (e) {\r\n                reject(e);\r\n            });\r\n    });\r\n}\r\n\r\nexport const getDocRoots = async function (zip) {\r\n    const data = await getJsonFromXmlContent(zip, 'OFD.xml');\r\n    const docbodys = data['json']['ofd:OFD']['ofd:DocBody'];\r\n    let array = [];\r\n    array = array.concat(docbodys);\r\n    return [zip, array]\r\n}\r\n\r\nexport const parseSingleDoc = async function ([zip, array]) {\r\n    let docs = [];\r\n    for (let docbody of array) {\r\n        if (docbody) {\r\n            let res = await doGetDocRoot(zip, docbody);\r\n            res = await getDocument(res);\r\n            res = await getDocumentRes(res);\r\n            res = await getPublicRes(res);\r\n            res = await getTemplatePage(res);\r\n            res = await getPage(res);\r\n            docs.push(res);\r\n        }\r\n    }\r\n    return docs;\r\n}\r\n\r\nexport const doGetDocRoot = async function (zip, docbody) {\r\n    let docRoot = docbody['ofd:DocRoot'];\r\n    docRoot = replaceFirstSlash(docRoot);\r\n    const doc = docRoot.split('/')[0];\r\n    const signatures = docbody['ofd:Signatures'];\r\n    const stampAnnot = await getSignature(zip, signatures, doc);\r\n    let stampAnnotArray = {};\r\n    for (const stamp of stampAnnot) {\r\n        if (stamp.sealObj && Object.keys(stamp.sealObj).length > 0) {\r\n            if (stamp.sealObj.type === 'ofd') {\r\n                const stampObjs = await getSealDocumentObj(stamp);\r\n                for (let stampObj of stampObjs) {\r\n                    stamp.stampAnnot.boundary = parseStBox(stamp.stampAnnot['@_Boundary']);\r\n                    //console.log(stamp.stampAnnot.boundary)\r\n                    stamp.stampAnnot.pageRef = stamp.stampAnnot['@_PageRef'];\r\n                    if (!stampAnnotArray[stamp.stampAnnot['@_PageRef']]) {\r\n                        stampAnnotArray[stamp.stampAnnot['@_PageRef']] = [];\r\n                    }\r\n                    stampAnnotArray[stamp.stampAnnot['@_PageRef']].push({type: 'ofd', obj: stampObj, stamp});\r\n                }\r\n            } else if (stamp.sealObj.type === 'png') {\r\n                let img = 'data:image/png;base64,' + btoa(String.fromCharCode.apply(null, stamp.sealObj.ofdArray));\r\n                let stampArray = [];\r\n                stampArray = stampArray.concat(stamp.stampAnnot);\r\n                for (const annot of stampArray) {\r\n                    if (annot) {\r\n                        const stampObj = {img, pageId: annot['@_PageRef'], 'boundary': parseStBox(annot['@_Boundary']), 'clip': parseStBox(annot['@_Clip'])};\r\n                        if (!stampAnnotArray[annot['@_PageRef']]) {\r\n                            stampAnnotArray[annot['@_PageRef']] = [];\r\n                        }\r\n                        stampAnnotArray[annot['@_PageRef']].push({type: 'png', obj: stampObj, stamp});\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return [zip, doc, docRoot, stampAnnotArray];\r\n}\r\n\r\nexport const getDocument = async function ([zip, doc, docRoot, stampAnnot]) {\r\n    const data = await getJsonFromXmlContent(zip, docRoot);\r\n    const documentObj = data['json']['ofd:Document'];\r\n    let annotations = documentObj['ofd:Annotations'];\r\n    let array = [];\r\n    let annoBase;\r\n    if (annotations) {\r\n        if (annotations.indexOf('/') !== -1) {\r\n            annoBase = annotations.substring(0, annotations.indexOf('/'));\r\n        }\r\n        if (annotations.indexOf(doc) === -1) {\r\n            annotations = `${doc}/${annotations}`;\r\n        }\r\n        annotations = await getJsonFromXmlContent(zip, annotations);\r\n        array = array.concat(annotations['json']['ofd:Annotations']['ofd:Page']);\r\n    }\r\n    const annotationObjs = await getAnnotations(annoBase, array, doc, zip)\r\n    return [zip, doc, documentObj, stampAnnot, annotationObjs];\r\n}\r\n\r\nconst getAnnotations = async function (annoBase, annotations, doc, zip) {\r\n    let annotationObjs = {};\r\n    for (let anno of annotations) {\r\n        if (!anno) {\r\n            continue\r\n        }\r\n        const pageId = anno['@_PageID'];\r\n        let fileLoc = anno['ofd:FileLoc'];\r\n        if (annoBase && fileLoc.indexOf(annoBase) === -1) {\r\n            fileLoc = `${annoBase}/${fileLoc}`;\r\n        }\r\n        if (fileLoc.indexOf(doc) === -1) {\r\n            fileLoc = `${doc}/${fileLoc}`;\r\n        }\r\n        if (zip.files[fileLoc]) {\r\n            const data = await getJsonFromXmlContent(zip, fileLoc);\r\n            let array = [];\r\n            array = array.concat(data['json']['ofd:PageAnnot']['ofd:Annot']);\r\n            if (!annotationObjs[pageId]) {\r\n                annotationObjs[pageId] = [];\r\n            }\r\n            for (let annot of array) {\r\n                if (!annot) {\r\n                    continue\r\n                }\r\n                const type = annot['@_Type'];\r\n                const visible = annot['@_Visible'] ? annot['@_Visible']:true;\r\n                const appearance = annot['ofd:Appearance'];\r\n                let appearanceObj = {type, appearance, visible};\r\n                annotationObjs[pageId].push(appearanceObj);\r\n            }\r\n        }\r\n    }\r\n    return annotationObjs;\r\n}\r\n\r\nexport const getDocumentRes = async function ([zip, doc, Document, stampAnnot, annotationObjs]) {\r\n    let documentResPath = Document['ofd:CommonData']['ofd:DocumentRes'];\r\n    let fontResObj = {};\r\n    let drawParamResObj = {};\r\n    let multiMediaResObj = {};\r\n    if (documentResPath) {\r\n        if (documentResPath.indexOf(doc) == -1) {\r\n            documentResPath = `${doc}/${documentResPath}`;\r\n        }\r\n        if (zip.files[documentResPath]) {\r\n            const data = await getJsonFromXmlContent(zip, documentResPath);\r\n            const documentResObj = data['json']['ofd:Res'];\r\n            fontResObj = await getFont(documentResObj);\r\n            drawParamResObj = await getDrawParam(documentResObj);\r\n            multiMediaResObj = await getMultiMediaRes(zip, documentResObj, doc);\r\n        }\r\n    }\r\n    return [zip, doc, Document, stampAnnot, annotationObjs, fontResObj, drawParamResObj, multiMediaResObj];\r\n}\r\n\r\nexport const getPublicRes = async function ([zip, doc, Document, stampAnnot, annotationObjs, fontResObj, drawParamResObj, multiMediaResObj]) {\r\n    let publicResPath = Document['ofd:CommonData']['ofd:PublicRes'];\r\n    if (publicResPath) {\r\n        if (publicResPath.indexOf(doc) == -1) {\r\n            publicResPath = `${doc}/${publicResPath}`;\r\n        }\r\n        if (zip.files[publicResPath]) {\r\n            const data = await getJsonFromXmlContent(zip, publicResPath);\r\n            const publicResObj = data['json']['ofd:Res'];\r\n            let fontObj = await getFont(publicResObj);\r\n            fontResObj = Object.assign(fontResObj, fontObj);\r\n            let drawParamObj = await getDrawParam(publicResObj);\r\n            drawParamResObj = Object.assign(drawParamResObj, drawParamObj);\r\n            let multiMediaObj = await getMultiMediaRes(zip, publicResObj, doc);\r\n            multiMediaResObj = Object.assign(multiMediaResObj, multiMediaObj);\r\n        }\r\n    }\r\n    return [zip, doc, Document, stampAnnot, annotationObjs, fontResObj, drawParamResObj, multiMediaResObj];\r\n}\r\n\r\nexport const getTemplatePage = async function ([zip, doc, Document, stampAnnot, annotationObjs, fontResObj, drawParamResObj, multiMediaResObj]) {\r\n    let templatePages = Document['ofd:CommonData']['ofd:TemplatePage'];\r\n    let array = [];\r\n    array = array.concat(templatePages);\r\n    let tpls = {};\r\n    for (const templatePage of array) {\r\n        if (templatePage) {\r\n            let pageObj = await parsePage(zip, templatePage, doc);\r\n            tpls[Object.keys(pageObj)[0]] = pageObj[Object.keys(pageObj)[0]];\r\n        }\r\n    }\r\n    return [zip, doc, Document, stampAnnot, annotationObjs, tpls, fontResObj, drawParamResObj, multiMediaResObj];\r\n}\r\n\r\nexport const getPage = async function ([zip, doc, Document, stampAnnot, annotationObjs, tpls, fontResObj, drawParamResObj, multiMediaResObj]) {\r\n    let pages = Document['ofd:Pages']['ofd:Page'];\r\n    let array = [];\r\n    array = array.concat(pages);\r\n    let res = [];\r\n    for (const page of array) {\r\n        if (page) {\r\n            let pageObj = await parsePage(zip, page, doc);\r\n            const pageId = Object.keys(pageObj)[0];\r\n            const currentPageStamp = stampAnnot[pageId];\r\n            if (currentPageStamp) {\r\n                pageObj[pageId].stamp = currentPageStamp;\r\n            }\r\n            const annotationObj = annotationObjs[pageId];\r\n            if (annotationObj) {\r\n                pageObj[pageId].annotation = annotationObj;\r\n            }\r\n            res.push(pageObj);\r\n        }\r\n    }\r\n    return {\r\n        'doc': doc,\r\n        'document': Document,\r\n        'pages': res,\r\n        'tpls': tpls,\r\n        'stampAnnot': stampAnnot,\r\n        fontResObj,\r\n        drawParamResObj,\r\n        multiMediaResObj\r\n    };\r\n}\r\n\r\nconst getFont = async function (res) {\r\n    const fonts = res['ofd:Fonts'];\r\n    let fontResObj = {};\r\n    if (fonts) {\r\n        let fontArray = [];\r\n        const _fonts = fonts['ofd:Font'];\r\n        if (_fonts) {\r\n            fontArray = fontArray.concat(_fonts);\r\n        } else {\r\n            for (const _fonts of fonts) {\r\n                const _font = _fonts['ofd:Font'];\r\n                fontArray = fontArray.concat(_font);\r\n            }\r\n        }\r\n        for (const font of fontArray) {\r\n            if (font) {\r\n                if (font['@_FamilyName']) {\r\n                    fontResObj[font['@_ID']] = font['@_FamilyName'];\r\n                } else {\r\n                    fontResObj[font['@_ID']] = font['@_FontName'];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return fontResObj;\r\n}\r\n\r\nconst getDrawParam = async function (res) {\r\n    const drawParams = res['ofd:DrawParams'];\r\n    let drawParamResObj = {};\r\n    if (drawParams) {\r\n        let array = [];\r\n        array = array.concat(drawParams['ofd:DrawParam']);\r\n        for (const item of array) {\r\n            if (item) {\r\n                drawParamResObj[item['@_ID']] = {\r\n                    'LineWidth': item['@_LineWidth'],\r\n                    'FillColor': item['ofd:FillColor'] ? item['ofd:FillColor']['@_Value'] : '',\r\n                    'StrokeColor': item['ofd:StrokeColor'] ? item['ofd:StrokeColor']['@_Value'] : \"\",\r\n                    'relative': item['@_Relative'],\r\n                };\r\n            }\r\n        }\r\n    }\r\n    return drawParamResObj;\r\n}\r\n\r\nconst getMultiMediaRes = async function (zip, res, doc) {\r\n    const multiMedias = res['ofd:MultiMedias'];\r\n    let multiMediaResObj = {};\r\n    if (multiMedias) {\r\n        let array = [];\r\n        array = array.concat(multiMedias['ofd:MultiMedia']);\r\n        for (const item of array) {\r\n            if (item) {\r\n                let file = item['ofd:MediaFile'];\r\n                if (res['@_BaseLoc']) {\r\n                    if (file.indexOf(res['@_BaseLoc']) === -1) {\r\n                        file = `${res['@_BaseLoc']}/${file}`\r\n                    }\r\n                }\r\n                if (file.indexOf(doc) === -1) {\r\n                    file = `${doc}/${file}`\r\n                }\r\n                if (item['@_Type'].toLowerCase() === 'image') {\r\n                    const format = item['@_Format'];\r\n                    const ext = getExtensionByPath(file);\r\n                    if ((format && (format.toLowerCase() === 'gbig2' || format.toLowerCase() === 'jb2')) || ext && (ext.toLowerCase() === 'jb2' || ext.toLowerCase() === 'gbig2')) {\r\n                        const jbig2 = await parseJbig2ImageFromZip(zip, file);\r\n                        multiMediaResObj[item['@_ID']] = jbig2;\r\n                    } else {\r\n                        const img = await parseOtherImageFromZip(zip, file);\r\n                        multiMediaResObj[item['@_ID']] = {img, 'format': 'png'};\r\n                    }\r\n                } else {\r\n                    multiMediaResObj[item['@_ID']] = file;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return multiMediaResObj;\r\n}\r\n\r\nconst parsePage = async function (zip, obj, doc) {\r\n    let pagePath = obj['@_BaseLoc'];\r\n    if (pagePath.indexOf(doc) == -1) {\r\n        pagePath = `${doc}/${pagePath}`;\r\n    }\r\n    const data = await getJsonFromXmlContent(zip, pagePath);\r\n    let pageObj = {};\r\n    pageObj[obj['@_ID']] = {'json': data['json']['ofd:Page'], 'xml': data['xml']};\r\n    return pageObj;\r\n}\r\n\r\nconst getSignature = async function (zip, signatures, doc) {\r\n    let stampAnnot = [];\r\n    if (signatures) {\r\n        signatures = replaceFirstSlash(signatures);\r\n        if (signatures.indexOf(doc) === -1) {\r\n            signatures = `${doc}/${signatures}`\r\n        }\r\n        if (zip.files[signatures]) {\r\n            let data = await getJsonFromXmlContent(zip, signatures);\r\n            let signature = data['json']['ofd:Signatures']['ofd:Signature'];\r\n            let signatureArray = [];\r\n            signatureArray = signatureArray.concat(signature);\r\n            for (const sign of signatureArray) {\r\n                if (sign) {\r\n                    let signatureLoc = sign['@_BaseLoc'];\r\n                    let signatureID = sign['@_ID'];\r\n                    signatureLoc = replaceFirstSlash(signatureLoc);\r\n                    if (signatureLoc.indexOf('Signs') === -1) {\r\n                        signatureLoc = `Signs/${signatureLoc}`\r\n                    }\r\n                    if (signatureLoc.indexOf(doc) === -1) {\r\n                        signatureLoc = `${doc}/${signatureLoc}`\r\n                    }\r\n                    stampAnnot.push(await getSignatureData(zip, signatureLoc, signatureID));\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return stampAnnot;\r\n}\r\n\r\nconst getFileData = async function (zip, name){\r\n    return zip.files[name].async('uint8array');\r\n}\r\n\r\nconst getSignatureData = async function (zip, signature, signatureID) {\r\n    const data = await getJsonFromXmlContent(zip, signature);\r\n    let signedValue = (data['json']['ofd:Signature']['ofd:SignedValue'])\r\n    signedValue = signedValue.toString().replace('/', '');\r\n    if (!zip.files[signedValue]) {\r\n        signedValue = `${signature.substring(0, signature.lastIndexOf('/'))}/${signedValue}`\r\n    }\r\n    let sealObj = await parseSesSignature(zip, signedValue);\r\n    const checkMethod = data['json']['ofd:Signature']['ofd:SignedInfo']['ofd:References']['@_CheckMethod'];\r\n    global.toBeChecked = new Map();\r\n    let arr = new Array();\r\n    data['json']['ofd:Signature']['ofd:SignedInfo']['ofd:References']['ofd:Reference'].forEach(async reference=>{\r\n        if(Object.keys(reference).length==0 || Object.keys(reference['@_FileRef']).length==0){\r\n            return true;\r\n        }\r\n        const hashed = reference['ofd:CheckValue'];\r\n        const key = reference['@_FileRef'].replace('/','');\r\n        let fileData = await getFileData(zip, key);\r\n        arr.push({fileData,hashed,checkMethod});\r\n    });\r\n    global.toBeChecked.set(signatureID, arr);\r\n    return {\r\n        'stampAnnot': data['json']['ofd:Signature']['ofd:SignedInfo']['ofd:StampAnnot'],\r\n        'sealObj': sealObj,\r\n        'signedInfo':{\r\n            'signatureID': signatureID,\r\n            'VerifyRet':sealObj.verifyRet,\r\n            'Provider':data['json']['ofd:Signature']['ofd:SignedInfo']['ofd:Provider'],\r\n            'SignatureMethod':data['json']['ofd:Signature']['ofd:SignedInfo']['ofd:SignatureMethod'],\r\n            'SignatureDateTime':data['json']['ofd:Signature']['ofd:SignedInfo']['ofd:SignatureDateTime'],\r\n        },\r\n    };\r\n}\r\n\r\nconst getSealDocumentObj = function (stampAnnot) {\r\n    return new Promise((resolve, reject) => {\r\n        pipeline.call(this, async () => await unzipOfd(stampAnnot.sealObj.ofdArray), getDocRoots, parseSingleDoc)\r\n            .then(res => {\r\n                resolve(res)\r\n            })\r\n            .catch(res => {\r\n                reject(res);\r\n            });\r\n    });\r\n}\r\n\r\nconst getJsonFromXmlContent = async function (zip, xmlName) {\r\n    return new Promise((resolve, reject) => {\r\n        zip.files[xmlName].async('string').then(function (content) {\r\n            let ops = {\r\n                attributeNamePrefix: \"@_\",\r\n                ignoreAttributes: false,\r\n                parseNodeValue: false,\r\n                trimValues: false\r\n            };\r\n            let jsonObj = parser.parse(content, ops);\r\n            let result = {'xml': content, 'json': jsonObj};\r\n            resolve(result);\r\n        }, function error(e) {\r\n            reject(e);\r\n        })\r\n    });\r\n}\r\n\r\nconst parseJbig2ImageFromZip = async function (zip, name) {\r\n    return new Promise((resolve, reject) => {\r\n        zip.files[name].async('uint8array').then(function (bytes) {\r\n            let jbig2 = new Jbig2Image();\r\n            const img = jbig2.parse(bytes);\r\n            resolve({img, width: jbig2.width, height: jbig2.height, format: 'gbig2'});\r\n        }, function error(e) {\r\n            reject(e);\r\n        })\r\n    });\r\n}\r\n\r\nconst parseOtherImageFromZip = async function (zip, name) {\r\n    return new Promise((resolve, reject) => {\r\n        zip.files[name].async('base64').then(function (bytes) {\r\n            const img = 'data:image/png;base64,' + bytes;\r\n            resolve(img);\r\n        }, function error(e) {\r\n            reject(e);\r\n        })\r\n    });\r\n}\r\n\r\n\r\n","/*\r\n * ofd.js - A Javascript class for reading and rendering ofd files\r\n * <https://github.com/DLTech21/ofd.js>\r\n *\r\n * Copyright (c) 2020. DLTech21 All Rights Reserved.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * You may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *      http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n *  Unless required by applicable law or agreed to in writing, software\r\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\r\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n *  See the License for the specific language governing permissions and\r\n *  limitations under the License.\r\n *\r\n */\r\n\r\n\r\nexport const convertPathAbbreviatedDatatoPoint = abbreviatedData => {\r\n    let array = abbreviatedData.split(' ');\r\n    let pointList = [];\r\n    let i = 0;\r\n    while (i < array.length) {\r\n        if (array[i] === 'M'|| array[i] === 'S') {\r\n            let point = {\r\n                'type': 'M',\r\n                'x': parseFloat(array[i + 1]),\r\n                'y': parseFloat(array[i + 2])\r\n            }\r\n            i = i + 3;\r\n            pointList.push(point);\r\n        }\r\n        if (array[i] === 'L') {\r\n            let point = {\r\n                'type': 'L',\r\n                'x': parseFloat(array[i + 1]),\r\n                'y': parseFloat(array[i + 2])\r\n            }\r\n            i = i + 3;\r\n            pointList.push(point);\r\n        } else if (array[i] === 'C') {\r\n            let point = {\r\n                'type': 'C',\r\n                'x': 0,\r\n                'y': 0\r\n            }\r\n            pointList.push(point)\r\n            i++;\r\n        } else if (array[i] === 'B') {\r\n            let point = {\r\n                'type': 'B',\r\n                'x1': parseFloat(array[i + 1]),\r\n                'y1': parseFloat(array[i + 2]),\r\n                'x2': parseFloat(array[i + 3]),\r\n                'y2': parseFloat(array[i + 4]),\r\n                'x3': parseFloat(array[i + 5]),\r\n                'y3': parseFloat(array[i + 6])\r\n            }\r\n            i = i + 7;\r\n            pointList.push(point);\r\n        } else {\r\n            i++;\r\n        }\r\n    }\r\n    return pointList;\r\n}\r\n\r\nexport const calPathPoint = function (abbreviatedPoint) {\r\n    let pointList = [];\r\n\r\n    for (let i = 0; i < abbreviatedPoint.length; i++) {\r\n        let point = abbreviatedPoint[i];\r\n        if (point.type === 'M' || point.type === 'L' || point.type === 'C') {\r\n            let x = 0, y = 0;\r\n            x = point.x;\r\n            y = point.y;\r\n            point.x = converterDpi(x);\r\n            point.y = converterDpi(y);\r\n            pointList.push(point);\r\n        } else if (point.type === 'B') {\r\n            let x1 = point.x1, y1 = point.y1;\r\n            let x2 = point.x2, y2 = point.y2;\r\n            let x3 = point.x3, y3 = point.y3;\r\n            let realPoint = {\r\n                'type': 'B', 'x1': converterDpi(x1), 'y1': converterDpi(y1),\r\n                'x2': converterDpi(x2), 'y2': converterDpi(y2),\r\n                'x3': converterDpi(x3), 'y3': converterDpi(y3)\r\n            }\r\n            pointList.push(realPoint);\r\n        }\r\n    }\r\n    return pointList;\r\n}\r\n\r\nconst millimetersToPixel = function (mm, dpi) {\r\n    //毫米转像素：mm * dpi / 25.4\r\n    return ((mm * dpi / 25.4));\r\n}\r\n\r\nlet MaxScale = 10;\r\n\r\nlet Scale = MaxScale ;\r\n\r\nexport const setMaxPageScal = function (scale) {\r\n    MaxScale = scale > 5 ? 5 : scale;\r\n}\r\n\r\nexport const setPageScal = function (scale) {\r\n    // scale = Math.ceil(scale);\r\n    Scale = scale > 1 ? scale: 1;\r\n    Scale = Scale > MaxScale ? MaxScale: Scale;\r\n}\r\n\r\nexport const getPageScal = function () {\r\n    return Scale;\r\n}\r\n\r\nexport const converterDpi = function (width) {\r\n    return millimetersToPixel(width, Scale*25.4);\r\n}\r\n\r\nexport const deltaFormatter = function (delta) {\r\n    if(delta.indexOf(\"g\") === -1) {\r\n        let floatList = [];\r\n        for (let f of delta.split(' ')) {\r\n            floatList.push(parseFloat(f));\r\n        }\r\n        return floatList;\r\n    } else {\r\n        const array = delta.split(' ');\r\n        let gFlag = false;\r\n        let gProcessing = false;\r\n        let gItemCount = 0;\r\n        let floatList = [];\r\n        for (const s of array) {\r\n            if ('g' === s) {\r\n                gFlag = true;\r\n            } else {\r\n                if (!s || s.trim().length == 0) {\r\n                    continue;\r\n                }\r\n                if (gFlag) {\r\n                    gItemCount = parseInt(s);\r\n                    gProcessing = true;\r\n                    gFlag = false;\r\n                } else if (gProcessing) {\r\n                    for (let j = 0; j < gItemCount; j++) {\r\n                        floatList.push(parseFloat(s));\r\n                    }\r\n                    gProcessing = false;\r\n                } else {\r\n                    floatList.push(parseFloat(s));\r\n                }\r\n            }\r\n        }\r\n        return floatList;\r\n    }\r\n}\r\n\r\nexport const calTextPoint = function (textCodes) {\r\n    let x = 0;\r\n    let y = 0;\r\n    let textCodePointList = [];\r\n    if (!textCodes) {\r\n        return textCodePointList;\r\n    }\r\n    for (let textCode of textCodes) {\r\n        if (!textCode) {\r\n            continue\r\n        }\r\n        x = parseFloat(textCode['@_X']);\r\n        y = parseFloat(textCode['@_Y']);\r\n\r\n        if (isNaN(x)) {\r\n            x = 0;\r\n        }\r\n        if (isNaN(y)) {\r\n            y = 0;\r\n        }\r\n\r\n        let deltaXList = [];\r\n        let deltaYList = [];\r\n        if (textCode['@_DeltaX'] && textCode['@_DeltaX'].length > 0) {\r\n            deltaXList = deltaFormatter(textCode['@_DeltaX']);\r\n        }\r\n        if (textCode['@_DeltaY'] && textCode['@_DeltaY'].length > 0) {\r\n            deltaYList = deltaFormatter(textCode['@_DeltaY']);\r\n        }\r\n        let textStr = textCode['#text'];\r\n        if (textStr) {\r\n            textStr += '';\r\n            textStr = decodeHtml(textStr);\r\n            textStr = textStr.replace(/&#x20;/g, ' ');\r\n            for (let i = 0; i < textStr.length; i++) {\r\n                if (i > 0 && deltaXList.length > 0) {\r\n                    x += deltaXList[(i - 1)];\r\n                }\r\n                if (i > 0 && deltaYList.length > 0) {\r\n                    y += deltaYList[(i - 1)];\r\n                }\r\n                let text = textStr.substring(i, i + 1);\r\n                let textCodePoint = {'x': converterDpi(x), 'y': converterDpi(y), 'text': text};\r\n                textCodePointList.push(textCodePoint);\r\n            }\r\n        }\r\n    }\r\n    return textCodePointList;\r\n}\r\n\r\nexport const replaceFirstSlash = function (str) {\r\n    if (str) {\r\n        if (str.indexOf('/') === 0) {\r\n            str = str.replace('/', '');\r\n        }\r\n    }\r\n    return str;\r\n}\r\n\r\nexport const getExtensionByPath = function (path) {\r\n    if (!path && typeof path !== \"string\") return \"\";\r\n    return path.substring(path.lastIndexOf('.') + 1);\r\n}\r\n\r\n\r\nlet REGX_HTML_DECODE = /&\\w+;|&#(\\d+);/g;\r\n\r\nlet HTML_DECODE = {\r\n    \"&lt;\" : \"<\",\r\n    \"&gt;\" : \">\",\r\n    \"&amp;\" : \"&\",\r\n    \"&nbsp;\": \" \",\r\n    \"&quot;\": \"\\\"\",\r\n    \"&copy;\": \"\",\r\n    \"&apos;\": \"'\",\r\n    // Add more\r\n};\r\n\r\nexport const decodeHtml = function(s){\r\n    s = (s != undefined) ? s : this.toString();\r\n    return (typeof s != \"string\") ? s :\r\n        s.replace(REGX_HTML_DECODE,\r\n            function($0, $1){\r\n                var c = HTML_DECODE[$0];\r\n                if(c == undefined){\r\n                    // Maybe is Entity Number\r\n                    if(!isNaN($1)){\r\n                        c = String.fromCharCode(($1 == 160) ? 32:$1);\r\n                    }else{\r\n                        c = $0;\r\n                    }\r\n                }\r\n                return c;\r\n            });\r\n};\r\n\r\nlet FONT_FAMILY = {\r\n    '楷体': '楷体, KaiTi, Kai, simkai',\r\n    'kaiti': '楷体, KaiTi, Kai, simkai',\r\n    'Kai': '楷体, KaiTi, Kai',\r\n    'simsun': 'SimSun, simsun, Songti SC',\r\n    '宋体': 'SimSun, simsun, Songti SC',\r\n    '黑体': 'SimHei, STHeiti, simhei',\r\n    '仿宋': 'FangSong, STFangsong, simfang',\r\n    '小标宋体': 'sSun',\r\n    '方正小标宋_gbk': 'sSun',\r\n    '仿宋_gb2312': 'FangSong, STFangsong, simfang',\r\n    '楷体_gb2312': '楷体, KaiTi, Kai, simkai',\r\n    'couriernew': 'Courier New',\r\n    'courier new': 'Courier New',\r\n};\r\n\r\nexport const getFontFamily = function (font) {\r\n    if (FONT_FAMILY[font.toLowerCase()]) {\r\n        font = FONT_FAMILY[font.toLowerCase()];\r\n    }\r\n    for (let key of Object.keys(FONT_FAMILY)) {\r\n        if (font.toLowerCase().indexOf(key.toLowerCase()) != -1) {\r\n            return FONT_FAMILY[key]\r\n        }\r\n    }\r\n    return font;\r\n}\r\n\r\nexport const parseStBox = function (obj) {\r\n    if (obj) {\r\n        let array = obj.split(' ');\r\n        return {\r\n            x: (parseFloat(array[0])), y: (parseFloat(array[1])),\r\n            w: (parseFloat(array[2])), h: (parseFloat(array[3]))\r\n        };\r\n    } else {\r\n        return null;\r\n    }\r\n}\r\n\r\nexport const parseCtm = function (ctm) {\r\n    let array = ctm.split(' ');\r\n    return array;\r\n}\r\n\r\nexport const parseColor = function (color) {\r\n    if (color) {\r\n        if (color.indexOf('#') !== -1) {\r\n            color = color.replace(/#/g, '');\r\n            color = color.replace(/ /g, '');\r\n            color = '#' + color.toString();\r\n            return color;\r\n        }\r\n        let array = color.split(' ');\r\n        return `rgb(${array[0]}, ${array[1]}, ${array[2]})`\r\n    } else {\r\n        return `rgb(0, 0, 0)`\r\n    }\r\n}\r\n\r\nexport const converterBox = function (box) {\r\n    return {\r\n        x: converterDpi(box.x), y: converterDpi(box.y),\r\n        w: converterDpi(box.w), h: converterDpi(box.h)\r\n    };\r\n}\r\n\r\nexport const Uint8ArrayToHexString = function (arr) {\r\n    let words = [];\r\n    let j = 0;\r\n    for (let i = 0; i < arr.length * 2; i += 2) {\r\n        words[i >>> 3] |= parseInt(arr[j], 10) << (24 - (i % 8) * 4);\r\n        j++;\r\n    }\r\n\r\n    // 转换到16进制\r\n    let hexChars = [];\r\n    for (let i = 0; i < arr.length; i++) {\r\n        let bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\r\n        hexChars.push((bite >>> 4).toString(16));\r\n        hexChars.push((bite & 0x0f).toString(16));\r\n    }\r\n\r\n    return hexChars.join('');\r\n}\r\n","/* Copyright 2012 Mozilla Foundation\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/* eslint no-var: error */\r\n\r\nimport \"./compatibility.js\";\r\n\r\nconst IDENTITY_MATRIX = [1, 0, 0, 1, 0, 0];\r\nconst FONT_IDENTITY_MATRIX = [0.001, 0, 0, 0.001, 0, 0];\r\n\r\n// Permission flags from Table 22, Section 7.6.3.2 of the PDF specification.\r\nconst PermissionFlag = {\r\n  PRINT: 0x04,\r\n  MODIFY_CONTENTS: 0x08,\r\n  COPY: 0x10,\r\n  MODIFY_ANNOTATIONS: 0x20,\r\n  FILL_INTERACTIVE_FORMS: 0x100,\r\n  COPY_FOR_ACCESSIBILITY: 0x200,\r\n  ASSEMBLE: 0x400,\r\n  PRINT_HIGH_QUALITY: 0x800,\r\n};\r\n\r\nconst TextRenderingMode = {\r\n  FILL: 0,\r\n  STROKE: 1,\r\n  FILL_STROKE: 2,\r\n  INVISIBLE: 3,\r\n  FILL_ADD_TO_PATH: 4,\r\n  STROKE_ADD_TO_PATH: 5,\r\n  FILL_STROKE_ADD_TO_PATH: 6,\r\n  ADD_TO_PATH: 7,\r\n  FILL_STROKE_MASK: 3,\r\n  ADD_TO_PATH_FLAG: 4,\r\n};\r\n\r\nconst ImageKind = {\r\n  GRAYSCALE_1BPP: 1,\r\n  RGB_24BPP: 2,\r\n  RGBA_32BPP: 3,\r\n};\r\n\r\nconst AnnotationType = {\r\n  TEXT: 1,\r\n  LINK: 2,\r\n  FREETEXT: 3,\r\n  LINE: 4,\r\n  SQUARE: 5,\r\n  CIRCLE: 6,\r\n  POLYGON: 7,\r\n  POLYLINE: 8,\r\n  HIGHLIGHT: 9,\r\n  UNDERLINE: 10,\r\n  SQUIGGLY: 11,\r\n  STRIKEOUT: 12,\r\n  STAMP: 13,\r\n  CARET: 14,\r\n  INK: 15,\r\n  POPUP: 16,\r\n  FILEATTACHMENT: 17,\r\n  SOUND: 18,\r\n  MOVIE: 19,\r\n  WIDGET: 20,\r\n  SCREEN: 21,\r\n  PRINTERMARK: 22,\r\n  TRAPNET: 23,\r\n  WATERMARK: 24,\r\n  THREED: 25,\r\n  REDACT: 26,\r\n};\r\n\r\nconst AnnotationStateModelType = {\r\n  MARKED: \"Marked\",\r\n  REVIEW: \"Review\",\r\n};\r\n\r\nconst AnnotationMarkedState = {\r\n  MARKED: \"Marked\",\r\n  UNMARKED: \"Unmarked\",\r\n};\r\n\r\nconst AnnotationReviewState = {\r\n  ACCEPTED: \"Accepted\",\r\n  REJECTED: \"Rejected\",\r\n  CANCELLED: \"Cancelled\",\r\n  COMPLETED: \"Completed\",\r\n  NONE: \"None\",\r\n};\r\n\r\nconst AnnotationReplyType = {\r\n  GROUP: \"Group\",\r\n  REPLY: \"R\",\r\n};\r\n\r\nconst AnnotationFlag = {\r\n  INVISIBLE: 0x01,\r\n  HIDDEN: 0x02,\r\n  PRINT: 0x04,\r\n  NOZOOM: 0x08,\r\n  NOROTATE: 0x10,\r\n  NOVIEW: 0x20,\r\n  READONLY: 0x40,\r\n  LOCKED: 0x80,\r\n  TOGGLENOVIEW: 0x100,\r\n  LOCKEDCONTENTS: 0x200,\r\n};\r\n\r\nconst AnnotationFieldFlag = {\r\n  READONLY: 0x0000001,\r\n  REQUIRED: 0x0000002,\r\n  NOEXPORT: 0x0000004,\r\n  MULTILINE: 0x0001000,\r\n  PASSWORD: 0x0002000,\r\n  NOTOGGLETOOFF: 0x0004000,\r\n  RADIO: 0x0008000,\r\n  PUSHBUTTON: 0x0010000,\r\n  COMBO: 0x0020000,\r\n  EDIT: 0x0040000,\r\n  SORT: 0x0080000,\r\n  FILESELECT: 0x0100000,\r\n  MULTISELECT: 0x0200000,\r\n  DONOTSPELLCHECK: 0x0400000,\r\n  DONOTSCROLL: 0x0800000,\r\n  COMB: 0x1000000,\r\n  RICHTEXT: 0x2000000,\r\n  RADIOSINUNISON: 0x2000000,\r\n  COMMITONSELCHANGE: 0x4000000,\r\n};\r\n\r\nconst AnnotationBorderStyleType = {\r\n  SOLID: 1,\r\n  DASHED: 2,\r\n  BEVELED: 3,\r\n  INSET: 4,\r\n  UNDERLINE: 5,\r\n};\r\n\r\nconst StreamType = {\r\n  UNKNOWN: \"UNKNOWN\",\r\n  FLATE: \"FLATE\",\r\n  LZW: \"LZW\",\r\n  DCT: \"DCT\",\r\n  JPX: \"JPX\",\r\n  JBIG: \"JBIG\",\r\n  A85: \"A85\",\r\n  AHX: \"AHX\",\r\n  CCF: \"CCF\",\r\n  RLX: \"RLX\", // PDF short name is 'RL', but telemetry requires three chars.\r\n};\r\n\r\nconst FontType = {\r\n  UNKNOWN: \"UNKNOWN\",\r\n  TYPE1: \"TYPE1\",\r\n  TYPE1C: \"TYPE1C\",\r\n  CIDFONTTYPE0: \"CIDFONTTYPE0\",\r\n  CIDFONTTYPE0C: \"CIDFONTTYPE0C\",\r\n  TRUETYPE: \"TRUETYPE\",\r\n  CIDFONTTYPE2: \"CIDFONTTYPE2\",\r\n  TYPE3: \"TYPE3\",\r\n  OPENTYPE: \"OPENTYPE\",\r\n  TYPE0: \"TYPE0\",\r\n  MMTYPE1: \"MMTYPE1\",\r\n};\r\n\r\nconst VerbosityLevel = {\r\n  ERRORS: 0,\r\n  WARNINGS: 1,\r\n  INFOS: 5,\r\n};\r\n\r\nconst CMapCompressionType = {\r\n  NONE: 0,\r\n  BINARY: 1,\r\n  STREAM: 2,\r\n};\r\n\r\n// All the possible operations for an operator list.\r\nconst OPS = {\r\n  // Intentionally start from 1 so it is easy to spot bad operators that will be\r\n  // 0's.\r\n  dependency: 1,\r\n  setLineWidth: 2,\r\n  setLineCap: 3,\r\n  setLineJoin: 4,\r\n  setMiterLimit: 5,\r\n  setDash: 6,\r\n  setRenderingIntent: 7,\r\n  setFlatness: 8,\r\n  setGState: 9,\r\n  save: 10,\r\n  restore: 11,\r\n  transform: 12,\r\n  moveTo: 13,\r\n  lineTo: 14,\r\n  curveTo: 15,\r\n  curveTo2: 16,\r\n  curveTo3: 17,\r\n  closePath: 18,\r\n  rectangle: 19,\r\n  stroke: 20,\r\n  closeStroke: 21,\r\n  fill: 22,\r\n  eoFill: 23,\r\n  fillStroke: 24,\r\n  eoFillStroke: 25,\r\n  closeFillStroke: 26,\r\n  closeEOFillStroke: 27,\r\n  endPath: 28,\r\n  clip: 29,\r\n  eoClip: 30,\r\n  beginText: 31,\r\n  endText: 32,\r\n  setCharSpacing: 33,\r\n  setWordSpacing: 34,\r\n  setHScale: 35,\r\n  setLeading: 36,\r\n  setFont: 37,\r\n  setTextRenderingMode: 38,\r\n  setTextRise: 39,\r\n  moveText: 40,\r\n  setLeadingMoveText: 41,\r\n  setTextMatrix: 42,\r\n  nextLine: 43,\r\n  showText: 44,\r\n  showSpacedText: 45,\r\n  nextLineShowText: 46,\r\n  nextLineSetSpacingShowText: 47,\r\n  setCharWidth: 48,\r\n  setCharWidthAndBounds: 49,\r\n  setStrokeColorSpace: 50,\r\n  setFillColorSpace: 51,\r\n  setStrokeColor: 52,\r\n  setStrokeColorN: 53,\r\n  setFillColor: 54,\r\n  setFillColorN: 55,\r\n  setStrokeGray: 56,\r\n  setFillGray: 57,\r\n  setStrokeRGBColor: 58,\r\n  setFillRGBColor: 59,\r\n  setStrokeCMYKColor: 60,\r\n  setFillCMYKColor: 61,\r\n  shadingFill: 62,\r\n  beginInlineImage: 63,\r\n  beginImageData: 64,\r\n  endInlineImage: 65,\r\n  paintXObject: 66,\r\n  markPoint: 67,\r\n  markPointProps: 68,\r\n  beginMarkedContent: 69,\r\n  beginMarkedContentProps: 70,\r\n  endMarkedContent: 71,\r\n  beginCompat: 72,\r\n  endCompat: 73,\r\n  paintFormXObjectBegin: 74,\r\n  paintFormXObjectEnd: 75,\r\n  beginGroup: 76,\r\n  endGroup: 77,\r\n  beginAnnotations: 78,\r\n  endAnnotations: 79,\r\n  beginAnnotation: 80,\r\n  endAnnotation: 81,\r\n  paintJpegXObject: 82,\r\n  paintImageMaskXObject: 83,\r\n  paintImageMaskXObjectGroup: 84,\r\n  paintImageXObject: 85,\r\n  paintInlineImageXObject: 86,\r\n  paintInlineImageXObjectGroup: 87,\r\n  paintImageXObjectRepeat: 88,\r\n  paintImageMaskXObjectRepeat: 89,\r\n  paintSolidColorImageMask: 90,\r\n  constructPath: 91,\r\n};\r\n\r\nconst UNSUPPORTED_FEATURES = {\r\n  /** @deprecated unused */\r\n  unknown: \"unknown\",\r\n  forms: \"forms\",\r\n  javaScript: \"javaScript\",\r\n  smask: \"smask\",\r\n  shadingPattern: \"shadingPattern\",\r\n  /** @deprecated unused */\r\n  font: \"font\",\r\n  errorTilingPattern: \"errorTilingPattern\",\r\n  errorExtGState: \"errorExtGState\",\r\n  errorXObject: \"errorXObject\",\r\n  errorFontLoadType3: \"errorFontLoadType3\",\r\n  errorFontState: \"errorFontState\",\r\n  errorFontMissing: \"errorFontMissing\",\r\n  errorFontTranslate: \"errorFontTranslate\",\r\n  errorColorSpace: \"errorColorSpace\",\r\n  errorOperatorList: \"errorOperatorList\",\r\n  errorFontToUnicode: \"errorFontToUnicode\",\r\n  errorFontLoadNative: \"errorFontLoadNative\",\r\n  errorFontGetPath: \"errorFontGetPath\",\r\n  errorMarkedContent: \"errorMarkedContent\",\r\n};\r\n\r\nconst PasswordResponses = {\r\n  NEED_PASSWORD: 1,\r\n  INCORRECT_PASSWORD: 2,\r\n};\r\n\r\nlet verbosity = VerbosityLevel.WARNINGS;\r\n\r\nfunction setVerbosityLevel(level) {\r\n  if (Number.isInteger(level)) {\r\n    verbosity = level;\r\n  }\r\n}\r\n\r\nfunction getVerbosityLevel() {\r\n  return verbosity;\r\n}\r\n\r\n// A notice for devs. These are good for things that are helpful to devs, such\r\n// as warning that Workers were disabled, which is important to devs but not\r\n// end users.\r\nfunction info(msg) {\r\n  if (verbosity >= VerbosityLevel.INFOS) {\r\n    console.log(`Info: ${msg}`);\r\n  }\r\n}\r\n\r\n// Non-fatal warnings.\r\nfunction warn(msg) {\r\n  if (verbosity >= VerbosityLevel.WARNINGS) {\r\n    console.log(`Warning: ${msg}`);\r\n  }\r\n}\r\n\r\nfunction unreachable(msg) {\r\n  throw new Error(msg);\r\n}\r\n\r\nfunction assert(cond, msg) {\r\n  if (!cond) {\r\n    unreachable(msg);\r\n  }\r\n}\r\n\r\n// Checks if URLs have the same origin. For non-HTTP based URLs, returns false.\r\nfunction isSameOrigin(baseUrl, otherUrl) {\r\n  let base;\r\n  try {\r\n    base = new URL(baseUrl);\r\n    if (!base.origin || base.origin === \"null\") {\r\n      return false; // non-HTTP url\r\n    }\r\n  } catch (e) {\r\n    return false;\r\n  }\r\n\r\n  const other = new URL(otherUrl, base);\r\n  return base.origin === other.origin;\r\n}\r\n\r\n// Checks if URLs use one of the allowed protocols, e.g. to avoid XSS.\r\nfunction _isValidProtocol(url) {\r\n  if (!url) {\r\n    return false;\r\n  }\r\n  switch (url.protocol) {\r\n    case \"http:\":\r\n    case \"https:\":\r\n    case \"ftp:\":\r\n    case \"mailto:\":\r\n    case \"tel:\":\r\n      return true;\r\n    default:\r\n      return false;\r\n  }\r\n}\r\n\r\n/**\r\n * Attempts to create a valid absolute URL.\r\n *\r\n * @param {URL|string} url - An absolute, or relative, URL.\r\n * @param {URL|string} baseUrl - An absolute URL.\r\n * @returns Either a valid {URL}, or `null` otherwise.\r\n */\r\nfunction createValidAbsoluteUrl(url, baseUrl) {\r\n  if (!url) {\r\n    return null;\r\n  }\r\n  try {\r\n    const absoluteUrl = baseUrl ? new URL(url, baseUrl) : new URL(url);\r\n    if (_isValidProtocol(absoluteUrl)) {\r\n      return absoluteUrl;\r\n    }\r\n  } catch (ex) {\r\n    /* `new URL()` will throw on incorrect data. */\r\n  }\r\n  return null;\r\n}\r\n\r\nfunction shadow(obj, prop, value) {\r\n  Object.defineProperty(obj, prop, {\r\n    value,\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: false,\r\n  });\r\n  return value;\r\n}\r\n\r\n/**\r\n * @type {any}\r\n */\r\nconst BaseException = (function BaseExceptionClosure() {\r\n  // eslint-disable-next-line no-shadow\r\n  function BaseException(message) {\r\n    if (this.constructor === BaseException) {\r\n      unreachable(\"Cannot initialize BaseException.\");\r\n    }\r\n    this.message = message;\r\n    this.name = this.constructor.name;\r\n  }\r\n  BaseException.prototype = new Error();\r\n  BaseException.constructor = BaseException;\r\n\r\n  return BaseException;\r\n})();\r\n\r\nclass PasswordException extends BaseException {\r\n  constructor(msg, code) {\r\n    super(msg);\r\n    this.code = code;\r\n  }\r\n}\r\n\r\nclass UnknownErrorException extends BaseException {\r\n  constructor(msg, details) {\r\n    super(msg);\r\n    this.details = details;\r\n  }\r\n}\r\n\r\nclass InvalidPDFException extends BaseException {}\r\n\r\nclass MissingPDFException extends BaseException {}\r\n\r\nclass UnexpectedResponseException extends BaseException {\r\n  constructor(msg, status) {\r\n    super(msg);\r\n    this.status = status;\r\n  }\r\n}\r\n\r\n/**\r\n * Error caused during parsing PDF data.\r\n */\r\nclass FormatError extends BaseException {}\r\n\r\n/**\r\n * Error used to indicate task cancellation.\r\n */\r\nclass AbortException extends BaseException {}\r\n\r\nconst NullCharactersRegExp = /\\x00/g;\r\n\r\n/**\r\n * @param {string} str\r\n */\r\nfunction removeNullCharacters(str) {\r\n  if (typeof str !== \"string\") {\r\n    warn(\"The argument for removeNullCharacters must be a string.\");\r\n    return str;\r\n  }\r\n  return str.replace(NullCharactersRegExp, \"\");\r\n}\r\n\r\nfunction bytesToString(bytes) {\r\n  assert(\r\n    bytes !== null && typeof bytes === \"object\" && bytes.length !== undefined,\r\n    \"Invalid argument for bytesToString\"\r\n  );\r\n  const length = bytes.length;\r\n  const MAX_ARGUMENT_COUNT = 8192;\r\n  if (length < MAX_ARGUMENT_COUNT) {\r\n    return String.fromCharCode.apply(null, bytes);\r\n  }\r\n  const strBuf = [];\r\n  for (let i = 0; i < length; i += MAX_ARGUMENT_COUNT) {\r\n    const chunkEnd = Math.min(i + MAX_ARGUMENT_COUNT, length);\r\n    const chunk = bytes.subarray(i, chunkEnd);\r\n    strBuf.push(String.fromCharCode.apply(null, chunk));\r\n  }\r\n  return strBuf.join(\"\");\r\n}\r\n\r\nfunction stringToBytes(str) {\r\n  assert(typeof str === \"string\", \"Invalid argument for stringToBytes\");\r\n  const length = str.length;\r\n  const bytes = new Uint8Array(length);\r\n  for (let i = 0; i < length; ++i) {\r\n    bytes[i] = str.charCodeAt(i) & 0xff;\r\n  }\r\n  return bytes;\r\n}\r\n\r\n/**\r\n * Gets length of the array (Array, Uint8Array, or string) in bytes.\r\n * @param {Array<any>|Uint8Array|string} arr\r\n * @returns {number}\r\n */\r\nfunction arrayByteLength(arr) {\r\n  if (arr.length !== undefined) {\r\n    return arr.length;\r\n  }\r\n  assert(arr.byteLength !== undefined, \"arrayByteLength - invalid argument.\");\r\n  return arr.byteLength;\r\n}\r\n\r\n/**\r\n * Combines array items (arrays) into single Uint8Array object.\r\n * @param {Array<Array<any>|Uint8Array|string>} arr - the array of the arrays\r\n *   (Array, Uint8Array, or string).\r\n * @returns {Uint8Array}\r\n */\r\nfunction arraysToBytes(arr) {\r\n  const length = arr.length;\r\n  // Shortcut: if first and only item is Uint8Array, return it.\r\n  if (length === 1 && arr[0] instanceof Uint8Array) {\r\n    return arr[0];\r\n  }\r\n  let resultLength = 0;\r\n  for (let i = 0; i < length; i++) {\r\n    resultLength += arrayByteLength(arr[i]);\r\n  }\r\n  let pos = 0;\r\n  const data = new Uint8Array(resultLength);\r\n  for (let i = 0; i < length; i++) {\r\n    let item = arr[i];\r\n    if (!(item instanceof Uint8Array)) {\r\n      if (typeof item === \"string\") {\r\n        item = stringToBytes(item);\r\n      } else {\r\n        item = new Uint8Array(item);\r\n      }\r\n    }\r\n    const itemLength = item.byteLength;\r\n    data.set(item, pos);\r\n    pos += itemLength;\r\n  }\r\n  return data;\r\n}\r\n\r\nfunction string32(value) {\r\n  return String.fromCharCode(\r\n    (value >> 24) & 0xff,\r\n    (value >> 16) & 0xff,\r\n    (value >> 8) & 0xff,\r\n    value & 0xff\r\n  );\r\n}\r\n\r\n// Checks the endianness of the platform.\r\nfunction isLittleEndian() {\r\n  const buffer8 = new Uint8Array(4);\r\n  buffer8[0] = 1;\r\n  const view32 = new Uint32Array(buffer8.buffer, 0, 1);\r\n  return view32[0] === 1;\r\n}\r\nconst IsLittleEndianCached = {\r\n  get value() {\r\n    return shadow(this, \"value\", isLittleEndian());\r\n  },\r\n};\r\n\r\n// Checks if it's possible to eval JS expressions.\r\nfunction isEvalSupported() {\r\n  try {\r\n    new Function(\"\"); // eslint-disable-line no-new, no-new-func\r\n    return true;\r\n  } catch (e) {\r\n    return false;\r\n  }\r\n}\r\nconst IsEvalSupportedCached = {\r\n  get value() {\r\n    return shadow(this, \"value\", isEvalSupported());\r\n  },\r\n};\r\n\r\nconst rgbBuf = [\"rgb(\", 0, \",\", 0, \",\", 0, \")\"];\r\n\r\nclass Util {\r\n  // makeCssRgb() can be called thousands of times. Using ´rgbBuf` avoids\r\n  // creating many intermediate strings.\r\n  static makeCssRgb(r, g, b) {\r\n    rgbBuf[1] = r;\r\n    rgbBuf[3] = g;\r\n    rgbBuf[5] = b;\r\n    return rgbBuf.join(\"\");\r\n  }\r\n\r\n  // Concatenates two transformation matrices together and returns the result.\r\n  static transform(m1, m2) {\r\n    return [\r\n      m1[0] * m2[0] + m1[2] * m2[1],\r\n      m1[1] * m2[0] + m1[3] * m2[1],\r\n      m1[0] * m2[2] + m1[2] * m2[3],\r\n      m1[1] * m2[2] + m1[3] * m2[3],\r\n      m1[0] * m2[4] + m1[2] * m2[5] + m1[4],\r\n      m1[1] * m2[4] + m1[3] * m2[5] + m1[5],\r\n    ];\r\n  }\r\n\r\n  // For 2d affine transforms\r\n  static applyTransform(p, m) {\r\n    const xt = p[0] * m[0] + p[1] * m[2] + m[4];\r\n    const yt = p[0] * m[1] + p[1] * m[3] + m[5];\r\n    return [xt, yt];\r\n  }\r\n\r\n  static applyInverseTransform(p, m) {\r\n    const d = m[0] * m[3] - m[1] * m[2];\r\n    const xt = (p[0] * m[3] - p[1] * m[2] + m[2] * m[5] - m[4] * m[3]) / d;\r\n    const yt = (-p[0] * m[1] + p[1] * m[0] + m[4] * m[1] - m[5] * m[0]) / d;\r\n    return [xt, yt];\r\n  }\r\n\r\n  // Applies the transform to the rectangle and finds the minimum axially\r\n  // aligned bounding box.\r\n  static getAxialAlignedBoundingBox(r, m) {\r\n    const p1 = Util.applyTransform(r, m);\r\n    const p2 = Util.applyTransform(r.slice(2, 4), m);\r\n    const p3 = Util.applyTransform([r[0], r[3]], m);\r\n    const p4 = Util.applyTransform([r[2], r[1]], m);\r\n    return [\r\n      Math.min(p1[0], p2[0], p3[0], p4[0]),\r\n      Math.min(p1[1], p2[1], p3[1], p4[1]),\r\n      Math.max(p1[0], p2[0], p3[0], p4[0]),\r\n      Math.max(p1[1], p2[1], p3[1], p4[1]),\r\n    ];\r\n  }\r\n\r\n  static inverseTransform(m) {\r\n    const d = m[0] * m[3] - m[1] * m[2];\r\n    return [\r\n      m[3] / d,\r\n      -m[1] / d,\r\n      -m[2] / d,\r\n      m[0] / d,\r\n      (m[2] * m[5] - m[4] * m[3]) / d,\r\n      (m[4] * m[1] - m[5] * m[0]) / d,\r\n    ];\r\n  }\r\n\r\n  // Apply a generic 3d matrix M on a 3-vector v:\r\n  //   | a b c |   | X |\r\n  //   | d e f | x | Y |\r\n  //   | g h i |   | Z |\r\n  // M is assumed to be serialized as [a,b,c,d,e,f,g,h,i],\r\n  // with v as [X,Y,Z]\r\n  static apply3dTransform(m, v) {\r\n    return [\r\n      m[0] * v[0] + m[1] * v[1] + m[2] * v[2],\r\n      m[3] * v[0] + m[4] * v[1] + m[5] * v[2],\r\n      m[6] * v[0] + m[7] * v[1] + m[8] * v[2],\r\n    ];\r\n  }\r\n\r\n  // This calculation uses Singular Value Decomposition.\r\n  // The SVD can be represented with formula A = USV. We are interested in the\r\n  // matrix S here because it represents the scale values.\r\n  static singularValueDecompose2dScale(m) {\r\n    const transpose = [m[0], m[2], m[1], m[3]];\r\n\r\n    // Multiply matrix m with its transpose.\r\n    const a = m[0] * transpose[0] + m[1] * transpose[2];\r\n    const b = m[0] * transpose[1] + m[1] * transpose[3];\r\n    const c = m[2] * transpose[0] + m[3] * transpose[2];\r\n    const d = m[2] * transpose[1] + m[3] * transpose[3];\r\n\r\n    // Solve the second degree polynomial to get roots.\r\n    const first = (a + d) / 2;\r\n    const second = Math.sqrt((a + d) * (a + d) - 4 * (a * d - c * b)) / 2;\r\n    const sx = first + second || 1;\r\n    const sy = first - second || 1;\r\n\r\n    // Scale values are the square roots of the eigenvalues.\r\n    return [Math.sqrt(sx), Math.sqrt(sy)];\r\n  }\r\n\r\n  // Normalize rectangle rect=[x1, y1, x2, y2] so that (x1,y1) < (x2,y2)\r\n  // For coordinate systems whose origin lies in the bottom-left, this\r\n  // means normalization to (BL,TR) ordering. For systems with origin in the\r\n  // top-left, this means (TL,BR) ordering.\r\n  static normalizeRect(rect) {\r\n    const r = rect.slice(0); // clone rect\r\n    if (rect[0] > rect[2]) {\r\n      r[0] = rect[2];\r\n      r[2] = rect[0];\r\n    }\r\n    if (rect[1] > rect[3]) {\r\n      r[1] = rect[3];\r\n      r[3] = rect[1];\r\n    }\r\n    return r;\r\n  }\r\n\r\n  // Returns a rectangle [x1, y1, x2, y2] corresponding to the\r\n  // intersection of rect1 and rect2. If no intersection, returns 'false'\r\n  // The rectangle coordinates of rect1, rect2 should be [x1, y1, x2, y2]\r\n  static intersect(rect1, rect2) {\r\n    function compare(a, b) {\r\n      return a - b;\r\n    }\r\n\r\n    // Order points along the axes\r\n    const orderedX = [rect1[0], rect1[2], rect2[0], rect2[2]].sort(compare);\r\n    const orderedY = [rect1[1], rect1[3], rect2[1], rect2[3]].sort(compare);\r\n    const result = [];\r\n\r\n    rect1 = Util.normalizeRect(rect1);\r\n    rect2 = Util.normalizeRect(rect2);\r\n\r\n    // X: first and second points belong to different rectangles?\r\n    if (\r\n      (orderedX[0] === rect1[0] && orderedX[1] === rect2[0]) ||\r\n      (orderedX[0] === rect2[0] && orderedX[1] === rect1[0])\r\n    ) {\r\n      // Intersection must be between second and third points\r\n      result[0] = orderedX[1];\r\n      result[2] = orderedX[2];\r\n    } else {\r\n      return null;\r\n    }\r\n\r\n    // Y: first and second points belong to different rectangles?\r\n    if (\r\n      (orderedY[0] === rect1[1] && orderedY[1] === rect2[1]) ||\r\n      (orderedY[0] === rect2[1] && orderedY[1] === rect1[1])\r\n    ) {\r\n      // Intersection must be between second and third points\r\n      result[1] = orderedY[1];\r\n      result[3] = orderedY[2];\r\n    } else {\r\n      return null;\r\n    }\r\n\r\n    return result;\r\n  }\r\n}\r\n\r\n// prettier-ignore\r\nconst PDFStringTranslateTable = [\r\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n  0x2D8, 0x2C7, 0x2C6, 0x2D9, 0x2DD, 0x2DB, 0x2DA, 0x2DC, 0, 0, 0, 0, 0, 0, 0,\r\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2022, 0x2020, 0x2021, 0x2026, 0x2014,\r\n  0x2013, 0x192, 0x2044, 0x2039, 0x203A, 0x2212, 0x2030, 0x201E, 0x201C,\r\n  0x201D, 0x2018, 0x2019, 0x201A, 0x2122, 0xFB01, 0xFB02, 0x141, 0x152, 0x160,\r\n  0x178, 0x17D, 0x131, 0x142, 0x153, 0x161, 0x17E, 0, 0x20AC\r\n];\r\n\r\nfunction stringToPDFString(str) {\r\n  const length = str.length,\r\n    strBuf = [];\r\n  if (str[0] === \"\\xFE\" && str[1] === \"\\xFF\") {\r\n    // UTF16BE BOM\r\n    for (let i = 2; i < length; i += 2) {\r\n      strBuf.push(\r\n        String.fromCharCode((str.charCodeAt(i) << 8) | str.charCodeAt(i + 1))\r\n      );\r\n    }\r\n  } else if (str[0] === \"\\xFF\" && str[1] === \"\\xFE\") {\r\n    // UTF16LE BOM\r\n    for (let i = 2; i < length; i += 2) {\r\n      strBuf.push(\r\n        String.fromCharCode((str.charCodeAt(i + 1) << 8) | str.charCodeAt(i))\r\n      );\r\n    }\r\n  } else {\r\n    for (let i = 0; i < length; ++i) {\r\n      const code = PDFStringTranslateTable[str.charCodeAt(i)];\r\n      strBuf.push(code ? String.fromCharCode(code) : str.charAt(i));\r\n    }\r\n  }\r\n  return strBuf.join(\"\");\r\n}\r\n\r\nfunction escapeString(str) {\r\n  // replace \"(\", \")\" and \"\\\" by \"\\(\", \"\\)\" and \"\\\\\"\r\n  // in order to write it in a PDF file.\r\n  return str.replace(/([\\(\\)\\\\])/g, \"\\\\$1\");\r\n}\r\n\r\nfunction stringToUTF8String(str) {\r\n  return decodeURIComponent(escape(str));\r\n}\r\n\r\nfunction utf8StringToString(str) {\r\n  return unescape(encodeURIComponent(str));\r\n}\r\n\r\nfunction isBool(v) {\r\n  return typeof v === \"boolean\";\r\n}\r\n\r\nfunction isNum(v) {\r\n  return typeof v === \"number\";\r\n}\r\n\r\nfunction isString(v) {\r\n  return typeof v === \"string\";\r\n}\r\n\r\nfunction isArrayBuffer(v) {\r\n  return typeof v === \"object\" && v !== null && v.byteLength !== undefined;\r\n}\r\n\r\nfunction isArrayEqual(arr1, arr2) {\r\n  if (arr1.length !== arr2.length) {\r\n    return false;\r\n  }\r\n  return arr1.every(function (element, index) {\r\n    return element === arr2[index];\r\n  });\r\n}\r\n\r\nfunction getModificationDate(date = new Date(Date.now())) {\r\n  const buffer = [\r\n    date.getUTCFullYear().toString(),\r\n    (date.getUTCMonth() + 1).toString().padStart(2, \"0\"),\r\n    (date.getUTCDate() + 1).toString().padStart(2, \"0\"),\r\n    date.getUTCHours().toString().padStart(2, \"0\"),\r\n    date.getUTCMinutes().toString().padStart(2, \"0\"),\r\n    date.getUTCSeconds().toString().padStart(2, \"0\"),\r\n  ];\r\n\r\n  return buffer.join(\"\");\r\n}\r\n\r\n/**\r\n * Promise Capability object.\r\n *\r\n * @typedef {Object} PromiseCapability\r\n * @property {Promise<any>} promise - A Promise object.\r\n * @property {boolean} settled - If the Promise has been fulfilled/rejected.\r\n * @property {function} resolve - Fulfills the Promise.\r\n * @property {function} reject - Rejects the Promise.\r\n */\r\n\r\n/**\r\n * Creates a promise capability object.\r\n * @alias createPromiseCapability\r\n *\r\n * @returns {PromiseCapability}\r\n */\r\nfunction createPromiseCapability() {\r\n  const capability = Object.create(null);\r\n  let isSettled = false;\r\n\r\n  Object.defineProperty(capability, \"settled\", {\r\n    get() {\r\n      return isSettled;\r\n    },\r\n  });\r\n  capability.promise = new Promise(function (resolve, reject) {\r\n    capability.resolve = function (data) {\r\n      isSettled = true;\r\n      resolve(data);\r\n    };\r\n    capability.reject = function (reason) {\r\n      isSettled = true;\r\n      reject(reason);\r\n    };\r\n  });\r\n  return capability;\r\n}\r\n\r\nconst createObjectURL = (function createObjectURLClosure() {\r\n  // Blob/createObjectURL is not available, falling back to data schema.\r\n  const digits =\r\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\r\n\r\n  // eslint-disable-next-line no-shadow\r\n  return function createObjectURL(data, contentType, forceDataSchema = false) {\r\n    if (!forceDataSchema && URL.createObjectURL) {\r\n      const blob = new Blob([data], { type: contentType });\r\n      return URL.createObjectURL(blob);\r\n    }\r\n\r\n    let buffer = `data:${contentType};base64,`;\r\n    for (let i = 0, ii = data.length; i < ii; i += 3) {\r\n      const b1 = data[i] & 0xff;\r\n      const b2 = data[i + 1] & 0xff;\r\n      const b3 = data[i + 2] & 0xff;\r\n      const d1 = b1 >> 2,\r\n        d2 = ((b1 & 3) << 4) | (b2 >> 4);\r\n      const d3 = i + 1 < ii ? ((b2 & 0xf) << 2) | (b3 >> 6) : 64;\r\n      const d4 = i + 2 < ii ? b3 & 0x3f : 64;\r\n      buffer += digits[d1] + digits[d2] + digits[d3] + digits[d4];\r\n    }\r\n    return buffer;\r\n  };\r\n})();\r\n\r\nexport {\r\n  BaseException,\r\n  FONT_IDENTITY_MATRIX,\r\n  IDENTITY_MATRIX,\r\n  OPS,\r\n  VerbosityLevel,\r\n  UNSUPPORTED_FEATURES,\r\n  AnnotationBorderStyleType,\r\n  AnnotationFieldFlag,\r\n  AnnotationFlag,\r\n  AnnotationMarkedState,\r\n  AnnotationReplyType,\r\n  AnnotationReviewState,\r\n  AnnotationStateModelType,\r\n  AnnotationType,\r\n  FontType,\r\n  ImageKind,\r\n  CMapCompressionType,\r\n  AbortException,\r\n  InvalidPDFException,\r\n  MissingPDFException,\r\n  PasswordException,\r\n  PasswordResponses,\r\n  PermissionFlag,\r\n  StreamType,\r\n  TextRenderingMode,\r\n  UnexpectedResponseException,\r\n  UnknownErrorException,\r\n  Util,\r\n  FormatError,\r\n  arrayByteLength,\r\n  arraysToBytes,\r\n  assert,\r\n  bytesToString,\r\n  createPromiseCapability,\r\n  createObjectURL,\r\n  escapeString,\r\n  getModificationDate,\r\n  getVerbosityLevel,\r\n  info,\r\n  isArrayBuffer,\r\n  isArrayEqual,\r\n  isBool,\r\n  isNum,\r\n  isString,\r\n  isSameOrigin,\r\n  createValidAbsoluteUrl,\r\n  IsLittleEndianCached,\r\n  IsEvalSupportedCached,\r\n  removeNullCharacters,\r\n  setVerbosityLevel,\r\n  shadow,\r\n  string32,\r\n  stringToBytes,\r\n  stringToPDFString,\r\n  stringToUTF8String,\r\n  utf8StringToString,\r\n  warn,\r\n  unreachable,\r\n};\r\n","/* Copyright 2019 Mozilla Foundation\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/* eslint no-var: error */\r\n\r\nimport { assert, BaseException, warn } from \"./util.js\";\r\n\r\nfunction getLookupTableFactory(initializer) {\r\n  let lookup;\r\n  return function () {\r\n    if (initializer) {\r\n      lookup = Object.create(null);\r\n      initializer(lookup);\r\n      initializer = null;\r\n    }\r\n    return lookup;\r\n  };\r\n}\r\n\r\nclass MissingDataException extends BaseException {\r\n  constructor(begin, end) {\r\n    super(`Missing data [${begin}, ${end})`);\r\n    this.begin = begin;\r\n    this.end = end;\r\n  }\r\n}\r\n\r\nclass XRefEntryException extends BaseException {}\r\n\r\nclass XRefParseException extends BaseException {}\r\n\r\n/**\r\n * Get the value of an inheritable property.\r\n *\r\n * If the PDF specification explicitly lists a property in a dictionary as\r\n * inheritable, then the value of the property may be present in the dictionary\r\n * itself or in one or more parents of the dictionary.\r\n *\r\n * If the key is not found in the tree, `undefined` is returned. Otherwise,\r\n * the value for the key is returned or, if `stopWhenFound` is `false`, a list\r\n * of values is returned. To avoid infinite loops, the traversal is stopped when\r\n * the loop limit is reached.\r\n *\r\n * @param {Dict} dict - Dictionary from where to start the traversal.\r\n * @param {string} key - The key of the property to find the value for.\r\n * @param {boolean} getArray - Whether or not the value should be fetched as an\r\n *   array. The default value is `false`.\r\n * @param {boolean} stopWhenFound - Whether or not to stop the traversal when\r\n *   the key is found. If set to `false`, we always walk up the entire parent\r\n *   chain, for example to be able to find `\\Resources` placed on multiple\r\n *   levels of the tree. The default value is `true`.\r\n */\r\nfunction getInheritableProperty({\r\n  dict,\r\n  key,\r\n  getArray = false,\r\n  stopWhenFound = true,\r\n}) {\r\n  const LOOP_LIMIT = 100;\r\n  let loopCount = 0;\r\n  let values;\r\n\r\n  while (dict) {\r\n    const value = getArray ? dict.getArray(key) : dict.get(key);\r\n    if (value !== undefined) {\r\n      if (stopWhenFound) {\r\n        return value;\r\n      }\r\n      if (!values) {\r\n        values = [];\r\n      }\r\n      values.push(value);\r\n    }\r\n    if (++loopCount > LOOP_LIMIT) {\r\n      warn(`getInheritableProperty: maximum loop count exceeded for \"${key}\"`);\r\n      break;\r\n    }\r\n    dict = dict.get(\"Parent\");\r\n  }\r\n  return values;\r\n}\r\n\r\n// prettier-ignore\r\nconst ROMAN_NUMBER_MAP = [\r\n  \"\", \"C\", \"CC\", \"CCC\", \"CD\", \"D\", \"DC\", \"DCC\", \"DCCC\", \"CM\",\r\n  \"\", \"X\", \"XX\", \"XXX\", \"XL\", \"L\", \"LX\", \"LXX\", \"LXXX\", \"XC\",\r\n  \"\", \"I\", \"II\", \"III\", \"IV\", \"V\", \"VI\", \"VII\", \"VIII\", \"IX\"\r\n];\r\n\r\n/**\r\n * Converts positive integers to (upper case) Roman numerals.\r\n * @param {number} number - The number that should be converted.\r\n * @param {boolean} lowerCase - Indicates if the result should be converted\r\n *   to lower case letters. The default value is `false`.\r\n * @returns {string} The resulting Roman number.\r\n */\r\nfunction toRomanNumerals(number, lowerCase = false) {\r\n  assert(\r\n    Number.isInteger(number) && number > 0,\r\n    \"The number should be a positive integer.\"\r\n  );\r\n  const romanBuf = [];\r\n  let pos;\r\n  // Thousands\r\n  while (number >= 1000) {\r\n    number -= 1000;\r\n    romanBuf.push(\"M\");\r\n  }\r\n  // Hundreds\r\n  pos = (number / 100) | 0;\r\n  number %= 100;\r\n  romanBuf.push(ROMAN_NUMBER_MAP[pos]);\r\n  // Tens\r\n  pos = (number / 10) | 0;\r\n  number %= 10;\r\n  romanBuf.push(ROMAN_NUMBER_MAP[10 + pos]);\r\n  // Ones\r\n  romanBuf.push(ROMAN_NUMBER_MAP[20 + number]);\r\n\r\n  const romanStr = romanBuf.join(\"\");\r\n  return lowerCase ? romanStr.toLowerCase() : romanStr;\r\n}\r\n\r\n// Calculate the base 2 logarithm of the number `x`. This differs from the\r\n// native function in the sense that it returns the ceiling value and that it\r\n// returns 0 instead of `Infinity`/`NaN` for `x` values smaller than/equal to 0.\r\nfunction log2(x) {\r\n  if (x <= 0) {\r\n    return 0;\r\n  }\r\n  return Math.ceil(Math.log2(x));\r\n}\r\n\r\nfunction readInt8(data, offset) {\r\n  return (data[offset] << 24) >> 24;\r\n}\r\n\r\nfunction readUint16(data, offset) {\r\n  return (data[offset] << 8) | data[offset + 1];\r\n}\r\n\r\nfunction readUint32(data, offset) {\r\n  return (\r\n    ((data[offset] << 24) |\r\n      (data[offset + 1] << 16) |\r\n      (data[offset + 2] << 8) |\r\n      data[offset + 3]) >>>\r\n    0\r\n  );\r\n}\r\n\r\n// Checks if ch is one of the following characters: SPACE, TAB, CR or LF.\r\nfunction isWhiteSpace(ch) {\r\n  return ch === 0x20 || ch === 0x09 || ch === 0x0d || ch === 0x0a;\r\n}\r\n\r\nexport {\r\n  getLookupTableFactory,\r\n  MissingDataException,\r\n  XRefEntryException,\r\n  XRefParseException,\r\n  getInheritableProperty,\r\n  toRomanNumerals,\r\n  log2,\r\n  readInt8,\r\n  readUint16,\r\n  readUint32,\r\n  isWhiteSpace,\r\n};\r\n","/* Copyright 2012 Mozilla Foundation\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/* eslint no-var: error */\r\n\r\n// Table C-2\r\nconst QeTable = [\r\n  { qe: 0x5601, nmps: 1, nlps: 1, switchFlag: 1 },\r\n  { qe: 0x3401, nmps: 2, nlps: 6, switchFlag: 0 },\r\n  { qe: 0x1801, nmps: 3, nlps: 9, switchFlag: 0 },\r\n  { qe: 0x0ac1, nmps: 4, nlps: 12, switchFlag: 0 },\r\n  { qe: 0x0521, nmps: 5, nlps: 29, switchFlag: 0 },\r\n  { qe: 0x0221, nmps: 38, nlps: 33, switchFlag: 0 },\r\n  { qe: 0x5601, nmps: 7, nlps: 6, switchFlag: 1 },\r\n  { qe: 0x5401, nmps: 8, nlps: 14, switchFlag: 0 },\r\n  { qe: 0x4801, nmps: 9, nlps: 14, switchFlag: 0 },\r\n  { qe: 0x3801, nmps: 10, nlps: 14, switchFlag: 0 },\r\n  { qe: 0x3001, nmps: 11, nlps: 17, switchFlag: 0 },\r\n  { qe: 0x2401, nmps: 12, nlps: 18, switchFlag: 0 },\r\n  { qe: 0x1c01, nmps: 13, nlps: 20, switchFlag: 0 },\r\n  { qe: 0x1601, nmps: 29, nlps: 21, switchFlag: 0 },\r\n  { qe: 0x5601, nmps: 15, nlps: 14, switchFlag: 1 },\r\n  { qe: 0x5401, nmps: 16, nlps: 14, switchFlag: 0 },\r\n  { qe: 0x5101, nmps: 17, nlps: 15, switchFlag: 0 },\r\n  { qe: 0x4801, nmps: 18, nlps: 16, switchFlag: 0 },\r\n  { qe: 0x3801, nmps: 19, nlps: 17, switchFlag: 0 },\r\n  { qe: 0x3401, nmps: 20, nlps: 18, switchFlag: 0 },\r\n  { qe: 0x3001, nmps: 21, nlps: 19, switchFlag: 0 },\r\n  { qe: 0x2801, nmps: 22, nlps: 19, switchFlag: 0 },\r\n  { qe: 0x2401, nmps: 23, nlps: 20, switchFlag: 0 },\r\n  { qe: 0x2201, nmps: 24, nlps: 21, switchFlag: 0 },\r\n  { qe: 0x1c01, nmps: 25, nlps: 22, switchFlag: 0 },\r\n  { qe: 0x1801, nmps: 26, nlps: 23, switchFlag: 0 },\r\n  { qe: 0x1601, nmps: 27, nlps: 24, switchFlag: 0 },\r\n  { qe: 0x1401, nmps: 28, nlps: 25, switchFlag: 0 },\r\n  { qe: 0x1201, nmps: 29, nlps: 26, switchFlag: 0 },\r\n  { qe: 0x1101, nmps: 30, nlps: 27, switchFlag: 0 },\r\n  { qe: 0x0ac1, nmps: 31, nlps: 28, switchFlag: 0 },\r\n  { qe: 0x09c1, nmps: 32, nlps: 29, switchFlag: 0 },\r\n  { qe: 0x08a1, nmps: 33, nlps: 30, switchFlag: 0 },\r\n  { qe: 0x0521, nmps: 34, nlps: 31, switchFlag: 0 },\r\n  { qe: 0x0441, nmps: 35, nlps: 32, switchFlag: 0 },\r\n  { qe: 0x02a1, nmps: 36, nlps: 33, switchFlag: 0 },\r\n  { qe: 0x0221, nmps: 37, nlps: 34, switchFlag: 0 },\r\n  { qe: 0x0141, nmps: 38, nlps: 35, switchFlag: 0 },\r\n  { qe: 0x0111, nmps: 39, nlps: 36, switchFlag: 0 },\r\n  { qe: 0x0085, nmps: 40, nlps: 37, switchFlag: 0 },\r\n  { qe: 0x0049, nmps: 41, nlps: 38, switchFlag: 0 },\r\n  { qe: 0x0025, nmps: 42, nlps: 39, switchFlag: 0 },\r\n  { qe: 0x0015, nmps: 43, nlps: 40, switchFlag: 0 },\r\n  { qe: 0x0009, nmps: 44, nlps: 41, switchFlag: 0 },\r\n  { qe: 0x0005, nmps: 45, nlps: 42, switchFlag: 0 },\r\n  { qe: 0x0001, nmps: 45, nlps: 43, switchFlag: 0 },\r\n  { qe: 0x5601, nmps: 46, nlps: 46, switchFlag: 0 },\r\n];\r\n\r\n/**\r\n * This class implements the QM Coder decoding as defined in\r\n *   JPEG 2000 Part I Final Committee Draft Version 1.0\r\n *   Annex C.3 Arithmetic decoding procedure\r\n * available at http://www.jpeg.org/public/fcd15444-1.pdf\r\n *\r\n * The arithmetic decoder is used in conjunction with context models to decode\r\n * JPEG2000 and JBIG2 streams.\r\n */\r\nclass ArithmeticDecoder {\r\n  // C.3.5 Initialisation of the decoder (INITDEC)\r\n  constructor(data, start, end) {\r\n    this.data = data;\r\n    this.bp = start;\r\n    this.dataEnd = end;\r\n\r\n    this.chigh = data[start];\r\n    this.clow = 0;\r\n\r\n    this.byteIn();\r\n\r\n    this.chigh = ((this.chigh << 7) & 0xffff) | ((this.clow >> 9) & 0x7f);\r\n    this.clow = (this.clow << 7) & 0xffff;\r\n    this.ct -= 7;\r\n    this.a = 0x8000;\r\n  }\r\n\r\n  // C.3.4 Compressed data input (BYTEIN)\r\n  byteIn() {\r\n    const data = this.data;\r\n    let bp = this.bp;\r\n\r\n    if (data[bp] === 0xff) {\r\n      if (data[bp + 1] > 0x8f) {\r\n        this.clow += 0xff00;\r\n        this.ct = 8;\r\n      } else {\r\n        bp++;\r\n        this.clow += data[bp] << 9;\r\n        this.ct = 7;\r\n        this.bp = bp;\r\n      }\r\n    } else {\r\n      bp++;\r\n      this.clow += bp < this.dataEnd ? data[bp] << 8 : 0xff00;\r\n      this.ct = 8;\r\n      this.bp = bp;\r\n    }\r\n    if (this.clow > 0xffff) {\r\n      this.chigh += this.clow >> 16;\r\n      this.clow &= 0xffff;\r\n    }\r\n  }\r\n\r\n  // C.3.2 Decoding a decision (DECODE)\r\n  readBit(contexts, pos) {\r\n    // Contexts are packed into 1 byte:\r\n    // highest 7 bits carry cx.index, lowest bit carries cx.mps\r\n    let cx_index = contexts[pos] >> 1,\r\n      cx_mps = contexts[pos] & 1;\r\n    const qeTableIcx = QeTable[cx_index];\r\n    const qeIcx = qeTableIcx.qe;\r\n    let d;\r\n    let a = this.a - qeIcx;\r\n\r\n    if (this.chigh < qeIcx) {\r\n      // exchangeLps\r\n      if (a < qeIcx) {\r\n        a = qeIcx;\r\n        d = cx_mps;\r\n        cx_index = qeTableIcx.nmps;\r\n      } else {\r\n        a = qeIcx;\r\n        d = 1 ^ cx_mps;\r\n        if (qeTableIcx.switchFlag === 1) {\r\n          cx_mps = d;\r\n        }\r\n        cx_index = qeTableIcx.nlps;\r\n      }\r\n    } else {\r\n      this.chigh -= qeIcx;\r\n      if ((a & 0x8000) !== 0) {\r\n        this.a = a;\r\n        return cx_mps;\r\n      }\r\n      // exchangeMps\r\n      if (a < qeIcx) {\r\n        d = 1 ^ cx_mps;\r\n        if (qeTableIcx.switchFlag === 1) {\r\n          cx_mps = d;\r\n        }\r\n        cx_index = qeTableIcx.nlps;\r\n      } else {\r\n        d = cx_mps;\r\n        cx_index = qeTableIcx.nmps;\r\n      }\r\n    }\r\n    // C.3.3 renormD;\r\n    do {\r\n      if (this.ct === 0) {\r\n        this.byteIn();\r\n      }\r\n\r\n      a <<= 1;\r\n      this.chigh = ((this.chigh << 1) & 0xffff) | ((this.clow >> 15) & 1);\r\n      this.clow = (this.clow << 1) & 0xffff;\r\n      this.ct--;\r\n    } while ((a & 0x8000) === 0);\r\n    this.a = a;\r\n\r\n    contexts[pos] = (cx_index << 1) | cx_mps;\r\n    return d;\r\n  }\r\n}\r\n\r\nexport { ArithmeticDecoder };\r\n","/* Copyright 2012 Mozilla Foundation\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/* Copyright 1996-2003 Glyph & Cog, LLC\r\n *\r\n * The CCITT stream implementation contained in this file is a JavaScript port\r\n * of XPDF's implementation, made available under the Apache 2.0 open source\r\n * license.\r\n */\r\n\r\n/**\r\n * @typedef {Object} CCITTFaxDecoderSource\r\n * @property {function} next - Method that return one byte of data for decoding,\r\n *   or -1 when EOF is reached.\r\n */\r\n\r\nimport { info } from \"./util.js\";\r\n\r\nconst CCITTFaxDecoder = (function CCITTFaxDecoder() {\r\n  const ccittEOL = -2;\r\n  const ccittEOF = -1;\r\n  const twoDimPass = 0;\r\n  const twoDimHoriz = 1;\r\n  const twoDimVert0 = 2;\r\n  const twoDimVertR1 = 3;\r\n  const twoDimVertL1 = 4;\r\n  const twoDimVertR2 = 5;\r\n  const twoDimVertL2 = 6;\r\n  const twoDimVertR3 = 7;\r\n  const twoDimVertL3 = 8;\r\n\r\n  // prettier-ignore\r\n  const twoDimTable = [\r\n    [-1, -1], [-1, -1],                   // 000000x\r\n    [7, twoDimVertL3],                    // 0000010\r\n    [7, twoDimVertR3],                    // 0000011\r\n    [6, twoDimVertL2], [6, twoDimVertL2], // 000010x\r\n    [6, twoDimVertR2], [6, twoDimVertR2], // 000011x\r\n    [4, twoDimPass], [4, twoDimPass],     // 0001xxx\r\n    [4, twoDimPass], [4, twoDimPass],\r\n    [4, twoDimPass], [4, twoDimPass],\r\n    [4, twoDimPass], [4, twoDimPass],\r\n    [3, twoDimHoriz], [3, twoDimHoriz],   // 001xxxx\r\n    [3, twoDimHoriz], [3, twoDimHoriz],\r\n    [3, twoDimHoriz], [3, twoDimHoriz],\r\n    [3, twoDimHoriz], [3, twoDimHoriz],\r\n    [3, twoDimHoriz], [3, twoDimHoriz],\r\n    [3, twoDimHoriz], [3, twoDimHoriz],\r\n    [3, twoDimHoriz], [3, twoDimHoriz],\r\n    [3, twoDimHoriz], [3, twoDimHoriz],\r\n    [3, twoDimVertL1], [3, twoDimVertL1], // 010xxxx\r\n    [3, twoDimVertL1], [3, twoDimVertL1],\r\n    [3, twoDimVertL1], [3, twoDimVertL1],\r\n    [3, twoDimVertL1], [3, twoDimVertL1],\r\n    [3, twoDimVertL1], [3, twoDimVertL1],\r\n    [3, twoDimVertL1], [3, twoDimVertL1],\r\n    [3, twoDimVertL1], [3, twoDimVertL1],\r\n    [3, twoDimVertL1], [3, twoDimVertL1],\r\n    [3, twoDimVertR1], [3, twoDimVertR1], // 011xxxx\r\n    [3, twoDimVertR1], [3, twoDimVertR1],\r\n    [3, twoDimVertR1], [3, twoDimVertR1],\r\n    [3, twoDimVertR1], [3, twoDimVertR1],\r\n    [3, twoDimVertR1], [3, twoDimVertR1],\r\n    [3, twoDimVertR1], [3, twoDimVertR1],\r\n    [3, twoDimVertR1], [3, twoDimVertR1],\r\n    [3, twoDimVertR1], [3, twoDimVertR1],\r\n    [1, twoDimVert0], [1, twoDimVert0],   // 1xxxxxx\r\n    [1, twoDimVert0], [1, twoDimVert0],\r\n    [1, twoDimVert0], [1, twoDimVert0],\r\n    [1, twoDimVert0], [1, twoDimVert0],\r\n    [1, twoDimVert0], [1, twoDimVert0],\r\n    [1, twoDimVert0], [1, twoDimVert0],\r\n    [1, twoDimVert0], [1, twoDimVert0],\r\n    [1, twoDimVert0], [1, twoDimVert0],\r\n    [1, twoDimVert0], [1, twoDimVert0],\r\n    [1, twoDimVert0], [1, twoDimVert0],\r\n    [1, twoDimVert0], [1, twoDimVert0],\r\n    [1, twoDimVert0], [1, twoDimVert0],\r\n    [1, twoDimVert0], [1, twoDimVert0],\r\n    [1, twoDimVert0], [1, twoDimVert0],\r\n    [1, twoDimVert0], [1, twoDimVert0],\r\n    [1, twoDimVert0], [1, twoDimVert0],\r\n    [1, twoDimVert0], [1, twoDimVert0],\r\n    [1, twoDimVert0], [1, twoDimVert0],\r\n    [1, twoDimVert0], [1, twoDimVert0],\r\n    [1, twoDimVert0], [1, twoDimVert0],\r\n    [1, twoDimVert0], [1, twoDimVert0],\r\n    [1, twoDimVert0], [1, twoDimVert0],\r\n    [1, twoDimVert0], [1, twoDimVert0],\r\n    [1, twoDimVert0], [1, twoDimVert0],\r\n    [1, twoDimVert0], [1, twoDimVert0],\r\n    [1, twoDimVert0], [1, twoDimVert0],\r\n    [1, twoDimVert0], [1, twoDimVert0],\r\n    [1, twoDimVert0], [1, twoDimVert0],\r\n    [1, twoDimVert0], [1, twoDimVert0],\r\n    [1, twoDimVert0], [1, twoDimVert0],\r\n    [1, twoDimVert0], [1, twoDimVert0],\r\n    [1, twoDimVert0], [1, twoDimVert0]\r\n  ];\r\n\r\n  // prettier-ignore\r\n  const whiteTable1 = [\r\n    [-1, -1],                               // 00000\r\n    [12, ccittEOL],                         // 00001\r\n    [-1, -1], [-1, -1],                     // 0001x\r\n    [-1, -1], [-1, -1], [-1, -1], [-1, -1], // 001xx\r\n    [-1, -1], [-1, -1], [-1, -1], [-1, -1], // 010xx\r\n    [-1, -1], [-1, -1], [-1, -1], [-1, -1], // 011xx\r\n    [11, 1792], [11, 1792],                 // 1000x\r\n    [12, 1984],                             // 10010\r\n    [12, 2048],                             // 10011\r\n    [12, 2112],                             // 10100\r\n    [12, 2176],                             // 10101\r\n    [12, 2240],                             // 10110\r\n    [12, 2304],                             // 10111\r\n    [11, 1856], [11, 1856],                 // 1100x\r\n    [11, 1920], [11, 1920],                 // 1101x\r\n    [12, 2368],                             // 11100\r\n    [12, 2432],                             // 11101\r\n    [12, 2496],                             // 11110\r\n    [12, 2560]                              // 11111\r\n  ];\r\n\r\n  // prettier-ignore\r\n  const whiteTable2 = [\r\n    [-1, -1], [-1, -1], [-1, -1], [-1, -1],     // 0000000xx\r\n    [8, 29], [8, 29],                           // 00000010x\r\n    [8, 30], [8, 30],                           // 00000011x\r\n    [8, 45], [8, 45],                           // 00000100x\r\n    [8, 46], [8, 46],                           // 00000101x\r\n    [7, 22], [7, 22], [7, 22], [7, 22],         // 0000011xx\r\n    [7, 23], [7, 23], [7, 23], [7, 23],         // 0000100xx\r\n    [8, 47], [8, 47],                           // 00001010x\r\n    [8, 48], [8, 48],                           // 00001011x\r\n    [6, 13], [6, 13], [6, 13], [6, 13],         // 000011xxx\r\n    [6, 13], [6, 13], [6, 13], [6, 13],\r\n    [7, 20], [7, 20], [7, 20], [7, 20],         // 0001000xx\r\n    [8, 33], [8, 33],                           // 00010010x\r\n    [8, 34], [8, 34],                           // 00010011x\r\n    [8, 35], [8, 35],                           // 00010100x\r\n    [8, 36], [8, 36],                           // 00010101x\r\n    [8, 37], [8, 37],                           // 00010110x\r\n    [8, 38], [8, 38],                           // 00010111x\r\n    [7, 19], [7, 19], [7, 19], [7, 19],         // 0001100xx\r\n    [8, 31], [8, 31],                           // 00011010x\r\n    [8, 32], [8, 32],                           // 00011011x\r\n    [6, 1], [6, 1], [6, 1], [6, 1],             // 000111xxx\r\n    [6, 1], [6, 1], [6, 1], [6, 1],\r\n    [6, 12], [6, 12], [6, 12], [6, 12],         // 001000xxx\r\n    [6, 12], [6, 12], [6, 12], [6, 12],\r\n    [8, 53], [8, 53],                           // 00100100x\r\n    [8, 54], [8, 54],                           // 00100101x\r\n    [7, 26], [7, 26], [7, 26], [7, 26],         // 0010011xx\r\n    [8, 39], [8, 39],                           // 00101000x\r\n    [8, 40], [8, 40],                           // 00101001x\r\n    [8, 41], [8, 41],                           // 00101010x\r\n    [8, 42], [8, 42],                           // 00101011x\r\n    [8, 43], [8, 43],                           // 00101100x\r\n    [8, 44], [8, 44],                           // 00101101x\r\n    [7, 21], [7, 21], [7, 21], [7, 21],         // 0010111xx\r\n    [7, 28], [7, 28], [7, 28], [7, 28],         // 0011000xx\r\n    [8, 61], [8, 61],                           // 00110010x\r\n    [8, 62], [8, 62],                           // 00110011x\r\n    [8, 63], [8, 63],                           // 00110100x\r\n    [8, 0], [8, 0],                             // 00110101x\r\n    [8, 320], [8, 320],                         // 00110110x\r\n    [8, 384], [8, 384],                         // 00110111x\r\n    [5, 10], [5, 10], [5, 10], [5, 10],         // 00111xxxx\r\n    [5, 10], [5, 10], [5, 10], [5, 10],\r\n    [5, 10], [5, 10], [5, 10], [5, 10],\r\n    [5, 10], [5, 10], [5, 10], [5, 10],\r\n    [5, 11], [5, 11], [5, 11], [5, 11],         // 01000xxxx\r\n    [5, 11], [5, 11], [5, 11], [5, 11],\r\n    [5, 11], [5, 11], [5, 11], [5, 11],\r\n    [5, 11], [5, 11], [5, 11], [5, 11],\r\n    [7, 27], [7, 27], [7, 27], [7, 27],         // 0100100xx\r\n    [8, 59], [8, 59],                           // 01001010x\r\n    [8, 60], [8, 60],                           // 01001011x\r\n    [9, 1472],                                  // 010011000\r\n    [9, 1536],                                  // 010011001\r\n    [9, 1600],                                  // 010011010\r\n    [9, 1728],                                  // 010011011\r\n    [7, 18], [7, 18], [7, 18], [7, 18],         // 0100111xx\r\n    [7, 24], [7, 24], [7, 24], [7, 24],         // 0101000xx\r\n    [8, 49], [8, 49],                           // 01010010x\r\n    [8, 50], [8, 50],                           // 01010011x\r\n    [8, 51], [8, 51],                           // 01010100x\r\n    [8, 52], [8, 52],                           // 01010101x\r\n    [7, 25], [7, 25], [7, 25], [7, 25],         // 0101011xx\r\n    [8, 55], [8, 55],                           // 01011000x\r\n    [8, 56], [8, 56],                           // 01011001x\r\n    [8, 57], [8, 57],                           // 01011010x\r\n    [8, 58], [8, 58],                           // 01011011x\r\n    [6, 192], [6, 192], [6, 192], [6, 192],     // 010111xxx\r\n    [6, 192], [6, 192], [6, 192], [6, 192],\r\n    [6, 1664], [6, 1664], [6, 1664], [6, 1664], // 011000xxx\r\n    [6, 1664], [6, 1664], [6, 1664], [6, 1664],\r\n    [8, 448], [8, 448],                         // 01100100x\r\n    [8, 512], [8, 512],                         // 01100101x\r\n    [9, 704],                                   // 011001100\r\n    [9, 768],                                   // 011001101\r\n    [8, 640], [8, 640],                         // 01100111x\r\n    [8, 576], [8, 576],                         // 01101000x\r\n    [9, 832],                                   // 011010010\r\n    [9, 896],                                   // 011010011\r\n    [9, 960],                                   // 011010100\r\n    [9, 1024],                                  // 011010101\r\n    [9, 1088],                                  // 011010110\r\n    [9, 1152],                                  // 011010111\r\n    [9, 1216],                                  // 011011000\r\n    [9, 1280],                                  // 011011001\r\n    [9, 1344],                                  // 011011010\r\n    [9, 1408],                                  // 011011011\r\n    [7, 256], [7, 256], [7, 256], [7, 256],     // 0110111xx\r\n    [4, 2], [4, 2], [4, 2], [4, 2],             // 0111xxxxx\r\n    [4, 2], [4, 2], [4, 2], [4, 2],\r\n    [4, 2], [4, 2], [4, 2], [4, 2],\r\n    [4, 2], [4, 2], [4, 2], [4, 2],\r\n    [4, 2], [4, 2], [4, 2], [4, 2],\r\n    [4, 2], [4, 2], [4, 2], [4, 2],\r\n    [4, 2], [4, 2], [4, 2], [4, 2],\r\n    [4, 2], [4, 2], [4, 2], [4, 2],\r\n    [4, 3], [4, 3], [4, 3], [4, 3],             // 1000xxxxx\r\n    [4, 3], [4, 3], [4, 3], [4, 3],\r\n    [4, 3], [4, 3], [4, 3], [4, 3],\r\n    [4, 3], [4, 3], [4, 3], [4, 3],\r\n    [4, 3], [4, 3], [4, 3], [4, 3],\r\n    [4, 3], [4, 3], [4, 3], [4, 3],\r\n    [4, 3], [4, 3], [4, 3], [4, 3],\r\n    [4, 3], [4, 3], [4, 3], [4, 3],\r\n    [5, 128], [5, 128], [5, 128], [5, 128],     // 10010xxxx\r\n    [5, 128], [5, 128], [5, 128], [5, 128],\r\n    [5, 128], [5, 128], [5, 128], [5, 128],\r\n    [5, 128], [5, 128], [5, 128], [5, 128],\r\n    [5, 8], [5, 8], [5, 8], [5, 8],             // 10011xxxx\r\n    [5, 8], [5, 8], [5, 8], [5, 8],\r\n    [5, 8], [5, 8], [5, 8], [5, 8],\r\n    [5, 8], [5, 8], [5, 8], [5, 8],\r\n    [5, 9], [5, 9], [5, 9], [5, 9],             // 10100xxxx\r\n    [5, 9], [5, 9], [5, 9], [5, 9],\r\n    [5, 9], [5, 9], [5, 9], [5, 9],\r\n    [5, 9], [5, 9], [5, 9], [5, 9],\r\n    [6, 16], [6, 16], [6, 16], [6, 16],         // 101010xxx\r\n    [6, 16], [6, 16], [6, 16], [6, 16],\r\n    [6, 17], [6, 17], [6, 17], [6, 17],         // 101011xxx\r\n    [6, 17], [6, 17], [6, 17], [6, 17],\r\n    [4, 4], [4, 4], [4, 4], [4, 4],             // 1011xxxxx\r\n    [4, 4], [4, 4], [4, 4], [4, 4],\r\n    [4, 4], [4, 4], [4, 4], [4, 4],\r\n    [4, 4], [4, 4], [4, 4], [4, 4],\r\n    [4, 4], [4, 4], [4, 4], [4, 4],\r\n    [4, 4], [4, 4], [4, 4], [4, 4],\r\n    [4, 4], [4, 4], [4, 4], [4, 4],\r\n    [4, 4], [4, 4], [4, 4], [4, 4],\r\n    [4, 5], [4, 5], [4, 5], [4, 5],             // 1100xxxxx\r\n    [4, 5], [4, 5], [4, 5], [4, 5],\r\n    [4, 5], [4, 5], [4, 5], [4, 5],\r\n    [4, 5], [4, 5], [4, 5], [4, 5],\r\n    [4, 5], [4, 5], [4, 5], [4, 5],\r\n    [4, 5], [4, 5], [4, 5], [4, 5],\r\n    [4, 5], [4, 5], [4, 5], [4, 5],\r\n    [4, 5], [4, 5], [4, 5], [4, 5],\r\n    [6, 14], [6, 14], [6, 14], [6, 14],         // 110100xxx\r\n    [6, 14], [6, 14], [6, 14], [6, 14],\r\n    [6, 15], [6, 15], [6, 15], [6, 15],         // 110101xxx\r\n    [6, 15], [6, 15], [6, 15], [6, 15],\r\n    [5, 64], [5, 64], [5, 64], [5, 64],         // 11011xxxx\r\n    [5, 64], [5, 64], [5, 64], [5, 64],\r\n    [5, 64], [5, 64], [5, 64], [5, 64],\r\n    [5, 64], [5, 64], [5, 64], [5, 64],\r\n    [4, 6], [4, 6], [4, 6], [4, 6],             // 1110xxxxx\r\n    [4, 6], [4, 6], [4, 6], [4, 6],\r\n    [4, 6], [4, 6], [4, 6], [4, 6],\r\n    [4, 6], [4, 6], [4, 6], [4, 6],\r\n    [4, 6], [4, 6], [4, 6], [4, 6],\r\n    [4, 6], [4, 6], [4, 6], [4, 6],\r\n    [4, 6], [4, 6], [4, 6], [4, 6],\r\n    [4, 6], [4, 6], [4, 6], [4, 6],\r\n    [4, 7], [4, 7], [4, 7], [4, 7],             // 1111xxxxx\r\n    [4, 7], [4, 7], [4, 7], [4, 7],\r\n    [4, 7], [4, 7], [4, 7], [4, 7],\r\n    [4, 7], [4, 7], [4, 7], [4, 7],\r\n    [4, 7], [4, 7], [4, 7], [4, 7],\r\n    [4, 7], [4, 7], [4, 7], [4, 7],\r\n    [4, 7], [4, 7], [4, 7], [4, 7],\r\n    [4, 7], [4, 7], [4, 7], [4, 7]\r\n  ];\r\n\r\n  // prettier-ignore\r\n  const blackTable1 = [\r\n    [-1, -1], [-1, -1],                             // 000000000000x\r\n    [12, ccittEOL], [12, ccittEOL],                 // 000000000001x\r\n    [-1, -1], [-1, -1], [-1, -1], [-1, -1],         // 00000000001xx\r\n    [-1, -1], [-1, -1], [-1, -1], [-1, -1],         // 00000000010xx\r\n    [-1, -1], [-1, -1], [-1, -1], [-1, -1],         // 00000000011xx\r\n    [-1, -1], [-1, -1], [-1, -1], [-1, -1],         // 00000000100xx\r\n    [-1, -1], [-1, -1], [-1, -1], [-1, -1],         // 00000000101xx\r\n    [-1, -1], [-1, -1], [-1, -1], [-1, -1],         // 00000000110xx\r\n    [-1, -1], [-1, -1], [-1, -1], [-1, -1],         // 00000000111xx\r\n    [11, 1792], [11, 1792], [11, 1792], [11, 1792], // 00000001000xx\r\n    [12, 1984], [12, 1984],                         // 000000010010x\r\n    [12, 2048], [12, 2048],                         // 000000010011x\r\n    [12, 2112], [12, 2112],                         // 000000010100x\r\n    [12, 2176], [12, 2176],                         // 000000010101x\r\n    [12, 2240], [12, 2240],                         // 000000010110x\r\n    [12, 2304], [12, 2304],                         // 000000010111x\r\n    [11, 1856], [11, 1856], [11, 1856], [11, 1856], // 00000001100xx\r\n    [11, 1920], [11, 1920], [11, 1920], [11, 1920], // 00000001101xx\r\n    [12, 2368], [12, 2368],                         // 000000011100x\r\n    [12, 2432], [12, 2432],                         // 000000011101x\r\n    [12, 2496], [12, 2496],                         // 000000011110x\r\n    [12, 2560], [12, 2560],                         // 000000011111x\r\n    [10, 18], [10, 18], [10, 18], [10, 18],         // 0000001000xxx\r\n    [10, 18], [10, 18], [10, 18], [10, 18],\r\n    [12, 52], [12, 52],                             // 000000100100x\r\n    [13, 640],                                      // 0000001001010\r\n    [13, 704],                                      // 0000001001011\r\n    [13, 768],                                      // 0000001001100\r\n    [13, 832],                                      // 0000001001101\r\n    [12, 55], [12, 55],                             // 000000100111x\r\n    [12, 56], [12, 56],                             // 000000101000x\r\n    [13, 1280],                                     // 0000001010010\r\n    [13, 1344],                                     // 0000001010011\r\n    [13, 1408],                                     // 0000001010100\r\n    [13, 1472],                                     // 0000001010101\r\n    [12, 59], [12, 59],                             // 000000101011x\r\n    [12, 60], [12, 60],                             // 000000101100x\r\n    [13, 1536],                                     // 0000001011010\r\n    [13, 1600],                                     // 0000001011011\r\n    [11, 24], [11, 24], [11, 24], [11, 24],         // 00000010111xx\r\n    [11, 25], [11, 25], [11, 25], [11, 25],         // 00000011000xx\r\n    [13, 1664],                                     // 0000001100100\r\n    [13, 1728],                                     // 0000001100101\r\n    [12, 320], [12, 320],                           // 000000110011x\r\n    [12, 384], [12, 384],                           // 000000110100x\r\n    [12, 448], [12, 448],                           // 000000110101x\r\n    [13, 512],                                      // 0000001101100\r\n    [13, 576],                                      // 0000001101101\r\n    [12, 53], [12, 53],                             // 000000110111x\r\n    [12, 54], [12, 54],                             // 000000111000x\r\n    [13, 896],                                      // 0000001110010\r\n    [13, 960],                                      // 0000001110011\r\n    [13, 1024],                                     // 0000001110100\r\n    [13, 1088],                                     // 0000001110101\r\n    [13, 1152],                                     // 0000001110110\r\n    [13, 1216],                                     // 0000001110111\r\n    [10, 64], [10, 64], [10, 64], [10, 64],         // 0000001111xxx\r\n    [10, 64], [10, 64], [10, 64], [10, 64]\r\n  ];\r\n\r\n  // prettier-ignore\r\n  const blackTable2 = [\r\n    [8, 13], [8, 13], [8, 13], [8, 13],     // 00000100xxxx\r\n    [8, 13], [8, 13], [8, 13], [8, 13],\r\n    [8, 13], [8, 13], [8, 13], [8, 13],\r\n    [8, 13], [8, 13], [8, 13], [8, 13],\r\n    [11, 23], [11, 23],                     // 00000101000x\r\n    [12, 50],                               // 000001010010\r\n    [12, 51],                               // 000001010011\r\n    [12, 44],                               // 000001010100\r\n    [12, 45],                               // 000001010101\r\n    [12, 46],                               // 000001010110\r\n    [12, 47],                               // 000001010111\r\n    [12, 57],                               // 000001011000\r\n    [12, 58],                               // 000001011001\r\n    [12, 61],                               // 000001011010\r\n    [12, 256],                              // 000001011011\r\n    [10, 16], [10, 16], [10, 16], [10, 16], // 0000010111xx\r\n    [10, 17], [10, 17], [10, 17], [10, 17], // 0000011000xx\r\n    [12, 48],                               // 000001100100\r\n    [12, 49],                               // 000001100101\r\n    [12, 62],                               // 000001100110\r\n    [12, 63],                               // 000001100111\r\n    [12, 30],                               // 000001101000\r\n    [12, 31],                               // 000001101001\r\n    [12, 32],                               // 000001101010\r\n    [12, 33],                               // 000001101011\r\n    [12, 40],                               // 000001101100\r\n    [12, 41],                               // 000001101101\r\n    [11, 22], [11, 22],                     // 00000110111x\r\n    [8, 14], [8, 14], [8, 14], [8, 14],     // 00000111xxxx\r\n    [8, 14], [8, 14], [8, 14], [8, 14],\r\n    [8, 14], [8, 14], [8, 14], [8, 14],\r\n    [8, 14], [8, 14], [8, 14], [8, 14],\r\n    [7, 10], [7, 10], [7, 10], [7, 10],     // 0000100xxxxx\r\n    [7, 10], [7, 10], [7, 10], [7, 10],\r\n    [7, 10], [7, 10], [7, 10], [7, 10],\r\n    [7, 10], [7, 10], [7, 10], [7, 10],\r\n    [7, 10], [7, 10], [7, 10], [7, 10],\r\n    [7, 10], [7, 10], [7, 10], [7, 10],\r\n    [7, 10], [7, 10], [7, 10], [7, 10],\r\n    [7, 10], [7, 10], [7, 10], [7, 10],\r\n    [7, 11], [7, 11], [7, 11], [7, 11],     // 0000101xxxxx\r\n    [7, 11], [7, 11], [7, 11], [7, 11],\r\n    [7, 11], [7, 11], [7, 11], [7, 11],\r\n    [7, 11], [7, 11], [7, 11], [7, 11],\r\n    [7, 11], [7, 11], [7, 11], [7, 11],\r\n    [7, 11], [7, 11], [7, 11], [7, 11],\r\n    [7, 11], [7, 11], [7, 11], [7, 11],\r\n    [7, 11], [7, 11], [7, 11], [7, 11],\r\n    [9, 15], [9, 15], [9, 15], [9, 15],     // 000011000xxx\r\n    [9, 15], [9, 15], [9, 15], [9, 15],\r\n    [12, 128],                              // 000011001000\r\n    [12, 192],                              // 000011001001\r\n    [12, 26],                               // 000011001010\r\n    [12, 27],                               // 000011001011\r\n    [12, 28],                               // 000011001100\r\n    [12, 29],                               // 000011001101\r\n    [11, 19], [11, 19],                     // 00001100111x\r\n    [11, 20], [11, 20],                     // 00001101000x\r\n    [12, 34],                               // 000011010010\r\n    [12, 35],                               // 000011010011\r\n    [12, 36],                               // 000011010100\r\n    [12, 37],                               // 000011010101\r\n    [12, 38],                               // 000011010110\r\n    [12, 39],                               // 000011010111\r\n    [11, 21], [11, 21],                     // 00001101100x\r\n    [12, 42],                               // 000011011010\r\n    [12, 43],                               // 000011011011\r\n    [10, 0], [10, 0], [10, 0], [10, 0],     // 0000110111xx\r\n    [7, 12], [7, 12], [7, 12], [7, 12],     // 0000111xxxxx\r\n    [7, 12], [7, 12], [7, 12], [7, 12],\r\n    [7, 12], [7, 12], [7, 12], [7, 12],\r\n    [7, 12], [7, 12], [7, 12], [7, 12],\r\n    [7, 12], [7, 12], [7, 12], [7, 12],\r\n    [7, 12], [7, 12], [7, 12], [7, 12],\r\n    [7, 12], [7, 12], [7, 12], [7, 12],\r\n    [7, 12], [7, 12], [7, 12], [7, 12]\r\n  ];\r\n\r\n  // prettier-ignore\r\n  const blackTable3 = [\r\n    [-1, -1], [-1, -1], [-1, -1], [-1, -1], // 0000xx\r\n    [6, 9],                                 // 000100\r\n    [6, 8],                                 // 000101\r\n    [5, 7], [5, 7],                         // 00011x\r\n    [4, 6], [4, 6], [4, 6], [4, 6],         // 0010xx\r\n    [4, 5], [4, 5], [4, 5], [4, 5],         // 0011xx\r\n    [3, 1], [3, 1], [3, 1], [3, 1],         // 010xxx\r\n    [3, 1], [3, 1], [3, 1], [3, 1],\r\n    [3, 4], [3, 4], [3, 4], [3, 4],         // 011xxx\r\n    [3, 4], [3, 4], [3, 4], [3, 4],\r\n    [2, 3], [2, 3], [2, 3], [2, 3],         // 10xxxx\r\n    [2, 3], [2, 3], [2, 3], [2, 3],\r\n    [2, 3], [2, 3], [2, 3], [2, 3],\r\n    [2, 3], [2, 3], [2, 3], [2, 3],\r\n    [2, 2], [2, 2], [2, 2], [2, 2],         // 11xxxx\r\n    [2, 2], [2, 2], [2, 2], [2, 2],\r\n    [2, 2], [2, 2], [2, 2], [2, 2],\r\n    [2, 2], [2, 2], [2, 2], [2, 2]\r\n  ];\r\n\r\n  /**\r\n   * @param {CCITTFaxDecoderSource} source - The data which should be decoded.\r\n   * @param {Object} [options] - Decoding options.\r\n   */\r\n  // eslint-disable-next-line no-shadow\r\n  function CCITTFaxDecoder(source, options = {}) {\r\n    if (!source || typeof source.next !== \"function\") {\r\n      throw new Error('CCITTFaxDecoder - invalid \"source\" parameter.');\r\n    }\r\n    this.source = source;\r\n    this.eof = false;\r\n\r\n    this.encoding = options.K || 0;\r\n    this.eoline = options.EndOfLine || false;\r\n    this.byteAlign = options.EncodedByteAlign || false;\r\n    this.columns = options.Columns || 1728;\r\n    this.rows = options.Rows || 0;\r\n    let eoblock = options.EndOfBlock;\r\n    if (eoblock === null || eoblock === undefined) {\r\n      eoblock = true;\r\n    }\r\n    this.eoblock = eoblock;\r\n    this.black = options.BlackIs1 || false;\r\n\r\n    this.codingLine = new Uint32Array(this.columns + 1);\r\n    this.refLine = new Uint32Array(this.columns + 2);\r\n\r\n    this.codingLine[0] = this.columns;\r\n    this.codingPos = 0;\r\n\r\n    this.row = 0;\r\n    this.nextLine2D = this.encoding < 0;\r\n    this.inputBits = 0;\r\n    this.inputBuf = 0;\r\n    this.outputBits = 0;\r\n    this.rowsDone = false;\r\n\r\n    let code1;\r\n    while ((code1 = this._lookBits(12)) === 0) {\r\n      this._eatBits(1);\r\n    }\r\n    if (code1 === 1) {\r\n      this._eatBits(12);\r\n    }\r\n    if (this.encoding > 0) {\r\n      this.nextLine2D = !this._lookBits(1);\r\n      this._eatBits(1);\r\n    }\r\n  }\r\n\r\n  CCITTFaxDecoder.prototype = {\r\n    readNextChar() {\r\n      if (this.eof) {\r\n        return -1;\r\n      }\r\n      const refLine = this.refLine;\r\n      const codingLine = this.codingLine;\r\n      const columns = this.columns;\r\n\r\n      let refPos, blackPixels, bits, i;\r\n\r\n      if (this.outputBits === 0) {\r\n        if (this.rowsDone) {\r\n          this.eof = true;\r\n        }\r\n        if (this.eof) {\r\n          return -1;\r\n        }\r\n        this.err = false;\r\n\r\n        let code1, code2, code3;\r\n        if (this.nextLine2D) {\r\n          for (i = 0; codingLine[i] < columns; ++i) {\r\n            refLine[i] = codingLine[i];\r\n          }\r\n          refLine[i++] = columns;\r\n          refLine[i] = columns;\r\n          codingLine[0] = 0;\r\n          this.codingPos = 0;\r\n          refPos = 0;\r\n          blackPixels = 0;\r\n\r\n          while (codingLine[this.codingPos] < columns) {\r\n            code1 = this._getTwoDimCode();\r\n            switch (code1) {\r\n              case twoDimPass:\r\n                this._addPixels(refLine[refPos + 1], blackPixels);\r\n                if (refLine[refPos + 1] < columns) {\r\n                  refPos += 2;\r\n                }\r\n                break;\r\n              case twoDimHoriz:\r\n                code1 = code2 = 0;\r\n                if (blackPixels) {\r\n                  do {\r\n                    code1 += code3 = this._getBlackCode();\r\n                  } while (code3 >= 64);\r\n                  do {\r\n                    code2 += code3 = this._getWhiteCode();\r\n                  } while (code3 >= 64);\r\n                } else {\r\n                  do {\r\n                    code1 += code3 = this._getWhiteCode();\r\n                  } while (code3 >= 64);\r\n                  do {\r\n                    code2 += code3 = this._getBlackCode();\r\n                  } while (code3 >= 64);\r\n                }\r\n                this._addPixels(\r\n                  codingLine[this.codingPos] + code1,\r\n                  blackPixels\r\n                );\r\n                if (codingLine[this.codingPos] < columns) {\r\n                  this._addPixels(\r\n                    codingLine[this.codingPos] + code2,\r\n                    blackPixels ^ 1\r\n                  );\r\n                }\r\n                while (\r\n                  refLine[refPos] <= codingLine[this.codingPos] &&\r\n                  refLine[refPos] < columns\r\n                ) {\r\n                  refPos += 2;\r\n                }\r\n                break;\r\n              case twoDimVertR3:\r\n                this._addPixels(refLine[refPos] + 3, blackPixels);\r\n                blackPixels ^= 1;\r\n                if (codingLine[this.codingPos] < columns) {\r\n                  ++refPos;\r\n                  while (\r\n                    refLine[refPos] <= codingLine[this.codingPos] &&\r\n                    refLine[refPos] < columns\r\n                  ) {\r\n                    refPos += 2;\r\n                  }\r\n                }\r\n                break;\r\n              case twoDimVertR2:\r\n                this._addPixels(refLine[refPos] + 2, blackPixels);\r\n                blackPixels ^= 1;\r\n                if (codingLine[this.codingPos] < columns) {\r\n                  ++refPos;\r\n                  while (\r\n                    refLine[refPos] <= codingLine[this.codingPos] &&\r\n                    refLine[refPos] < columns\r\n                  ) {\r\n                    refPos += 2;\r\n                  }\r\n                }\r\n                break;\r\n              case twoDimVertR1:\r\n                this._addPixels(refLine[refPos] + 1, blackPixels);\r\n                blackPixels ^= 1;\r\n                if (codingLine[this.codingPos] < columns) {\r\n                  ++refPos;\r\n                  while (\r\n                    refLine[refPos] <= codingLine[this.codingPos] &&\r\n                    refLine[refPos] < columns\r\n                  ) {\r\n                    refPos += 2;\r\n                  }\r\n                }\r\n                break;\r\n              case twoDimVert0:\r\n                this._addPixels(refLine[refPos], blackPixels);\r\n                blackPixels ^= 1;\r\n                if (codingLine[this.codingPos] < columns) {\r\n                  ++refPos;\r\n                  while (\r\n                    refLine[refPos] <= codingLine[this.codingPos] &&\r\n                    refLine[refPos] < columns\r\n                  ) {\r\n                    refPos += 2;\r\n                  }\r\n                }\r\n                break;\r\n              case twoDimVertL3:\r\n                this._addPixelsNeg(refLine[refPos] - 3, blackPixels);\r\n                blackPixels ^= 1;\r\n                if (codingLine[this.codingPos] < columns) {\r\n                  if (refPos > 0) {\r\n                    --refPos;\r\n                  } else {\r\n                    ++refPos;\r\n                  }\r\n                  while (\r\n                    refLine[refPos] <= codingLine[this.codingPos] &&\r\n                    refLine[refPos] < columns\r\n                  ) {\r\n                    refPos += 2;\r\n                  }\r\n                }\r\n                break;\r\n              case twoDimVertL2:\r\n                this._addPixelsNeg(refLine[refPos] - 2, blackPixels);\r\n                blackPixels ^= 1;\r\n                if (codingLine[this.codingPos] < columns) {\r\n                  if (refPos > 0) {\r\n                    --refPos;\r\n                  } else {\r\n                    ++refPos;\r\n                  }\r\n                  while (\r\n                    refLine[refPos] <= codingLine[this.codingPos] &&\r\n                    refLine[refPos] < columns\r\n                  ) {\r\n                    refPos += 2;\r\n                  }\r\n                }\r\n                break;\r\n              case twoDimVertL1:\r\n                this._addPixelsNeg(refLine[refPos] - 1, blackPixels);\r\n                blackPixels ^= 1;\r\n                if (codingLine[this.codingPos] < columns) {\r\n                  if (refPos > 0) {\r\n                    --refPos;\r\n                  } else {\r\n                    ++refPos;\r\n                  }\r\n                  while (\r\n                    refLine[refPos] <= codingLine[this.codingPos] &&\r\n                    refLine[refPos] < columns\r\n                  ) {\r\n                    refPos += 2;\r\n                  }\r\n                }\r\n                break;\r\n              case ccittEOF:\r\n                this._addPixels(columns, 0);\r\n                this.eof = true;\r\n                break;\r\n              default:\r\n                info(\"bad 2d code\");\r\n                this._addPixels(columns, 0);\r\n                this.err = true;\r\n            }\r\n          }\r\n        } else {\r\n          codingLine[0] = 0;\r\n          this.codingPos = 0;\r\n          blackPixels = 0;\r\n          while (codingLine[this.codingPos] < columns) {\r\n            code1 = 0;\r\n            if (blackPixels) {\r\n              do {\r\n                code1 += code3 = this._getBlackCode();\r\n              } while (code3 >= 64);\r\n            } else {\r\n              do {\r\n                code1 += code3 = this._getWhiteCode();\r\n              } while (code3 >= 64);\r\n            }\r\n            this._addPixels(codingLine[this.codingPos] + code1, blackPixels);\r\n            blackPixels ^= 1;\r\n          }\r\n        }\r\n\r\n        let gotEOL = false;\r\n\r\n        if (this.byteAlign) {\r\n          this.inputBits &= ~7;\r\n        }\r\n\r\n        if (!this.eoblock && this.row === this.rows - 1) {\r\n          this.rowsDone = true;\r\n        } else {\r\n          code1 = this._lookBits(12);\r\n          if (this.eoline) {\r\n            while (code1 !== ccittEOF && code1 !== 1) {\r\n              this._eatBits(1);\r\n              code1 = this._lookBits(12);\r\n            }\r\n          } else {\r\n            while (code1 === 0) {\r\n              this._eatBits(1);\r\n              code1 = this._lookBits(12);\r\n            }\r\n          }\r\n          if (code1 === 1) {\r\n            this._eatBits(12);\r\n            gotEOL = true;\r\n          } else if (code1 === ccittEOF) {\r\n            this.eof = true;\r\n          }\r\n        }\r\n\r\n        if (!this.eof && this.encoding > 0 && !this.rowsDone) {\r\n          this.nextLine2D = !this._lookBits(1);\r\n          this._eatBits(1);\r\n        }\r\n\r\n        if (this.eoblock && gotEOL && this.byteAlign) {\r\n          code1 = this._lookBits(12);\r\n          if (code1 === 1) {\r\n            this._eatBits(12);\r\n            if (this.encoding > 0) {\r\n              this._lookBits(1);\r\n              this._eatBits(1);\r\n            }\r\n            if (this.encoding >= 0) {\r\n              for (i = 0; i < 4; ++i) {\r\n                code1 = this._lookBits(12);\r\n                if (code1 !== 1) {\r\n                  info(\"bad rtc code: \" + code1);\r\n                }\r\n                this._eatBits(12);\r\n                if (this.encoding > 0) {\r\n                  this._lookBits(1);\r\n                  this._eatBits(1);\r\n                }\r\n              }\r\n            }\r\n            this.eof = true;\r\n          }\r\n        } else if (this.err && this.eoline) {\r\n          while (true) {\r\n            code1 = this._lookBits(13);\r\n            if (code1 === ccittEOF) {\r\n              this.eof = true;\r\n              return -1;\r\n            }\r\n            if (code1 >> 1 === 1) {\r\n              break;\r\n            }\r\n            this._eatBits(1);\r\n          }\r\n          this._eatBits(12);\r\n          if (this.encoding > 0) {\r\n            this._eatBits(1);\r\n            this.nextLine2D = !(code1 & 1);\r\n          }\r\n        }\r\n\r\n        if (codingLine[0] > 0) {\r\n          this.outputBits = codingLine[(this.codingPos = 0)];\r\n        } else {\r\n          this.outputBits = codingLine[(this.codingPos = 1)];\r\n        }\r\n        this.row++;\r\n      }\r\n\r\n      let c;\r\n      if (this.outputBits >= 8) {\r\n        c = this.codingPos & 1 ? 0 : 0xff;\r\n        this.outputBits -= 8;\r\n        if (this.outputBits === 0 && codingLine[this.codingPos] < columns) {\r\n          this.codingPos++;\r\n          this.outputBits =\r\n            codingLine[this.codingPos] - codingLine[this.codingPos - 1];\r\n        }\r\n      } else {\r\n        bits = 8;\r\n        c = 0;\r\n        do {\r\n          if (this.outputBits > bits) {\r\n            c <<= bits;\r\n            if (!(this.codingPos & 1)) {\r\n              c |= 0xff >> (8 - bits);\r\n            }\r\n            this.outputBits -= bits;\r\n            bits = 0;\r\n          } else {\r\n            c <<= this.outputBits;\r\n            if (!(this.codingPos & 1)) {\r\n              c |= 0xff >> (8 - this.outputBits);\r\n            }\r\n            bits -= this.outputBits;\r\n            this.outputBits = 0;\r\n            if (codingLine[this.codingPos] < columns) {\r\n              this.codingPos++;\r\n              this.outputBits =\r\n                codingLine[this.codingPos] - codingLine[this.codingPos - 1];\r\n            } else if (bits > 0) {\r\n              c <<= bits;\r\n              bits = 0;\r\n            }\r\n          }\r\n        } while (bits);\r\n      }\r\n      if (this.black) {\r\n        c ^= 0xff;\r\n      }\r\n      return c;\r\n    },\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    _addPixels(a1, blackPixels) {\r\n      const codingLine = this.codingLine;\r\n      let codingPos = this.codingPos;\r\n\r\n      if (a1 > codingLine[codingPos]) {\r\n        if (a1 > this.columns) {\r\n          info(\"row is wrong length\");\r\n          this.err = true;\r\n          a1 = this.columns;\r\n        }\r\n        if ((codingPos & 1) ^ blackPixels) {\r\n          ++codingPos;\r\n        }\r\n\r\n        codingLine[codingPos] = a1;\r\n      }\r\n      this.codingPos = codingPos;\r\n    },\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    _addPixelsNeg(a1, blackPixels) {\r\n      const codingLine = this.codingLine;\r\n      let codingPos = this.codingPos;\r\n\r\n      if (a1 > codingLine[codingPos]) {\r\n        if (a1 > this.columns) {\r\n          info(\"row is wrong length\");\r\n          this.err = true;\r\n          a1 = this.columns;\r\n        }\r\n        if ((codingPos & 1) ^ blackPixels) {\r\n          ++codingPos;\r\n        }\r\n\r\n        codingLine[codingPos] = a1;\r\n      } else if (a1 < codingLine[codingPos]) {\r\n        if (a1 < 0) {\r\n          info(\"invalid code\");\r\n          this.err = true;\r\n          a1 = 0;\r\n        }\r\n        while (codingPos > 0 && a1 < codingLine[codingPos - 1]) {\r\n          --codingPos;\r\n        }\r\n        codingLine[codingPos] = a1;\r\n      }\r\n\r\n      this.codingPos = codingPos;\r\n    },\r\n\r\n    /**\r\n     * This function returns the code found from the table.\r\n     * The start and end parameters set the boundaries for searching the table.\r\n     * The limit parameter is optional. Function returns an array with three\r\n     * values. The first array element indicates whether a valid code is being\r\n     * returned. The second array element is the actual code. The third array\r\n     * element indicates whether EOF was reached.\r\n     * @private\r\n     */\r\n    _findTableCode(start, end, table, limit) {\r\n      const limitValue = limit || 0;\r\n      for (let i = start; i <= end; ++i) {\r\n        let code = this._lookBits(i);\r\n        if (code === ccittEOF) {\r\n          return [true, 1, false];\r\n        }\r\n        if (i < end) {\r\n          code <<= end - i;\r\n        }\r\n        if (!limitValue || code >= limitValue) {\r\n          const p = table[code - limitValue];\r\n          if (p[0] === i) {\r\n            this._eatBits(i);\r\n            return [true, p[1], true];\r\n          }\r\n        }\r\n      }\r\n      return [false, 0, false];\r\n    },\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    _getTwoDimCode() {\r\n      let code = 0;\r\n      let p;\r\n      if (this.eoblock) {\r\n        code = this._lookBits(7);\r\n        p = twoDimTable[code];\r\n        if (p && p[0] > 0) {\r\n          this._eatBits(p[0]);\r\n          return p[1];\r\n        }\r\n      } else {\r\n        const result = this._findTableCode(1, 7, twoDimTable);\r\n        if (result[0] && result[2]) {\r\n          return result[1];\r\n        }\r\n      }\r\n      info(\"Bad two dim code\");\r\n      return ccittEOF;\r\n    },\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    _getWhiteCode() {\r\n      let code = 0;\r\n      let p;\r\n      if (this.eoblock) {\r\n        code = this._lookBits(12);\r\n        if (code === ccittEOF) {\r\n          return 1;\r\n        }\r\n\r\n        if (code >> 5 === 0) {\r\n          p = whiteTable1[code];\r\n        } else {\r\n          p = whiteTable2[code >> 3];\r\n        }\r\n\r\n        if (p[0] > 0) {\r\n          this._eatBits(p[0]);\r\n          return p[1];\r\n        }\r\n      } else {\r\n        let result = this._findTableCode(1, 9, whiteTable2);\r\n        if (result[0]) {\r\n          return result[1];\r\n        }\r\n\r\n        result = this._findTableCode(11, 12, whiteTable1);\r\n        if (result[0]) {\r\n          return result[1];\r\n        }\r\n      }\r\n      info(\"bad white code\");\r\n      this._eatBits(1);\r\n      return 1;\r\n    },\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    _getBlackCode() {\r\n      let code, p;\r\n      if (this.eoblock) {\r\n        code = this._lookBits(13);\r\n        if (code === ccittEOF) {\r\n          return 1;\r\n        }\r\n        if (code >> 7 === 0) {\r\n          p = blackTable1[code];\r\n        } else if (code >> 9 === 0 && code >> 7 !== 0) {\r\n          p = blackTable2[(code >> 1) - 64];\r\n        } else {\r\n          p = blackTable3[code >> 7];\r\n        }\r\n\r\n        if (p[0] > 0) {\r\n          this._eatBits(p[0]);\r\n          return p[1];\r\n        }\r\n      } else {\r\n        let result = this._findTableCode(2, 6, blackTable3);\r\n        if (result[0]) {\r\n          return result[1];\r\n        }\r\n\r\n        result = this._findTableCode(7, 12, blackTable2, 64);\r\n        if (result[0]) {\r\n          return result[1];\r\n        }\r\n\r\n        result = this._findTableCode(10, 13, blackTable1);\r\n        if (result[0]) {\r\n          return result[1];\r\n        }\r\n      }\r\n      info(\"bad black code\");\r\n      this._eatBits(1);\r\n      return 1;\r\n    },\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    _lookBits(n) {\r\n      let c;\r\n      while (this.inputBits < n) {\r\n        if ((c = this.source.next()) === -1) {\r\n          if (this.inputBits === 0) {\r\n            return ccittEOF;\r\n          }\r\n          return (this.inputBuf << (n - this.inputBits)) & (0xffff >> (16 - n));\r\n        }\r\n        this.inputBuf = (this.inputBuf << 8) | c;\r\n        this.inputBits += 8;\r\n      }\r\n      return (this.inputBuf >> (this.inputBits - n)) & (0xffff >> (16 - n));\r\n    },\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    _eatBits(n) {\r\n      if ((this.inputBits -= n) < 0) {\r\n        this.inputBits = 0;\r\n      }\r\n    },\r\n  };\r\n\r\n  return CCITTFaxDecoder;\r\n})();\r\n\r\nexport { CCITTFaxDecoder };\r\n","/* Copyright 2012 Mozilla Foundation\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport { BaseException, shadow } from \"./util.js\";\r\nimport { log2, readInt8, readUint16, readUint32 } from \"./core_utils.js\";\r\nimport { ArithmeticDecoder } from \"./arithmetic_decoder.js\";\r\nimport { CCITTFaxDecoder } from \"./ccitt.js\";\r\n\r\nclass Jbig2Error extends BaseException {\r\n  constructor(msg) {\r\n    super(`JBIG2 error: ${msg}`);\r\n  }\r\n}\r\n\r\nvar Jbig2Image = (function Jbig2ImageClosure() {\r\n  // Utility data structures\r\n  function ContextCache() {}\r\n\r\n  ContextCache.prototype = {\r\n    getContexts(id) {\r\n      if (id in this) {\r\n        return this[id];\r\n      }\r\n      return (this[id] = new Int8Array(1 << 16));\r\n    },\r\n  };\r\n\r\n  function DecodingContext(data, start, end) {\r\n    this.data = data;\r\n    this.start = start;\r\n    this.end = end;\r\n  }\r\n\r\n  DecodingContext.prototype = {\r\n    get decoder() {\r\n      var decoder = new ArithmeticDecoder(this.data, this.start, this.end);\r\n      return shadow(this, \"decoder\", decoder);\r\n    },\r\n    get contextCache() {\r\n      var cache = new ContextCache();\r\n      return shadow(this, \"contextCache\", cache);\r\n    },\r\n  };\r\n\r\n  // Annex A. Arithmetic Integer Decoding Procedure\r\n  // A.2 Procedure for decoding values\r\n  function decodeInteger(contextCache, procedure, decoder) {\r\n    var contexts = contextCache.getContexts(procedure);\r\n    var prev = 1;\r\n\r\n    function readBits(length) {\r\n      var v = 0;\r\n      for (var i = 0; i < length; i++) {\r\n        var bit = decoder.readBit(contexts, prev);\r\n        prev =\r\n          prev < 256 ? (prev << 1) | bit : (((prev << 1) | bit) & 511) | 256;\r\n        v = (v << 1) | bit;\r\n      }\r\n      return v >>> 0;\r\n    }\r\n\r\n    var sign = readBits(1);\r\n    // prettier-ignore\r\n    /* eslint-disable no-nested-ternary */\r\n    var value = readBits(1) ?\r\n                  (readBits(1) ?\r\n                    (readBits(1) ?\r\n                      (readBits(1) ?\r\n                        (readBits(1) ?\r\n                          (readBits(32) + 4436) :\r\n                        readBits(12) + 340) :\r\n                      readBits(8) + 84) :\r\n                    readBits(6) + 20) :\r\n                  readBits(4) + 4) :\r\n                readBits(2);\r\n    /* eslint-enable no-nested-ternary */\r\n    if (sign === 0) {\r\n      return value;\r\n    } else if (value > 0) {\r\n      return -value;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  // A.3 The IAID decoding procedure\r\n  function decodeIAID(contextCache, decoder, codeLength) {\r\n    var contexts = contextCache.getContexts(\"IAID\");\r\n\r\n    var prev = 1;\r\n    for (var i = 0; i < codeLength; i++) {\r\n      var bit = decoder.readBit(contexts, prev);\r\n      prev = (prev << 1) | bit;\r\n    }\r\n    if (codeLength < 31) {\r\n      return prev & ((1 << codeLength) - 1);\r\n    }\r\n    return prev & 0x7fffffff;\r\n  }\r\n\r\n  // 7.3 Segment types\r\n  var SegmentTypes = [\r\n    \"SymbolDictionary\",\r\n    null,\r\n    null,\r\n    null,\r\n    \"IntermediateTextRegion\",\r\n    null,\r\n    \"ImmediateTextRegion\",\r\n    \"ImmediateLosslessTextRegion\",\r\n    null,\r\n    null,\r\n    null,\r\n    null,\r\n    null,\r\n    null,\r\n    null,\r\n    null,\r\n    \"PatternDictionary\",\r\n    null,\r\n    null,\r\n    null,\r\n    \"IntermediateHalftoneRegion\",\r\n    null,\r\n    \"ImmediateHalftoneRegion\",\r\n    \"ImmediateLosslessHalftoneRegion\",\r\n    null,\r\n    null,\r\n    null,\r\n    null,\r\n    null,\r\n    null,\r\n    null,\r\n    null,\r\n    null,\r\n    null,\r\n    null,\r\n    null,\r\n    \"IntermediateGenericRegion\",\r\n    null,\r\n    \"ImmediateGenericRegion\",\r\n    \"ImmediateLosslessGenericRegion\",\r\n    \"IntermediateGenericRefinementRegion\",\r\n    null,\r\n    \"ImmediateGenericRefinementRegion\",\r\n    \"ImmediateLosslessGenericRefinementRegion\",\r\n    null,\r\n    null,\r\n    null,\r\n    null,\r\n    \"PageInformation\",\r\n    \"EndOfPage\",\r\n    \"EndOfStripe\",\r\n    \"EndOfFile\",\r\n    \"Profiles\",\r\n    \"Tables\",\r\n    null,\r\n    null,\r\n    null,\r\n    null,\r\n    null,\r\n    null,\r\n    null,\r\n    null,\r\n    \"Extension\",\r\n  ];\r\n\r\n  var CodingTemplates = [\r\n    [\r\n      { x: -1, y: -2 },\r\n      { x: 0, y: -2 },\r\n      { x: 1, y: -2 },\r\n      { x: -2, y: -1 },\r\n      { x: -1, y: -1 },\r\n      { x: 0, y: -1 },\r\n      { x: 1, y: -1 },\r\n      { x: 2, y: -1 },\r\n      { x: -4, y: 0 },\r\n      { x: -3, y: 0 },\r\n      { x: -2, y: 0 },\r\n      { x: -1, y: 0 },\r\n    ],\r\n    [\r\n      { x: -1, y: -2 },\r\n      { x: 0, y: -2 },\r\n      { x: 1, y: -2 },\r\n      { x: 2, y: -2 },\r\n      { x: -2, y: -1 },\r\n      { x: -1, y: -1 },\r\n      { x: 0, y: -1 },\r\n      { x: 1, y: -1 },\r\n      { x: 2, y: -1 },\r\n      { x: -3, y: 0 },\r\n      { x: -2, y: 0 },\r\n      { x: -1, y: 0 },\r\n    ],\r\n    [\r\n      { x: -1, y: -2 },\r\n      { x: 0, y: -2 },\r\n      { x: 1, y: -2 },\r\n      { x: -2, y: -1 },\r\n      { x: -1, y: -1 },\r\n      { x: 0, y: -1 },\r\n      { x: 1, y: -1 },\r\n      { x: -2, y: 0 },\r\n      { x: -1, y: 0 },\r\n    ],\r\n    [\r\n      { x: -3, y: -1 },\r\n      { x: -2, y: -1 },\r\n      { x: -1, y: -1 },\r\n      { x: 0, y: -1 },\r\n      { x: 1, y: -1 },\r\n      { x: -4, y: 0 },\r\n      { x: -3, y: 0 },\r\n      { x: -2, y: 0 },\r\n      { x: -1, y: 0 },\r\n    ],\r\n  ];\r\n\r\n  var RefinementTemplates = [\r\n    {\r\n      coding: [\r\n        { x: 0, y: -1 },\r\n        { x: 1, y: -1 },\r\n        { x: -1, y: 0 },\r\n      ],\r\n      reference: [\r\n        { x: 0, y: -1 },\r\n        { x: 1, y: -1 },\r\n        { x: -1, y: 0 },\r\n        { x: 0, y: 0 },\r\n        { x: 1, y: 0 },\r\n        { x: -1, y: 1 },\r\n        { x: 0, y: 1 },\r\n        { x: 1, y: 1 },\r\n      ],\r\n    },\r\n    {\r\n      coding: [\r\n        { x: -1, y: -1 },\r\n        { x: 0, y: -1 },\r\n        { x: 1, y: -1 },\r\n        { x: -1, y: 0 },\r\n      ],\r\n      reference: [\r\n        { x: 0, y: -1 },\r\n        { x: -1, y: 0 },\r\n        { x: 0, y: 0 },\r\n        { x: 1, y: 0 },\r\n        { x: 0, y: 1 },\r\n        { x: 1, y: 1 },\r\n      ],\r\n    },\r\n  ];\r\n\r\n  // See 6.2.5.7 Decoding the bitmap.\r\n  var ReusedContexts = [\r\n    0x9b25, // 10011 0110010 0101\r\n    0x0795, // 0011 110010 101\r\n    0x00e5, // 001 11001 01\r\n    0x0195, // 011001 0101\r\n  ];\r\n\r\n  var RefinementReusedContexts = [\r\n    0x0020, // '000' + '0' (coding) + '00010000' + '0' (reference)\r\n    0x0008, // '0000' + '001000'\r\n  ];\r\n\r\n  function decodeBitmapTemplate0(width, height, decodingContext) {\r\n    var decoder = decodingContext.decoder;\r\n    var contexts = decodingContext.contextCache.getContexts(\"GB\");\r\n    var contextLabel,\r\n      i,\r\n      j,\r\n      pixel,\r\n      row,\r\n      row1,\r\n      row2,\r\n      bitmap = [];\r\n\r\n    // ...ooooo....\r\n    // ..ooooooo... Context template for current pixel (X)\r\n    // .ooooX...... (concatenate values of 'o'-pixels to get contextLabel)\r\n    var OLD_PIXEL_MASK = 0x7bf7; // 01111 0111111 0111\r\n\r\n    for (i = 0; i < height; i++) {\r\n      row = bitmap[i] = new Uint8Array(width);\r\n      row1 = i < 1 ? row : bitmap[i - 1];\r\n      row2 = i < 2 ? row : bitmap[i - 2];\r\n\r\n      // At the beginning of each row:\r\n      // Fill contextLabel with pixels that are above/right of (X)\r\n      contextLabel =\r\n        (row2[0] << 13) |\r\n        (row2[1] << 12) |\r\n        (row2[2] << 11) |\r\n        (row1[0] << 7) |\r\n        (row1[1] << 6) |\r\n        (row1[2] << 5) |\r\n        (row1[3] << 4);\r\n\r\n      for (j = 0; j < width; j++) {\r\n        row[j] = pixel = decoder.readBit(contexts, contextLabel);\r\n\r\n        // At each pixel: Clear contextLabel pixels that are shifted\r\n        // out of the context, then add new ones.\r\n        contextLabel =\r\n          ((contextLabel & OLD_PIXEL_MASK) << 1) |\r\n          (j + 3 < width ? row2[j + 3] << 11 : 0) |\r\n          (j + 4 < width ? row1[j + 4] << 4 : 0) |\r\n          pixel;\r\n      }\r\n    }\r\n\r\n    return bitmap;\r\n  }\r\n\r\n  // 6.2 Generic Region Decoding Procedure\r\n  function decodeBitmap(\r\n    mmr,\r\n    width,\r\n    height,\r\n    templateIndex,\r\n    prediction,\r\n    skip,\r\n    at,\r\n    decodingContext\r\n  ) {\r\n    if (mmr) {\r\n      const input = new Reader(\r\n        decodingContext.data,\r\n        decodingContext.start,\r\n        decodingContext.end\r\n      );\r\n      return decodeMMRBitmap(input, width, height, false);\r\n    }\r\n\r\n    // Use optimized version for the most common case\r\n    if (\r\n      templateIndex === 0 &&\r\n      !skip &&\r\n      !prediction &&\r\n      at.length === 4 &&\r\n      at[0].x === 3 &&\r\n      at[0].y === -1 &&\r\n      at[1].x === -3 &&\r\n      at[1].y === -1 &&\r\n      at[2].x === 2 &&\r\n      at[2].y === -2 &&\r\n      at[3].x === -2 &&\r\n      at[3].y === -2\r\n    ) {\r\n      return decodeBitmapTemplate0(width, height, decodingContext);\r\n    }\r\n\r\n    var useskip = !!skip;\r\n    var template = CodingTemplates[templateIndex].concat(at);\r\n\r\n    // Sorting is non-standard, and it is not required. But sorting increases\r\n    // the number of template bits that can be reused from the previous\r\n    // contextLabel in the main loop.\r\n    template.sort(function (a, b) {\r\n      return a.y - b.y || a.x - b.x;\r\n    });\r\n\r\n    var templateLength = template.length;\r\n    var templateX = new Int8Array(templateLength);\r\n    var templateY = new Int8Array(templateLength);\r\n    var changingTemplateEntries = [];\r\n    var reuseMask = 0,\r\n      minX = 0,\r\n      maxX = 0,\r\n      minY = 0;\r\n    var c, k;\r\n\r\n    for (k = 0; k < templateLength; k++) {\r\n      templateX[k] = template[k].x;\r\n      templateY[k] = template[k].y;\r\n      minX = Math.min(minX, template[k].x);\r\n      maxX = Math.max(maxX, template[k].x);\r\n      minY = Math.min(minY, template[k].y);\r\n      // Check if the template pixel appears in two consecutive context labels,\r\n      // so it can be reused. Otherwise, we add it to the list of changing\r\n      // template entries.\r\n      if (\r\n        k < templateLength - 1 &&\r\n        template[k].y === template[k + 1].y &&\r\n        template[k].x === template[k + 1].x - 1\r\n      ) {\r\n        reuseMask |= 1 << (templateLength - 1 - k);\r\n      } else {\r\n        changingTemplateEntries.push(k);\r\n      }\r\n    }\r\n    var changingEntriesLength = changingTemplateEntries.length;\r\n\r\n    var changingTemplateX = new Int8Array(changingEntriesLength);\r\n    var changingTemplateY = new Int8Array(changingEntriesLength);\r\n    var changingTemplateBit = new Uint16Array(changingEntriesLength);\r\n    for (c = 0; c < changingEntriesLength; c++) {\r\n      k = changingTemplateEntries[c];\r\n      changingTemplateX[c] = template[k].x;\r\n      changingTemplateY[c] = template[k].y;\r\n      changingTemplateBit[c] = 1 << (templateLength - 1 - k);\r\n    }\r\n\r\n    // Get the safe bounding box edges from the width, height, minX, maxX, minY\r\n    var sbb_left = -minX;\r\n    var sbb_top = -minY;\r\n    var sbb_right = width - maxX;\r\n\r\n    var pseudoPixelContext = ReusedContexts[templateIndex];\r\n    var row = new Uint8Array(width);\r\n    var bitmap = [];\r\n\r\n    var decoder = decodingContext.decoder;\r\n    var contexts = decodingContext.contextCache.getContexts(\"GB\");\r\n\r\n    var ltp = 0,\r\n      j,\r\n      i0,\r\n      j0,\r\n      contextLabel = 0,\r\n      bit,\r\n      shift;\r\n    for (var i = 0; i < height; i++) {\r\n      if (prediction) {\r\n        var sltp = decoder.readBit(contexts, pseudoPixelContext);\r\n        ltp ^= sltp;\r\n        if (ltp) {\r\n          bitmap.push(row); // duplicate previous row\r\n          continue;\r\n        }\r\n      }\r\n      row = new Uint8Array(row);\r\n      bitmap.push(row);\r\n      for (j = 0; j < width; j++) {\r\n        if (useskip && skip[i][j]) {\r\n          row[j] = 0;\r\n          continue;\r\n        }\r\n        // Are we in the middle of a scanline, so we can reuse contextLabel\r\n        // bits?\r\n        if (j >= sbb_left && j < sbb_right && i >= sbb_top) {\r\n          // If yes, we can just shift the bits that are reusable and only\r\n          // fetch the remaining ones.\r\n          contextLabel = (contextLabel << 1) & reuseMask;\r\n          for (k = 0; k < changingEntriesLength; k++) {\r\n            i0 = i + changingTemplateY[k];\r\n            j0 = j + changingTemplateX[k];\r\n            bit = bitmap[i0][j0];\r\n            if (bit) {\r\n              bit = changingTemplateBit[k];\r\n              contextLabel |= bit;\r\n            }\r\n          }\r\n        } else {\r\n          // compute the contextLabel from scratch\r\n          contextLabel = 0;\r\n          shift = templateLength - 1;\r\n          for (k = 0; k < templateLength; k++, shift--) {\r\n            j0 = j + templateX[k];\r\n            if (j0 >= 0 && j0 < width) {\r\n              i0 = i + templateY[k];\r\n              if (i0 >= 0) {\r\n                bit = bitmap[i0][j0];\r\n                if (bit) {\r\n                  contextLabel |= bit << shift;\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        var pixel = decoder.readBit(contexts, contextLabel);\r\n        row[j] = pixel;\r\n      }\r\n    }\r\n    return bitmap;\r\n  }\r\n\r\n  // 6.3.2 Generic Refinement Region Decoding Procedure\r\n  function decodeRefinement(\r\n    width,\r\n    height,\r\n    templateIndex,\r\n    referenceBitmap,\r\n    offsetX,\r\n    offsetY,\r\n    prediction,\r\n    at,\r\n    decodingContext\r\n  ) {\r\n    var codingTemplate = RefinementTemplates[templateIndex].coding;\r\n    if (templateIndex === 0) {\r\n      codingTemplate = codingTemplate.concat([at[0]]);\r\n    }\r\n    var codingTemplateLength = codingTemplate.length;\r\n    var codingTemplateX = new Int32Array(codingTemplateLength);\r\n    var codingTemplateY = new Int32Array(codingTemplateLength);\r\n    var k;\r\n    for (k = 0; k < codingTemplateLength; k++) {\r\n      codingTemplateX[k] = codingTemplate[k].x;\r\n      codingTemplateY[k] = codingTemplate[k].y;\r\n    }\r\n\r\n    var referenceTemplate = RefinementTemplates[templateIndex].reference;\r\n    if (templateIndex === 0) {\r\n      referenceTemplate = referenceTemplate.concat([at[1]]);\r\n    }\r\n    var referenceTemplateLength = referenceTemplate.length;\r\n    var referenceTemplateX = new Int32Array(referenceTemplateLength);\r\n    var referenceTemplateY = new Int32Array(referenceTemplateLength);\r\n    for (k = 0; k < referenceTemplateLength; k++) {\r\n      referenceTemplateX[k] = referenceTemplate[k].x;\r\n      referenceTemplateY[k] = referenceTemplate[k].y;\r\n    }\r\n    var referenceWidth = referenceBitmap[0].length;\r\n    var referenceHeight = referenceBitmap.length;\r\n\r\n    var pseudoPixelContext = RefinementReusedContexts[templateIndex];\r\n    var bitmap = [];\r\n\r\n    var decoder = decodingContext.decoder;\r\n    var contexts = decodingContext.contextCache.getContexts(\"GR\");\r\n\r\n    var ltp = 0;\r\n    for (var i = 0; i < height; i++) {\r\n      if (prediction) {\r\n        var sltp = decoder.readBit(contexts, pseudoPixelContext);\r\n        ltp ^= sltp;\r\n        if (ltp) {\r\n          throw new Jbig2Error(\"prediction is not supported\");\r\n        }\r\n      }\r\n      var row = new Uint8Array(width);\r\n      bitmap.push(row);\r\n      for (var j = 0; j < width; j++) {\r\n        var i0, j0;\r\n        var contextLabel = 0;\r\n        for (k = 0; k < codingTemplateLength; k++) {\r\n          i0 = i + codingTemplateY[k];\r\n          j0 = j + codingTemplateX[k];\r\n          if (i0 < 0 || j0 < 0 || j0 >= width) {\r\n            contextLabel <<= 1; // out of bound pixel\r\n          } else {\r\n            contextLabel = (contextLabel << 1) | bitmap[i0][j0];\r\n          }\r\n        }\r\n        for (k = 0; k < referenceTemplateLength; k++) {\r\n          i0 = i + referenceTemplateY[k] - offsetY;\r\n          j0 = j + referenceTemplateX[k] - offsetX;\r\n          if (\r\n            i0 < 0 ||\r\n            i0 >= referenceHeight ||\r\n            j0 < 0 ||\r\n            j0 >= referenceWidth\r\n          ) {\r\n            contextLabel <<= 1; // out of bound pixel\r\n          } else {\r\n            contextLabel = (contextLabel << 1) | referenceBitmap[i0][j0];\r\n          }\r\n        }\r\n        var pixel = decoder.readBit(contexts, contextLabel);\r\n        row[j] = pixel;\r\n      }\r\n    }\r\n\r\n    return bitmap;\r\n  }\r\n\r\n  // 6.5.5 Decoding the symbol dictionary\r\n  function decodeSymbolDictionary(\r\n    huffman,\r\n    refinement,\r\n    symbols,\r\n    numberOfNewSymbols,\r\n    numberOfExportedSymbols,\r\n    huffmanTables,\r\n    templateIndex,\r\n    at,\r\n    refinementTemplateIndex,\r\n    refinementAt,\r\n    decodingContext,\r\n    huffmanInput\r\n  ) {\r\n    if (huffman && refinement) {\r\n      throw new Jbig2Error(\"symbol refinement with Huffman is not supported\");\r\n    }\r\n\r\n    var newSymbols = [];\r\n    var currentHeight = 0;\r\n    var symbolCodeLength = log2(symbols.length + numberOfNewSymbols);\r\n\r\n    var decoder = decodingContext.decoder;\r\n    var contextCache = decodingContext.contextCache;\r\n    let tableB1, symbolWidths;\r\n    if (huffman) {\r\n      tableB1 = getStandardTable(1); // standard table B.1\r\n      symbolWidths = [];\r\n      symbolCodeLength = Math.max(symbolCodeLength, 1); // 6.5.8.2.3\r\n    }\r\n\r\n    while (newSymbols.length < numberOfNewSymbols) {\r\n      var deltaHeight = huffman\r\n        ? huffmanTables.tableDeltaHeight.decode(huffmanInput)\r\n        : decodeInteger(contextCache, \"IADH\", decoder); // 6.5.6\r\n      currentHeight += deltaHeight;\r\n      let currentWidth = 0,\r\n        totalWidth = 0;\r\n      const firstSymbol = huffman ? symbolWidths.length : 0;\r\n      while (true) {\r\n        var deltaWidth = huffman\r\n          ? huffmanTables.tableDeltaWidth.decode(huffmanInput)\r\n          : decodeInteger(contextCache, \"IADW\", decoder); // 6.5.7\r\n        if (deltaWidth === null) {\r\n          break; // OOB\r\n        }\r\n        currentWidth += deltaWidth;\r\n        totalWidth += currentWidth;\r\n        var bitmap;\r\n        if (refinement) {\r\n          // 6.5.8.2 Refinement/aggregate-coded symbol bitmap\r\n          var numberOfInstances = decodeInteger(contextCache, \"IAAI\", decoder);\r\n          if (numberOfInstances > 1) {\r\n            bitmap = decodeTextRegion(\r\n              huffman,\r\n              refinement,\r\n              currentWidth,\r\n              currentHeight,\r\n              0,\r\n              numberOfInstances,\r\n              1, // strip size\r\n              symbols.concat(newSymbols),\r\n              symbolCodeLength,\r\n              0, // transposed\r\n              0, // ds offset\r\n              1, // top left 7.4.3.1.1\r\n              0, // OR operator\r\n              huffmanTables,\r\n              refinementTemplateIndex,\r\n              refinementAt,\r\n              decodingContext,\r\n              0,\r\n              huffmanInput\r\n            );\r\n          } else {\r\n            var symbolId = decodeIAID(contextCache, decoder, symbolCodeLength);\r\n            var rdx = decodeInteger(contextCache, \"IARDX\", decoder); // 6.4.11.3\r\n            var rdy = decodeInteger(contextCache, \"IARDY\", decoder); // 6.4.11.4\r\n            var symbol =\r\n              symbolId < symbols.length\r\n                ? symbols[symbolId]\r\n                : newSymbols[symbolId - symbols.length];\r\n            bitmap = decodeRefinement(\r\n              currentWidth,\r\n              currentHeight,\r\n              refinementTemplateIndex,\r\n              symbol,\r\n              rdx,\r\n              rdy,\r\n              false,\r\n              refinementAt,\r\n              decodingContext\r\n            );\r\n          }\r\n          newSymbols.push(bitmap);\r\n        } else if (huffman) {\r\n          // Store only symbol width and decode a collective bitmap when the\r\n          // height class is done.\r\n          symbolWidths.push(currentWidth);\r\n        } else {\r\n          // 6.5.8.1 Direct-coded symbol bitmap\r\n          bitmap = decodeBitmap(\r\n            false,\r\n            currentWidth,\r\n            currentHeight,\r\n            templateIndex,\r\n            false,\r\n            null,\r\n            at,\r\n            decodingContext\r\n          );\r\n          newSymbols.push(bitmap);\r\n        }\r\n      }\r\n      if (huffman && !refinement) {\r\n        // 6.5.9 Height class collective bitmap\r\n        const bitmapSize = huffmanTables.tableBitmapSize.decode(huffmanInput);\r\n        huffmanInput.byteAlign();\r\n        let collectiveBitmap;\r\n        if (bitmapSize === 0) {\r\n          // Uncompressed collective bitmap\r\n          collectiveBitmap = readUncompressedBitmap(\r\n            huffmanInput,\r\n            totalWidth,\r\n            currentHeight\r\n          );\r\n        } else {\r\n          // MMR collective bitmap\r\n          const originalEnd = huffmanInput.end;\r\n          const bitmapEnd = huffmanInput.position + bitmapSize;\r\n          huffmanInput.end = bitmapEnd;\r\n          collectiveBitmap = decodeMMRBitmap(\r\n            huffmanInput,\r\n            totalWidth,\r\n            currentHeight,\r\n            false\r\n          );\r\n          huffmanInput.end = originalEnd;\r\n          huffmanInput.position = bitmapEnd;\r\n        }\r\n        const numberOfSymbolsDecoded = symbolWidths.length;\r\n        if (firstSymbol === numberOfSymbolsDecoded - 1) {\r\n          // collectiveBitmap is a single symbol.\r\n          newSymbols.push(collectiveBitmap);\r\n        } else {\r\n          // Divide collectiveBitmap into symbols.\r\n          let i,\r\n            y,\r\n            xMin = 0,\r\n            xMax,\r\n            bitmapWidth,\r\n            symbolBitmap;\r\n          for (i = firstSymbol; i < numberOfSymbolsDecoded; i++) {\r\n            bitmapWidth = symbolWidths[i];\r\n            xMax = xMin + bitmapWidth;\r\n            symbolBitmap = [];\r\n            for (y = 0; y < currentHeight; y++) {\r\n              symbolBitmap.push(collectiveBitmap[y].subarray(xMin, xMax));\r\n            }\r\n            newSymbols.push(symbolBitmap);\r\n            xMin = xMax;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // 6.5.10 Exported symbols\r\n    var exportedSymbols = [];\r\n    var flags = [],\r\n      currentFlag = false;\r\n    var totalSymbolsLength = symbols.length + numberOfNewSymbols;\r\n    while (flags.length < totalSymbolsLength) {\r\n      var runLength = huffman\r\n        ? tableB1.decode(huffmanInput)\r\n        : decodeInteger(contextCache, \"IAEX\", decoder);\r\n      while (runLength--) {\r\n        flags.push(currentFlag);\r\n      }\r\n      currentFlag = !currentFlag;\r\n    }\r\n    for (var i = 0, ii = symbols.length; i < ii; i++) {\r\n      if (flags[i]) {\r\n        exportedSymbols.push(symbols[i]);\r\n      }\r\n    }\r\n    for (var j = 0; j < numberOfNewSymbols; i++, j++) {\r\n      if (flags[i]) {\r\n        exportedSymbols.push(newSymbols[j]);\r\n      }\r\n    }\r\n    return exportedSymbols;\r\n  }\r\n\r\n  function decodeTextRegion(\r\n    huffman,\r\n    refinement,\r\n    width,\r\n    height,\r\n    defaultPixelValue,\r\n    numberOfSymbolInstances,\r\n    stripSize,\r\n    inputSymbols,\r\n    symbolCodeLength,\r\n    transposed,\r\n    dsOffset,\r\n    referenceCorner,\r\n    combinationOperator,\r\n    huffmanTables,\r\n    refinementTemplateIndex,\r\n    refinementAt,\r\n    decodingContext,\r\n    logStripSize,\r\n    huffmanInput\r\n  ) {\r\n    if (huffman && refinement) {\r\n      throw new Jbig2Error(\"refinement with Huffman is not supported\");\r\n    }\r\n\r\n    // Prepare bitmap\r\n    var bitmap = [];\r\n    var i, row;\r\n    for (i = 0; i < height; i++) {\r\n      row = new Uint8Array(width);\r\n      if (defaultPixelValue) {\r\n        for (var j = 0; j < width; j++) {\r\n          row[j] = defaultPixelValue;\r\n        }\r\n      }\r\n      bitmap.push(row);\r\n    }\r\n\r\n    var decoder = decodingContext.decoder;\r\n    var contextCache = decodingContext.contextCache;\r\n\r\n    var stripT = huffman\r\n      ? -huffmanTables.tableDeltaT.decode(huffmanInput)\r\n      : -decodeInteger(contextCache, \"IADT\", decoder); // 6.4.6\r\n    var firstS = 0;\r\n    i = 0;\r\n    while (i < numberOfSymbolInstances) {\r\n      var deltaT = huffman\r\n        ? huffmanTables.tableDeltaT.decode(huffmanInput)\r\n        : decodeInteger(contextCache, \"IADT\", decoder); // 6.4.6\r\n      stripT += deltaT;\r\n\r\n      var deltaFirstS = huffman\r\n        ? huffmanTables.tableFirstS.decode(huffmanInput)\r\n        : decodeInteger(contextCache, \"IAFS\", decoder); // 6.4.7\r\n      firstS += deltaFirstS;\r\n      var currentS = firstS;\r\n      do {\r\n        let currentT = 0; // 6.4.9\r\n        if (stripSize > 1) {\r\n          currentT = huffman\r\n            ? huffmanInput.readBits(logStripSize)\r\n            : decodeInteger(contextCache, \"IAIT\", decoder);\r\n        }\r\n        var t = stripSize * stripT + currentT;\r\n        var symbolId = huffman\r\n          ? huffmanTables.symbolIDTable.decode(huffmanInput)\r\n          : decodeIAID(contextCache, decoder, symbolCodeLength);\r\n        var applyRefinement =\r\n          refinement &&\r\n          (huffman\r\n            ? huffmanInput.readBit()\r\n            : decodeInteger(contextCache, \"IARI\", decoder));\r\n        var symbolBitmap = inputSymbols[symbolId];\r\n        var symbolWidth = symbolBitmap[0].length;\r\n        var symbolHeight = symbolBitmap.length;\r\n        if (applyRefinement) {\r\n          var rdw = decodeInteger(contextCache, \"IARDW\", decoder); // 6.4.11.1\r\n          var rdh = decodeInteger(contextCache, \"IARDH\", decoder); // 6.4.11.2\r\n          var rdx = decodeInteger(contextCache, \"IARDX\", decoder); // 6.4.11.3\r\n          var rdy = decodeInteger(contextCache, \"IARDY\", decoder); // 6.4.11.4\r\n          symbolWidth += rdw;\r\n          symbolHeight += rdh;\r\n          symbolBitmap = decodeRefinement(\r\n            symbolWidth,\r\n            symbolHeight,\r\n            refinementTemplateIndex,\r\n            symbolBitmap,\r\n            (rdw >> 1) + rdx,\r\n            (rdh >> 1) + rdy,\r\n            false,\r\n            refinementAt,\r\n            decodingContext\r\n          );\r\n        }\r\n        var offsetT = t - (referenceCorner & 1 ? 0 : symbolHeight - 1);\r\n        var offsetS = currentS - (referenceCorner & 2 ? symbolWidth - 1 : 0);\r\n        var s2, t2, symbolRow;\r\n        if (transposed) {\r\n          // Place Symbol Bitmap from T1,S1\r\n          for (s2 = 0; s2 < symbolHeight; s2++) {\r\n            row = bitmap[offsetS + s2];\r\n            if (!row) {\r\n              continue;\r\n            }\r\n            symbolRow = symbolBitmap[s2];\r\n            // To ignore Parts of Symbol bitmap which goes\r\n            // outside bitmap region\r\n            var maxWidth = Math.min(width - offsetT, symbolWidth);\r\n            switch (combinationOperator) {\r\n              case 0: // OR\r\n                for (t2 = 0; t2 < maxWidth; t2++) {\r\n                  row[offsetT + t2] |= symbolRow[t2];\r\n                }\r\n                break;\r\n              case 2: // XOR\r\n                for (t2 = 0; t2 < maxWidth; t2++) {\r\n                  row[offsetT + t2] ^= symbolRow[t2];\r\n                }\r\n                break;\r\n              default:\r\n                throw new Jbig2Error(\r\n                  `operator ${combinationOperator} is not supported`\r\n                );\r\n            }\r\n          }\r\n          currentS += symbolHeight - 1;\r\n        } else {\r\n          for (t2 = 0; t2 < symbolHeight; t2++) {\r\n            row = bitmap[offsetT + t2];\r\n            if (!row) {\r\n              continue;\r\n            }\r\n            symbolRow = symbolBitmap[t2];\r\n            switch (combinationOperator) {\r\n              case 0: // OR\r\n                for (s2 = 0; s2 < symbolWidth; s2++) {\r\n                  row[offsetS + s2] |= symbolRow[s2];\r\n                }\r\n                break;\r\n              case 2: // XOR\r\n                for (s2 = 0; s2 < symbolWidth; s2++) {\r\n                  row[offsetS + s2] ^= symbolRow[s2];\r\n                }\r\n                break;\r\n              default:\r\n                throw new Jbig2Error(\r\n                  `operator ${combinationOperator} is not supported`\r\n                );\r\n            }\r\n          }\r\n          currentS += symbolWidth - 1;\r\n        }\r\n        i++;\r\n        var deltaS = huffman\r\n          ? huffmanTables.tableDeltaS.decode(huffmanInput)\r\n          : decodeInteger(contextCache, \"IADS\", decoder); // 6.4.8\r\n        if (deltaS === null) {\r\n          break; // OOB\r\n        }\r\n        currentS += deltaS + dsOffset;\r\n      } while (true);\r\n    }\r\n    return bitmap;\r\n  }\r\n\r\n  function decodePatternDictionary(\r\n    mmr,\r\n    patternWidth,\r\n    patternHeight,\r\n    maxPatternIndex,\r\n    template,\r\n    decodingContext\r\n  ) {\r\n    const at = [];\r\n    if (!mmr) {\r\n      at.push({\r\n        x: -patternWidth,\r\n        y: 0,\r\n      });\r\n      if (template === 0) {\r\n        at.push({\r\n          x: -3,\r\n          y: -1,\r\n        });\r\n        at.push({\r\n          x: 2,\r\n          y: -2,\r\n        });\r\n        at.push({\r\n          x: -2,\r\n          y: -2,\r\n        });\r\n      }\r\n    }\r\n    const collectiveWidth = (maxPatternIndex + 1) * patternWidth;\r\n    const collectiveBitmap = decodeBitmap(\r\n      mmr,\r\n      collectiveWidth,\r\n      patternHeight,\r\n      template,\r\n      false,\r\n      null,\r\n      at,\r\n      decodingContext\r\n    );\r\n    // Divide collective bitmap into patterns.\r\n    const patterns = [];\r\n    for (let i = 0; i <= maxPatternIndex; i++) {\r\n      const patternBitmap = [];\r\n      const xMin = patternWidth * i;\r\n      const xMax = xMin + patternWidth;\r\n      for (let y = 0; y < patternHeight; y++) {\r\n        patternBitmap.push(collectiveBitmap[y].subarray(xMin, xMax));\r\n      }\r\n      patterns.push(patternBitmap);\r\n    }\r\n    return patterns;\r\n  }\r\n\r\n  function decodeHalftoneRegion(\r\n    mmr,\r\n    patterns,\r\n    template,\r\n    regionWidth,\r\n    regionHeight,\r\n    defaultPixelValue,\r\n    enableSkip,\r\n    combinationOperator,\r\n    gridWidth,\r\n    gridHeight,\r\n    gridOffsetX,\r\n    gridOffsetY,\r\n    gridVectorX,\r\n    gridVectorY,\r\n    decodingContext\r\n  ) {\r\n    const skip = null;\r\n    if (enableSkip) {\r\n      throw new Jbig2Error(\"skip is not supported\");\r\n    }\r\n    if (combinationOperator !== 0) {\r\n      throw new Jbig2Error(\r\n        \"operator \" +\r\n          combinationOperator +\r\n          \" is not supported in halftone region\"\r\n      );\r\n    }\r\n\r\n    // Prepare bitmap.\r\n    const regionBitmap = [];\r\n    let i, j, row;\r\n    for (i = 0; i < regionHeight; i++) {\r\n      row = new Uint8Array(regionWidth);\r\n      if (defaultPixelValue) {\r\n        for (j = 0; j < regionWidth; j++) {\r\n          row[j] = defaultPixelValue;\r\n        }\r\n      }\r\n      regionBitmap.push(row);\r\n    }\r\n\r\n    const numberOfPatterns = patterns.length;\r\n    const pattern0 = patterns[0];\r\n    const patternWidth = pattern0[0].length,\r\n      patternHeight = pattern0.length;\r\n    const bitsPerValue = log2(numberOfPatterns);\r\n    const at = [];\r\n    if (!mmr) {\r\n      at.push({\r\n        x: template <= 1 ? 3 : 2,\r\n        y: -1,\r\n      });\r\n      if (template === 0) {\r\n        at.push({\r\n          x: -3,\r\n          y: -1,\r\n        });\r\n        at.push({\r\n          x: 2,\r\n          y: -2,\r\n        });\r\n        at.push({\r\n          x: -2,\r\n          y: -2,\r\n        });\r\n      }\r\n    }\r\n    // Annex C. Gray-scale Image Decoding Procedure.\r\n    const grayScaleBitPlanes = [];\r\n    let mmrInput, bitmap;\r\n    if (mmr) {\r\n      // MMR bit planes are in one continuous stream. Only EOFB codes indicate\r\n      // the end of each bitmap, so EOFBs must be decoded.\r\n      mmrInput = new Reader(\r\n        decodingContext.data,\r\n        decodingContext.start,\r\n        decodingContext.end\r\n      );\r\n    }\r\n    for (i = bitsPerValue - 1; i >= 0; i--) {\r\n      if (mmr) {\r\n        bitmap = decodeMMRBitmap(mmrInput, gridWidth, gridHeight, true);\r\n      } else {\r\n        bitmap = decodeBitmap(\r\n          false,\r\n          gridWidth,\r\n          gridHeight,\r\n          template,\r\n          false,\r\n          skip,\r\n          at,\r\n          decodingContext\r\n        );\r\n      }\r\n      grayScaleBitPlanes[i] = bitmap;\r\n    }\r\n    // 6.6.5.2 Rendering the patterns.\r\n    let mg, ng, bit, patternIndex, patternBitmap, x, y, patternRow, regionRow;\r\n    for (mg = 0; mg < gridHeight; mg++) {\r\n      for (ng = 0; ng < gridWidth; ng++) {\r\n        bit = 0;\r\n        patternIndex = 0;\r\n        for (j = bitsPerValue - 1; j >= 0; j--) {\r\n          bit = grayScaleBitPlanes[j][mg][ng] ^ bit; // Gray decoding\r\n          patternIndex |= bit << j;\r\n        }\r\n        patternBitmap = patterns[patternIndex];\r\n        x = (gridOffsetX + mg * gridVectorY + ng * gridVectorX) >> 8;\r\n        y = (gridOffsetY + mg * gridVectorX - ng * gridVectorY) >> 8;\r\n        // Draw patternBitmap at (x, y).\r\n        if (\r\n          x >= 0 &&\r\n          x + patternWidth <= regionWidth &&\r\n          y >= 0 &&\r\n          y + patternHeight <= regionHeight\r\n        ) {\r\n          for (i = 0; i < patternHeight; i++) {\r\n            regionRow = regionBitmap[y + i];\r\n            patternRow = patternBitmap[i];\r\n            for (j = 0; j < patternWidth; j++) {\r\n              regionRow[x + j] |= patternRow[j];\r\n            }\r\n          }\r\n        } else {\r\n          let regionX, regionY;\r\n          for (i = 0; i < patternHeight; i++) {\r\n            regionY = y + i;\r\n            if (regionY < 0 || regionY >= regionHeight) {\r\n              continue;\r\n            }\r\n            regionRow = regionBitmap[regionY];\r\n            patternRow = patternBitmap[i];\r\n            for (j = 0; j < patternWidth; j++) {\r\n              regionX = x + j;\r\n              if (regionX >= 0 && regionX < regionWidth) {\r\n                regionRow[regionX] |= patternRow[j];\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return regionBitmap;\r\n  }\r\n\r\n  function readSegmentHeader(data, start) {\r\n    var segmentHeader = {};\r\n    segmentHeader.number = readUint32(data, start);\r\n    var flags = data[start + 4];\r\n    var segmentType = flags & 0x3f;\r\n    if (!SegmentTypes[segmentType]) {\r\n      throw new Jbig2Error(\"invalid segment type: \" + segmentType);\r\n    }\r\n    segmentHeader.type = segmentType;\r\n    segmentHeader.typeName = SegmentTypes[segmentType];\r\n    segmentHeader.deferredNonRetain = !!(flags & 0x80);\r\n\r\n    var pageAssociationFieldSize = !!(flags & 0x40);\r\n    var referredFlags = data[start + 5];\r\n    var referredToCount = (referredFlags >> 5) & 7;\r\n    var retainBits = [referredFlags & 31];\r\n    var position = start + 6;\r\n    if (referredFlags === 7) {\r\n      referredToCount = readUint32(data, position - 1) & 0x1fffffff;\r\n      position += 3;\r\n      var bytes = (referredToCount + 7) >> 3;\r\n      retainBits[0] = data[position++];\r\n      while (--bytes > 0) {\r\n        retainBits.push(data[position++]);\r\n      }\r\n    } else if (referredFlags === 5 || referredFlags === 6) {\r\n      throw new Jbig2Error(\"invalid referred-to flags\");\r\n    }\r\n\r\n    segmentHeader.retainBits = retainBits;\r\n\r\n    let referredToSegmentNumberSize = 4;\r\n    if (segmentHeader.number <= 256) {\r\n      referredToSegmentNumberSize = 1;\r\n    } else if (segmentHeader.number <= 65536) {\r\n      referredToSegmentNumberSize = 2;\r\n    }\r\n    var referredTo = [];\r\n    var i, ii;\r\n    for (i = 0; i < referredToCount; i++) {\r\n      let number;\r\n      if (referredToSegmentNumberSize === 1) {\r\n        number = data[position];\r\n      } else if (referredToSegmentNumberSize === 2) {\r\n        number = readUint16(data, position);\r\n      } else {\r\n        number = readUint32(data, position);\r\n      }\r\n      referredTo.push(number);\r\n      position += referredToSegmentNumberSize;\r\n    }\r\n    segmentHeader.referredTo = referredTo;\r\n    if (!pageAssociationFieldSize) {\r\n      segmentHeader.pageAssociation = data[position++];\r\n    } else {\r\n      segmentHeader.pageAssociation = readUint32(data, position);\r\n      position += 4;\r\n    }\r\n    segmentHeader.length = readUint32(data, position);\r\n    position += 4;\r\n\r\n    if (segmentHeader.length === 0xffffffff) {\r\n      // 7.2.7 Segment data length, unknown segment length\r\n      if (segmentType === 38) {\r\n        // ImmediateGenericRegion\r\n        var genericRegionInfo = readRegionSegmentInformation(data, position);\r\n        var genericRegionSegmentFlags =\r\n          data[position + RegionSegmentInformationFieldLength];\r\n        var genericRegionMmr = !!(genericRegionSegmentFlags & 1);\r\n        // searching for the segment end\r\n        var searchPatternLength = 6;\r\n        var searchPattern = new Uint8Array(searchPatternLength);\r\n        if (!genericRegionMmr) {\r\n          searchPattern[0] = 0xff;\r\n          searchPattern[1] = 0xac;\r\n        }\r\n        searchPattern[2] = (genericRegionInfo.height >>> 24) & 0xff;\r\n        searchPattern[3] = (genericRegionInfo.height >> 16) & 0xff;\r\n        searchPattern[4] = (genericRegionInfo.height >> 8) & 0xff;\r\n        searchPattern[5] = genericRegionInfo.height & 0xff;\r\n        for (i = position, ii = data.length; i < ii; i++) {\r\n          var j = 0;\r\n          while (j < searchPatternLength && searchPattern[j] === data[i + j]) {\r\n            j++;\r\n          }\r\n          if (j === searchPatternLength) {\r\n            segmentHeader.length = i + searchPatternLength;\r\n            break;\r\n          }\r\n        }\r\n        if (segmentHeader.length === 0xffffffff) {\r\n          throw new Jbig2Error(\"segment end was not found\");\r\n        }\r\n      } else {\r\n        throw new Jbig2Error(\"invalid unknown segment length\");\r\n      }\r\n    }\r\n    segmentHeader.headerEnd = position;\r\n    return segmentHeader;\r\n  }\r\n\r\n  function readSegments(header, data, start, end) {\r\n    var segments = [];\r\n    var position = start;\r\n    while (position < end) {\r\n      var segmentHeader = readSegmentHeader(data, position);\r\n      position = segmentHeader.headerEnd;\r\n      var segment = {\r\n        header: segmentHeader,\r\n        data,\r\n      };\r\n      if (!header.randomAccess) {\r\n        segment.start = position;\r\n        position += segmentHeader.length;\r\n        segment.end = position;\r\n      }\r\n      segments.push(segment);\r\n      if (segmentHeader.type === 51) {\r\n        break; // end of file is found\r\n      }\r\n    }\r\n    if (header.randomAccess) {\r\n      for (var i = 0, ii = segments.length; i < ii; i++) {\r\n        segments[i].start = position;\r\n        position += segments[i].header.length;\r\n        segments[i].end = position;\r\n      }\r\n    }\r\n    return segments;\r\n  }\r\n\r\n  // 7.4.1 Region segment information field\r\n  function readRegionSegmentInformation(data, start) {\r\n    return {\r\n      width: readUint32(data, start),\r\n      height: readUint32(data, start + 4),\r\n      x: readUint32(data, start + 8),\r\n      y: readUint32(data, start + 12),\r\n      combinationOperator: data[start + 16] & 7,\r\n    };\r\n  }\r\n  var RegionSegmentInformationFieldLength = 17;\r\n\r\n  function processSegment(segment, visitor) {\r\n    var header = segment.header;\r\n\r\n    var data = segment.data,\r\n      position = segment.start,\r\n      end = segment.end;\r\n    var args, at, i, atLength;\r\n    switch (header.type) {\r\n      case 0: // SymbolDictionary\r\n        // 7.4.2 Symbol dictionary segment syntax\r\n        var dictionary = {};\r\n        var dictionaryFlags = readUint16(data, position); // 7.4.2.1.1\r\n        dictionary.huffman = !!(dictionaryFlags & 1);\r\n        dictionary.refinement = !!(dictionaryFlags & 2);\r\n        dictionary.huffmanDHSelector = (dictionaryFlags >> 2) & 3;\r\n        dictionary.huffmanDWSelector = (dictionaryFlags >> 4) & 3;\r\n        dictionary.bitmapSizeSelector = (dictionaryFlags >> 6) & 1;\r\n        dictionary.aggregationInstancesSelector = (dictionaryFlags >> 7) & 1;\r\n        dictionary.bitmapCodingContextUsed = !!(dictionaryFlags & 256);\r\n        dictionary.bitmapCodingContextRetained = !!(dictionaryFlags & 512);\r\n        dictionary.template = (dictionaryFlags >> 10) & 3;\r\n        dictionary.refinementTemplate = (dictionaryFlags >> 12) & 1;\r\n        position += 2;\r\n        if (!dictionary.huffman) {\r\n          atLength = dictionary.template === 0 ? 4 : 1;\r\n          at = [];\r\n          for (i = 0; i < atLength; i++) {\r\n            at.push({\r\n              x: readInt8(data, position),\r\n              y: readInt8(data, position + 1),\r\n            });\r\n            position += 2;\r\n          }\r\n          dictionary.at = at;\r\n        }\r\n        if (dictionary.refinement && !dictionary.refinementTemplate) {\r\n          at = [];\r\n          for (i = 0; i < 2; i++) {\r\n            at.push({\r\n              x: readInt8(data, position),\r\n              y: readInt8(data, position + 1),\r\n            });\r\n            position += 2;\r\n          }\r\n          dictionary.refinementAt = at;\r\n        }\r\n        dictionary.numberOfExportedSymbols = readUint32(data, position);\r\n        position += 4;\r\n        dictionary.numberOfNewSymbols = readUint32(data, position);\r\n        position += 4;\r\n        args = [\r\n          dictionary,\r\n          header.number,\r\n          header.referredTo,\r\n          data,\r\n          position,\r\n          end,\r\n        ];\r\n        break;\r\n      case 6: // ImmediateTextRegion\r\n      case 7: // ImmediateLosslessTextRegion\r\n        var textRegion = {};\r\n        textRegion.info = readRegionSegmentInformation(data, position);\r\n        position += RegionSegmentInformationFieldLength;\r\n        var textRegionSegmentFlags = readUint16(data, position);\r\n        position += 2;\r\n        textRegion.huffman = !!(textRegionSegmentFlags & 1);\r\n        textRegion.refinement = !!(textRegionSegmentFlags & 2);\r\n        textRegion.logStripSize = (textRegionSegmentFlags >> 2) & 3;\r\n        textRegion.stripSize = 1 << textRegion.logStripSize;\r\n        textRegion.referenceCorner = (textRegionSegmentFlags >> 4) & 3;\r\n        textRegion.transposed = !!(textRegionSegmentFlags & 64);\r\n        textRegion.combinationOperator = (textRegionSegmentFlags >> 7) & 3;\r\n        textRegion.defaultPixelValue = (textRegionSegmentFlags >> 9) & 1;\r\n        textRegion.dsOffset = (textRegionSegmentFlags << 17) >> 27;\r\n        textRegion.refinementTemplate = (textRegionSegmentFlags >> 15) & 1;\r\n        if (textRegion.huffman) {\r\n          var textRegionHuffmanFlags = readUint16(data, position);\r\n          position += 2;\r\n          textRegion.huffmanFS = textRegionHuffmanFlags & 3;\r\n          textRegion.huffmanDS = (textRegionHuffmanFlags >> 2) & 3;\r\n          textRegion.huffmanDT = (textRegionHuffmanFlags >> 4) & 3;\r\n          textRegion.huffmanRefinementDW = (textRegionHuffmanFlags >> 6) & 3;\r\n          textRegion.huffmanRefinementDH = (textRegionHuffmanFlags >> 8) & 3;\r\n          textRegion.huffmanRefinementDX = (textRegionHuffmanFlags >> 10) & 3;\r\n          textRegion.huffmanRefinementDY = (textRegionHuffmanFlags >> 12) & 3;\r\n          textRegion.huffmanRefinementSizeSelector = !!(\r\n            textRegionHuffmanFlags & 0x4000\r\n          );\r\n        }\r\n        if (textRegion.refinement && !textRegion.refinementTemplate) {\r\n          at = [];\r\n          for (i = 0; i < 2; i++) {\r\n            at.push({\r\n              x: readInt8(data, position),\r\n              y: readInt8(data, position + 1),\r\n            });\r\n            position += 2;\r\n          }\r\n          textRegion.refinementAt = at;\r\n        }\r\n        textRegion.numberOfSymbolInstances = readUint32(data, position);\r\n        position += 4;\r\n        args = [textRegion, header.referredTo, data, position, end];\r\n        break;\r\n      case 16: // PatternDictionary\r\n        // 7.4.4. Pattern dictionary segment syntax\r\n        const patternDictionary = {};\r\n        const patternDictionaryFlags = data[position++];\r\n        patternDictionary.mmr = !!(patternDictionaryFlags & 1);\r\n        patternDictionary.template = (patternDictionaryFlags >> 1) & 3;\r\n        patternDictionary.patternWidth = data[position++];\r\n        patternDictionary.patternHeight = data[position++];\r\n        patternDictionary.maxPatternIndex = readUint32(data, position);\r\n        position += 4;\r\n        args = [patternDictionary, header.number, data, position, end];\r\n        break;\r\n      case 22: // ImmediateHalftoneRegion\r\n      case 23: // ImmediateLosslessHalftoneRegion\r\n        // 7.4.5 Halftone region segment syntax\r\n        const halftoneRegion = {};\r\n        halftoneRegion.info = readRegionSegmentInformation(data, position);\r\n        position += RegionSegmentInformationFieldLength;\r\n        const halftoneRegionFlags = data[position++];\r\n        halftoneRegion.mmr = !!(halftoneRegionFlags & 1);\r\n        halftoneRegion.template = (halftoneRegionFlags >> 1) & 3;\r\n        halftoneRegion.enableSkip = !!(halftoneRegionFlags & 8);\r\n        halftoneRegion.combinationOperator = (halftoneRegionFlags >> 4) & 7;\r\n        halftoneRegion.defaultPixelValue = (halftoneRegionFlags >> 7) & 1;\r\n        halftoneRegion.gridWidth = readUint32(data, position);\r\n        position += 4;\r\n        halftoneRegion.gridHeight = readUint32(data, position);\r\n        position += 4;\r\n        halftoneRegion.gridOffsetX = readUint32(data, position) & 0xffffffff;\r\n        position += 4;\r\n        halftoneRegion.gridOffsetY = readUint32(data, position) & 0xffffffff;\r\n        position += 4;\r\n        halftoneRegion.gridVectorX = readUint16(data, position);\r\n        position += 2;\r\n        halftoneRegion.gridVectorY = readUint16(data, position);\r\n        position += 2;\r\n        args = [halftoneRegion, header.referredTo, data, position, end];\r\n        break;\r\n      case 38: // ImmediateGenericRegion\r\n      case 39: // ImmediateLosslessGenericRegion\r\n        var genericRegion = {};\r\n        genericRegion.info = readRegionSegmentInformation(data, position);\r\n        position += RegionSegmentInformationFieldLength;\r\n        var genericRegionSegmentFlags = data[position++];\r\n        genericRegion.mmr = !!(genericRegionSegmentFlags & 1);\r\n        genericRegion.template = (genericRegionSegmentFlags >> 1) & 3;\r\n        genericRegion.prediction = !!(genericRegionSegmentFlags & 8);\r\n        if (!genericRegion.mmr) {\r\n          atLength = genericRegion.template === 0 ? 4 : 1;\r\n          at = [];\r\n          for (i = 0; i < atLength; i++) {\r\n            at.push({\r\n              x: readInt8(data, position),\r\n              y: readInt8(data, position + 1),\r\n            });\r\n            position += 2;\r\n          }\r\n          genericRegion.at = at;\r\n        }\r\n        args = [genericRegion, data, position, end];\r\n        break;\r\n      case 48: // PageInformation\r\n        var pageInfo = {\r\n          width: readUint32(data, position),\r\n          height: readUint32(data, position + 4),\r\n          resolutionX: readUint32(data, position + 8),\r\n          resolutionY: readUint32(data, position + 12),\r\n        };\r\n        if (pageInfo.height === 0xffffffff) {\r\n          delete pageInfo.height;\r\n        }\r\n        var pageSegmentFlags = data[position + 16];\r\n        readUint16(data, position + 17); // pageStripingInformation\r\n        pageInfo.lossless = !!(pageSegmentFlags & 1);\r\n        pageInfo.refinement = !!(pageSegmentFlags & 2);\r\n        pageInfo.defaultPixelValue = (pageSegmentFlags >> 2) & 1;\r\n        pageInfo.combinationOperator = (pageSegmentFlags >> 3) & 3;\r\n        pageInfo.requiresBuffer = !!(pageSegmentFlags & 32);\r\n        pageInfo.combinationOperatorOverride = !!(pageSegmentFlags & 64);\r\n        args = [pageInfo];\r\n        break;\r\n      case 49: // EndOfPage\r\n        break;\r\n      case 50: // EndOfStripe\r\n        break;\r\n      case 51: // EndOfFile\r\n        break;\r\n      case 53: // Tables\r\n        args = [header.number, data, position, end];\r\n        break;\r\n      case 62: // 7.4.15 defines 2 extension types which\r\n        // are comments and can be ignored.\r\n        break;\r\n      default:\r\n        throw new Jbig2Error(\r\n          `segment type ${header.typeName}(${header.type})` +\r\n            \" is not implemented\"\r\n        );\r\n    }\r\n    var callbackName = \"on\" + header.typeName;\r\n    if (callbackName in visitor) {\r\n      visitor[callbackName].apply(visitor, args);\r\n    }\r\n  }\r\n\r\n  function processSegments(segments, visitor) {\r\n    for (var i = 0, ii = segments.length; i < ii; i++) {\r\n      processSegment(segments[i], visitor);\r\n    }\r\n  }\r\n\r\n  function parseJbig2Chunks(chunks) {\r\n    var visitor = new SimpleSegmentVisitor();\r\n    for (var i = 0, ii = chunks.length; i < ii; i++) {\r\n      var chunk = chunks[i];\r\n      var segments = readSegments({}, chunk.data, chunk.start, chunk.end);\r\n      processSegments(segments, visitor);\r\n    }\r\n    return visitor.buffer;\r\n  }\r\n\r\n  function parseJbig2(data) {\r\n    const end = data.length;\r\n    let position = 0;\r\n\r\n    if (\r\n      data[position] !== 0x97 ||\r\n      data[position + 1] !== 0x4a ||\r\n      data[position + 2] !== 0x42 ||\r\n      data[position + 3] !== 0x32 ||\r\n      data[position + 4] !== 0x0d ||\r\n      data[position + 5] !== 0x0a ||\r\n      data[position + 6] !== 0x1a ||\r\n      data[position + 7] !== 0x0a\r\n    ) {\r\n      throw new Jbig2Error(\"parseJbig2 - invalid header.\");\r\n    }\r\n\r\n    const header = Object.create(null);\r\n    position += 8;\r\n    const flags = data[position++];\r\n    header.randomAccess = !(flags & 1);\r\n    if (!(flags & 2)) {\r\n      header.numberOfPages = readUint32(data, position);\r\n      position += 4;\r\n    }\r\n\r\n    const segments = readSegments(header, data, position, end);\r\n    const visitor = new SimpleSegmentVisitor();\r\n    processSegments(segments, visitor);\r\n\r\n    const { width, height } = visitor.currentPageInfo;\r\n    const bitPacked = visitor.buffer;\r\n    const imgData = new Uint8ClampedArray(width * height);\r\n    let q = 0,\r\n      k = 0;\r\n    for (let i = 0; i < height; i++) {\r\n      let mask = 0,\r\n        buffer;\r\n      for (let j = 0; j < width; j++) {\r\n        if (!mask) {\r\n          mask = 128;\r\n          buffer = bitPacked[k++];\r\n        }\r\n        imgData[q++] = buffer & mask ? 0 : 255;\r\n        mask >>= 1;\r\n      }\r\n    }\r\n\r\n    return { imgData, width, height };\r\n  }\r\n\r\n  function SimpleSegmentVisitor() {}\r\n\r\n  SimpleSegmentVisitor.prototype = {\r\n    onPageInformation: function SimpleSegmentVisitor_onPageInformation(info) {\r\n      this.currentPageInfo = info;\r\n      var rowSize = (info.width + 7) >> 3;\r\n      var buffer = new Uint8ClampedArray(rowSize * info.height);\r\n      // The contents of ArrayBuffers are initialized to 0.\r\n      // Fill the buffer with 0xFF only if info.defaultPixelValue is set\r\n      if (info.defaultPixelValue) {\r\n        for (var i = 0, ii = buffer.length; i < ii; i++) {\r\n          buffer[i] = 0xff;\r\n        }\r\n      }\r\n      this.buffer = buffer;\r\n    },\r\n    drawBitmap: function SimpleSegmentVisitor_drawBitmap(regionInfo, bitmap) {\r\n      var pageInfo = this.currentPageInfo;\r\n      var width = regionInfo.width,\r\n        height = regionInfo.height;\r\n      var rowSize = (pageInfo.width + 7) >> 3;\r\n      var combinationOperator = pageInfo.combinationOperatorOverride\r\n        ? regionInfo.combinationOperator\r\n        : pageInfo.combinationOperator;\r\n      var buffer = this.buffer;\r\n      var mask0 = 128 >> (regionInfo.x & 7);\r\n      var offset0 = regionInfo.y * rowSize + (regionInfo.x >> 3);\r\n      var i, j, mask, offset;\r\n      switch (combinationOperator) {\r\n        case 0: // OR\r\n          for (i = 0; i < height; i++) {\r\n            mask = mask0;\r\n            offset = offset0;\r\n            for (j = 0; j < width; j++) {\r\n              if (bitmap[i][j]) {\r\n                buffer[offset] |= mask;\r\n              }\r\n              mask >>= 1;\r\n              if (!mask) {\r\n                mask = 128;\r\n                offset++;\r\n              }\r\n            }\r\n            offset0 += rowSize;\r\n          }\r\n          break;\r\n        case 2: // XOR\r\n          for (i = 0; i < height; i++) {\r\n            mask = mask0;\r\n            offset = offset0;\r\n            for (j = 0; j < width; j++) {\r\n              if (bitmap[i][j]) {\r\n                buffer[offset] ^= mask;\r\n              }\r\n              mask >>= 1;\r\n              if (!mask) {\r\n                mask = 128;\r\n                offset++;\r\n              }\r\n            }\r\n            offset0 += rowSize;\r\n          }\r\n          break;\r\n        default:\r\n          throw new Jbig2Error(\r\n            `operator ${combinationOperator} is not supported`\r\n          );\r\n      }\r\n    },\r\n    onImmediateGenericRegion: function SimpleSegmentVisitor_onImmediateGenericRegion(\r\n      region,\r\n      data,\r\n      start,\r\n      end\r\n    ) {\r\n      var regionInfo = region.info;\r\n      var decodingContext = new DecodingContext(data, start, end);\r\n      var bitmap = decodeBitmap(\r\n        region.mmr,\r\n        regionInfo.width,\r\n        regionInfo.height,\r\n        region.template,\r\n        region.prediction,\r\n        null,\r\n        region.at,\r\n        decodingContext\r\n      );\r\n      this.drawBitmap(regionInfo, bitmap);\r\n    },\r\n    onImmediateLosslessGenericRegion: function SimpleSegmentVisitor_onImmediateLosslessGenericRegion() {\r\n      this.onImmediateGenericRegion.apply(this, arguments);\r\n    },\r\n    onSymbolDictionary: function SimpleSegmentVisitor_onSymbolDictionary(\r\n      dictionary,\r\n      currentSegment,\r\n      referredSegments,\r\n      data,\r\n      start,\r\n      end\r\n    ) {\r\n      let huffmanTables, huffmanInput;\r\n      if (dictionary.huffman) {\r\n        huffmanTables = getSymbolDictionaryHuffmanTables(\r\n          dictionary,\r\n          referredSegments,\r\n          this.customTables\r\n        );\r\n        huffmanInput = new Reader(data, start, end);\r\n      }\r\n\r\n      // Combines exported symbols from all referred segments\r\n      var symbols = this.symbols;\r\n      if (!symbols) {\r\n        this.symbols = symbols = {};\r\n      }\r\n\r\n      var inputSymbols = [];\r\n      for (var i = 0, ii = referredSegments.length; i < ii; i++) {\r\n        const referredSymbols = symbols[referredSegments[i]];\r\n        // referredSymbols is undefined when we have a reference to a Tables\r\n        // segment instead of a SymbolDictionary.\r\n        if (referredSymbols) {\r\n          inputSymbols = inputSymbols.concat(referredSymbols);\r\n        }\r\n      }\r\n\r\n      var decodingContext = new DecodingContext(data, start, end);\r\n      symbols[currentSegment] = decodeSymbolDictionary(\r\n        dictionary.huffman,\r\n        dictionary.refinement,\r\n        inputSymbols,\r\n        dictionary.numberOfNewSymbols,\r\n        dictionary.numberOfExportedSymbols,\r\n        huffmanTables,\r\n        dictionary.template,\r\n        dictionary.at,\r\n        dictionary.refinementTemplate,\r\n        dictionary.refinementAt,\r\n        decodingContext,\r\n        huffmanInput\r\n      );\r\n    },\r\n    onImmediateTextRegion: function SimpleSegmentVisitor_onImmediateTextRegion(\r\n      region,\r\n      referredSegments,\r\n      data,\r\n      start,\r\n      end\r\n    ) {\r\n      var regionInfo = region.info;\r\n      let huffmanTables, huffmanInput;\r\n\r\n      // Combines exported symbols from all referred segments\r\n      var symbols = this.symbols;\r\n      var inputSymbols = [];\r\n      for (var i = 0, ii = referredSegments.length; i < ii; i++) {\r\n        const referredSymbols = symbols[referredSegments[i]];\r\n        // referredSymbols is undefined when we have a reference to a Tables\r\n        // segment instead of a SymbolDictionary.\r\n        if (referredSymbols) {\r\n          inputSymbols = inputSymbols.concat(referredSymbols);\r\n        }\r\n      }\r\n      var symbolCodeLength = log2(inputSymbols.length);\r\n      if (region.huffman) {\r\n        huffmanInput = new Reader(data, start, end);\r\n        huffmanTables = getTextRegionHuffmanTables(\r\n          region,\r\n          referredSegments,\r\n          this.customTables,\r\n          inputSymbols.length,\r\n          huffmanInput\r\n        );\r\n      }\r\n\r\n      var decodingContext = new DecodingContext(data, start, end);\r\n      var bitmap = decodeTextRegion(\r\n        region.huffman,\r\n        region.refinement,\r\n        regionInfo.width,\r\n        regionInfo.height,\r\n        region.defaultPixelValue,\r\n        region.numberOfSymbolInstances,\r\n        region.stripSize,\r\n        inputSymbols,\r\n        symbolCodeLength,\r\n        region.transposed,\r\n        region.dsOffset,\r\n        region.referenceCorner,\r\n        region.combinationOperator,\r\n        huffmanTables,\r\n        region.refinementTemplate,\r\n        region.refinementAt,\r\n        decodingContext,\r\n        region.logStripSize,\r\n        huffmanInput\r\n      );\r\n      this.drawBitmap(regionInfo, bitmap);\r\n    },\r\n    onImmediateLosslessTextRegion: function SimpleSegmentVisitor_onImmediateLosslessTextRegion() {\r\n      this.onImmediateTextRegion.apply(this, arguments);\r\n    },\r\n    onPatternDictionary(dictionary, currentSegment, data, start, end) {\r\n      let patterns = this.patterns;\r\n      if (!patterns) {\r\n        this.patterns = patterns = {};\r\n      }\r\n      const decodingContext = new DecodingContext(data, start, end);\r\n      patterns[currentSegment] = decodePatternDictionary(\r\n        dictionary.mmr,\r\n        dictionary.patternWidth,\r\n        dictionary.patternHeight,\r\n        dictionary.maxPatternIndex,\r\n        dictionary.template,\r\n        decodingContext\r\n      );\r\n    },\r\n    onImmediateHalftoneRegion(region, referredSegments, data, start, end) {\r\n      // HalftoneRegion refers to exactly one PatternDictionary.\r\n      const patterns = this.patterns[referredSegments[0]];\r\n      const regionInfo = region.info;\r\n      const decodingContext = new DecodingContext(data, start, end);\r\n      const bitmap = decodeHalftoneRegion(\r\n        region.mmr,\r\n        patterns,\r\n        region.template,\r\n        regionInfo.width,\r\n        regionInfo.height,\r\n        region.defaultPixelValue,\r\n        region.enableSkip,\r\n        region.combinationOperator,\r\n        region.gridWidth,\r\n        region.gridHeight,\r\n        region.gridOffsetX,\r\n        region.gridOffsetY,\r\n        region.gridVectorX,\r\n        region.gridVectorY,\r\n        decodingContext\r\n      );\r\n      this.drawBitmap(regionInfo, bitmap);\r\n    },\r\n    onImmediateLosslessHalftoneRegion() {\r\n      this.onImmediateHalftoneRegion.apply(this, arguments);\r\n    },\r\n    onTables(currentSegment, data, start, end) {\r\n      let customTables = this.customTables;\r\n      if (!customTables) {\r\n        this.customTables = customTables = {};\r\n      }\r\n      customTables[currentSegment] = decodeTablesSegment(data, start, end);\r\n    },\r\n  };\r\n\r\n  function HuffmanLine(lineData) {\r\n    if (lineData.length === 2) {\r\n      // OOB line.\r\n      this.isOOB = true;\r\n      this.rangeLow = 0;\r\n      this.prefixLength = lineData[0];\r\n      this.rangeLength = 0;\r\n      this.prefixCode = lineData[1];\r\n      this.isLowerRange = false;\r\n    } else {\r\n      // Normal, upper range or lower range line.\r\n      // Upper range lines are processed like normal lines.\r\n      this.isOOB = false;\r\n      this.rangeLow = lineData[0];\r\n      this.prefixLength = lineData[1];\r\n      this.rangeLength = lineData[2];\r\n      this.prefixCode = lineData[3];\r\n      this.isLowerRange = lineData[4] === \"lower\";\r\n    }\r\n  }\r\n\r\n  function HuffmanTreeNode(line) {\r\n    this.children = [];\r\n    if (line) {\r\n      // Leaf node\r\n      this.isLeaf = true;\r\n      this.rangeLength = line.rangeLength;\r\n      this.rangeLow = line.rangeLow;\r\n      this.isLowerRange = line.isLowerRange;\r\n      this.isOOB = line.isOOB;\r\n    } else {\r\n      // Intermediate or root node\r\n      this.isLeaf = false;\r\n    }\r\n  }\r\n\r\n  HuffmanTreeNode.prototype = {\r\n    buildTree(line, shift) {\r\n      const bit = (line.prefixCode >> shift) & 1;\r\n      if (shift <= 0) {\r\n        // Create a leaf node.\r\n        this.children[bit] = new HuffmanTreeNode(line);\r\n      } else {\r\n        // Create an intermediate node and continue recursively.\r\n        let node = this.children[bit];\r\n        if (!node) {\r\n          this.children[bit] = node = new HuffmanTreeNode(null);\r\n        }\r\n        node.buildTree(line, shift - 1);\r\n      }\r\n    },\r\n    decodeNode(reader) {\r\n      if (this.isLeaf) {\r\n        if (this.isOOB) {\r\n          return null;\r\n        }\r\n        const htOffset = reader.readBits(this.rangeLength);\r\n        return this.rangeLow + (this.isLowerRange ? -htOffset : htOffset);\r\n      }\r\n      const node = this.children[reader.readBit()];\r\n      if (!node) {\r\n        throw new Jbig2Error(\"invalid Huffman data\");\r\n      }\r\n      return node.decodeNode(reader);\r\n    },\r\n  };\r\n\r\n  function HuffmanTable(lines, prefixCodesDone) {\r\n    if (!prefixCodesDone) {\r\n      this.assignPrefixCodes(lines);\r\n    }\r\n    // Create Huffman tree.\r\n    this.rootNode = new HuffmanTreeNode(null);\r\n    for (let i = 0, ii = lines.length; i < ii; i++) {\r\n      const line = lines[i];\r\n      if (line.prefixLength > 0) {\r\n        this.rootNode.buildTree(line, line.prefixLength - 1);\r\n      }\r\n    }\r\n  }\r\n\r\n  HuffmanTable.prototype = {\r\n    decode(reader) {\r\n      return this.rootNode.decodeNode(reader);\r\n    },\r\n    assignPrefixCodes(lines) {\r\n      // Annex B.3 Assigning the prefix codes.\r\n      const linesLength = lines.length;\r\n      let prefixLengthMax = 0;\r\n      for (let i = 0; i < linesLength; i++) {\r\n        prefixLengthMax = Math.max(prefixLengthMax, lines[i].prefixLength);\r\n      }\r\n\r\n      const histogram = new Uint32Array(prefixLengthMax + 1);\r\n      for (let i = 0; i < linesLength; i++) {\r\n        histogram[lines[i].prefixLength]++;\r\n      }\r\n      let currentLength = 1,\r\n        firstCode = 0,\r\n        currentCode,\r\n        currentTemp,\r\n        line;\r\n      histogram[0] = 0;\r\n\r\n      while (currentLength <= prefixLengthMax) {\r\n        firstCode = (firstCode + histogram[currentLength - 1]) << 1;\r\n        currentCode = firstCode;\r\n        currentTemp = 0;\r\n        while (currentTemp < linesLength) {\r\n          line = lines[currentTemp];\r\n          if (line.prefixLength === currentLength) {\r\n            line.prefixCode = currentCode;\r\n            currentCode++;\r\n          }\r\n          currentTemp++;\r\n        }\r\n        currentLength++;\r\n      }\r\n    },\r\n  };\r\n\r\n  function decodeTablesSegment(data, start, end) {\r\n    // Decodes a Tables segment, i.e., a custom Huffman table.\r\n    // Annex B.2 Code table structure.\r\n    const flags = data[start];\r\n    const lowestValue = readUint32(data, start + 1) & 0xffffffff;\r\n    const highestValue = readUint32(data, start + 5) & 0xffffffff;\r\n    const reader = new Reader(data, start + 9, end);\r\n\r\n    const prefixSizeBits = ((flags >> 1) & 7) + 1;\r\n    const rangeSizeBits = ((flags >> 4) & 7) + 1;\r\n    const lines = [];\r\n    let prefixLength,\r\n      rangeLength,\r\n      currentRangeLow = lowestValue;\r\n\r\n    // Normal table lines\r\n    do {\r\n      prefixLength = reader.readBits(prefixSizeBits);\r\n      rangeLength = reader.readBits(rangeSizeBits);\r\n      lines.push(\r\n        new HuffmanLine([currentRangeLow, prefixLength, rangeLength, 0])\r\n      );\r\n      currentRangeLow += 1 << rangeLength;\r\n    } while (currentRangeLow < highestValue);\r\n\r\n    // Lower range table line\r\n    prefixLength = reader.readBits(prefixSizeBits);\r\n    lines.push(\r\n      new HuffmanLine([lowestValue - 1, prefixLength, 32, 0, \"lower\"])\r\n    );\r\n\r\n    // Upper range table line\r\n    prefixLength = reader.readBits(prefixSizeBits);\r\n    lines.push(new HuffmanLine([highestValue, prefixLength, 32, 0]));\r\n\r\n    if (flags & 1) {\r\n      // Out-of-band table line\r\n      prefixLength = reader.readBits(prefixSizeBits);\r\n      lines.push(new HuffmanLine([prefixLength, 0]));\r\n    }\r\n\r\n    return new HuffmanTable(lines, false);\r\n  }\r\n\r\n  const standardTablesCache = {};\r\n\r\n  function getStandardTable(number) {\r\n    // Annex B.5 Standard Huffman tables.\r\n    let table = standardTablesCache[number];\r\n    if (table) {\r\n      return table;\r\n    }\r\n    let lines;\r\n    switch (number) {\r\n      case 1:\r\n        lines = [\r\n          [0, 1, 4, 0x0],\r\n          [16, 2, 8, 0x2],\r\n          [272, 3, 16, 0x6],\r\n          [65808, 3, 32, 0x7], // upper\r\n        ];\r\n        break;\r\n      case 2:\r\n        lines = [\r\n          [0, 1, 0, 0x0],\r\n          [1, 2, 0, 0x2],\r\n          [2, 3, 0, 0x6],\r\n          [3, 4, 3, 0xe],\r\n          [11, 5, 6, 0x1e],\r\n          [75, 6, 32, 0x3e], // upper\r\n          [6, 0x3f], // OOB\r\n        ];\r\n        break;\r\n      case 3:\r\n        lines = [\r\n          [-256, 8, 8, 0xfe],\r\n          [0, 1, 0, 0x0],\r\n          [1, 2, 0, 0x2],\r\n          [2, 3, 0, 0x6],\r\n          [3, 4, 3, 0xe],\r\n          [11, 5, 6, 0x1e],\r\n          [-257, 8, 32, 0xff, \"lower\"],\r\n          [75, 7, 32, 0x7e], // upper\r\n          [6, 0x3e], // OOB\r\n        ];\r\n        break;\r\n      case 4:\r\n        lines = [\r\n          [1, 1, 0, 0x0],\r\n          [2, 2, 0, 0x2],\r\n          [3, 3, 0, 0x6],\r\n          [4, 4, 3, 0xe],\r\n          [12, 5, 6, 0x1e],\r\n          [76, 5, 32, 0x1f], // upper\r\n        ];\r\n        break;\r\n      case 5:\r\n        lines = [\r\n          [-255, 7, 8, 0x7e],\r\n          [1, 1, 0, 0x0],\r\n          [2, 2, 0, 0x2],\r\n          [3, 3, 0, 0x6],\r\n          [4, 4, 3, 0xe],\r\n          [12, 5, 6, 0x1e],\r\n          [-256, 7, 32, 0x7f, \"lower\"],\r\n          [76, 6, 32, 0x3e], // upper\r\n        ];\r\n        break;\r\n      case 6:\r\n        lines = [\r\n          [-2048, 5, 10, 0x1c],\r\n          [-1024, 4, 9, 0x8],\r\n          [-512, 4, 8, 0x9],\r\n          [-256, 4, 7, 0xa],\r\n          [-128, 5, 6, 0x1d],\r\n          [-64, 5, 5, 0x1e],\r\n          [-32, 4, 5, 0xb],\r\n          [0, 2, 7, 0x0],\r\n          [128, 3, 7, 0x2],\r\n          [256, 3, 8, 0x3],\r\n          [512, 4, 9, 0xc],\r\n          [1024, 4, 10, 0xd],\r\n          [-2049, 6, 32, 0x3e, \"lower\"],\r\n          [2048, 6, 32, 0x3f], // upper\r\n        ];\r\n        break;\r\n      case 7:\r\n        lines = [\r\n          [-1024, 4, 9, 0x8],\r\n          [-512, 3, 8, 0x0],\r\n          [-256, 4, 7, 0x9],\r\n          [-128, 5, 6, 0x1a],\r\n          [-64, 5, 5, 0x1b],\r\n          [-32, 4, 5, 0xa],\r\n          [0, 4, 5, 0xb],\r\n          [32, 5, 5, 0x1c],\r\n          [64, 5, 6, 0x1d],\r\n          [128, 4, 7, 0xc],\r\n          [256, 3, 8, 0x1],\r\n          [512, 3, 9, 0x2],\r\n          [1024, 3, 10, 0x3],\r\n          [-1025, 5, 32, 0x1e, \"lower\"],\r\n          [2048, 5, 32, 0x1f], // upper\r\n        ];\r\n        break;\r\n      case 8:\r\n        lines = [\r\n          [-15, 8, 3, 0xfc],\r\n          [-7, 9, 1, 0x1fc],\r\n          [-5, 8, 1, 0xfd],\r\n          [-3, 9, 0, 0x1fd],\r\n          [-2, 7, 0, 0x7c],\r\n          [-1, 4, 0, 0xa],\r\n          [0, 2, 1, 0x0],\r\n          [2, 5, 0, 0x1a],\r\n          [3, 6, 0, 0x3a],\r\n          [4, 3, 4, 0x4],\r\n          [20, 6, 1, 0x3b],\r\n          [22, 4, 4, 0xb],\r\n          [38, 4, 5, 0xc],\r\n          [70, 5, 6, 0x1b],\r\n          [134, 5, 7, 0x1c],\r\n          [262, 6, 7, 0x3c],\r\n          [390, 7, 8, 0x7d],\r\n          [646, 6, 10, 0x3d],\r\n          [-16, 9, 32, 0x1fe, \"lower\"],\r\n          [1670, 9, 32, 0x1ff], // upper\r\n          [2, 0x1], // OOB\r\n        ];\r\n        break;\r\n      case 9:\r\n        lines = [\r\n          [-31, 8, 4, 0xfc],\r\n          [-15, 9, 2, 0x1fc],\r\n          [-11, 8, 2, 0xfd],\r\n          [-7, 9, 1, 0x1fd],\r\n          [-5, 7, 1, 0x7c],\r\n          [-3, 4, 1, 0xa],\r\n          [-1, 3, 1, 0x2],\r\n          [1, 3, 1, 0x3],\r\n          [3, 5, 1, 0x1a],\r\n          [5, 6, 1, 0x3a],\r\n          [7, 3, 5, 0x4],\r\n          [39, 6, 2, 0x3b],\r\n          [43, 4, 5, 0xb],\r\n          [75, 4, 6, 0xc],\r\n          [139, 5, 7, 0x1b],\r\n          [267, 5, 8, 0x1c],\r\n          [523, 6, 8, 0x3c],\r\n          [779, 7, 9, 0x7d],\r\n          [1291, 6, 11, 0x3d],\r\n          [-32, 9, 32, 0x1fe, \"lower\"],\r\n          [3339, 9, 32, 0x1ff], // upper\r\n          [2, 0x0], // OOB\r\n        ];\r\n        break;\r\n      case 10:\r\n        lines = [\r\n          [-21, 7, 4, 0x7a],\r\n          [-5, 8, 0, 0xfc],\r\n          [-4, 7, 0, 0x7b],\r\n          [-3, 5, 0, 0x18],\r\n          [-2, 2, 2, 0x0],\r\n          [2, 5, 0, 0x19],\r\n          [3, 6, 0, 0x36],\r\n          [4, 7, 0, 0x7c],\r\n          [5, 8, 0, 0xfd],\r\n          [6, 2, 6, 0x1],\r\n          [70, 5, 5, 0x1a],\r\n          [102, 6, 5, 0x37],\r\n          [134, 6, 6, 0x38],\r\n          [198, 6, 7, 0x39],\r\n          [326, 6, 8, 0x3a],\r\n          [582, 6, 9, 0x3b],\r\n          [1094, 6, 10, 0x3c],\r\n          [2118, 7, 11, 0x7d],\r\n          [-22, 8, 32, 0xfe, \"lower\"],\r\n          [4166, 8, 32, 0xff], // upper\r\n          [2, 0x2], // OOB\r\n        ];\r\n        break;\r\n      case 11:\r\n        lines = [\r\n          [1, 1, 0, 0x0],\r\n          [2, 2, 1, 0x2],\r\n          [4, 4, 0, 0xc],\r\n          [5, 4, 1, 0xd],\r\n          [7, 5, 1, 0x1c],\r\n          [9, 5, 2, 0x1d],\r\n          [13, 6, 2, 0x3c],\r\n          [17, 7, 2, 0x7a],\r\n          [21, 7, 3, 0x7b],\r\n          [29, 7, 4, 0x7c],\r\n          [45, 7, 5, 0x7d],\r\n          [77, 7, 6, 0x7e],\r\n          [141, 7, 32, 0x7f], // upper\r\n        ];\r\n        break;\r\n      case 12:\r\n        lines = [\r\n          [1, 1, 0, 0x0],\r\n          [2, 2, 0, 0x2],\r\n          [3, 3, 1, 0x6],\r\n          [5, 5, 0, 0x1c],\r\n          [6, 5, 1, 0x1d],\r\n          [8, 6, 1, 0x3c],\r\n          [10, 7, 0, 0x7a],\r\n          [11, 7, 1, 0x7b],\r\n          [13, 7, 2, 0x7c],\r\n          [17, 7, 3, 0x7d],\r\n          [25, 7, 4, 0x7e],\r\n          [41, 8, 5, 0xfe],\r\n          [73, 8, 32, 0xff], // upper\r\n        ];\r\n        break;\r\n      case 13:\r\n        lines = [\r\n          [1, 1, 0, 0x0],\r\n          [2, 3, 0, 0x4],\r\n          [3, 4, 0, 0xc],\r\n          [4, 5, 0, 0x1c],\r\n          [5, 4, 1, 0xd],\r\n          [7, 3, 3, 0x5],\r\n          [15, 6, 1, 0x3a],\r\n          [17, 6, 2, 0x3b],\r\n          [21, 6, 3, 0x3c],\r\n          [29, 6, 4, 0x3d],\r\n          [45, 6, 5, 0x3e],\r\n          [77, 7, 6, 0x7e],\r\n          [141, 7, 32, 0x7f], // upper\r\n        ];\r\n        break;\r\n      case 14:\r\n        lines = [\r\n          [-2, 3, 0, 0x4],\r\n          [-1, 3, 0, 0x5],\r\n          [0, 1, 0, 0x0],\r\n          [1, 3, 0, 0x6],\r\n          [2, 3, 0, 0x7],\r\n        ];\r\n        break;\r\n      case 15:\r\n        lines = [\r\n          [-24, 7, 4, 0x7c],\r\n          [-8, 6, 2, 0x3c],\r\n          [-4, 5, 1, 0x1c],\r\n          [-2, 4, 0, 0xc],\r\n          [-1, 3, 0, 0x4],\r\n          [0, 1, 0, 0x0],\r\n          [1, 3, 0, 0x5],\r\n          [2, 4, 0, 0xd],\r\n          [3, 5, 1, 0x1d],\r\n          [5, 6, 2, 0x3d],\r\n          [9, 7, 4, 0x7d],\r\n          [-25, 7, 32, 0x7e, \"lower\"],\r\n          [25, 7, 32, 0x7f], // upper\r\n        ];\r\n        break;\r\n      default:\r\n        throw new Jbig2Error(`standard table B.${number} does not exist`);\r\n    }\r\n\r\n    for (let i = 0, ii = lines.length; i < ii; i++) {\r\n      lines[i] = new HuffmanLine(lines[i]);\r\n    }\r\n    table = new HuffmanTable(lines, true);\r\n    standardTablesCache[number] = table;\r\n    return table;\r\n  }\r\n\r\n  function Reader(data, start, end) {\r\n    this.data = data;\r\n    this.start = start;\r\n    this.end = end;\r\n    this.position = start;\r\n    this.shift = -1;\r\n    this.currentByte = 0;\r\n  }\r\n\r\n  Reader.prototype = {\r\n    readBit() {\r\n      if (this.shift < 0) {\r\n        if (this.position >= this.end) {\r\n          throw new Jbig2Error(\"end of data while reading bit\");\r\n        }\r\n        this.currentByte = this.data[this.position++];\r\n        this.shift = 7;\r\n      }\r\n      const bit = (this.currentByte >> this.shift) & 1;\r\n      this.shift--;\r\n      return bit;\r\n    },\r\n\r\n    readBits(numBits) {\r\n      let result = 0,\r\n        i;\r\n      for (i = numBits - 1; i >= 0; i--) {\r\n        result |= this.readBit() << i;\r\n      }\r\n      return result;\r\n    },\r\n\r\n    byteAlign() {\r\n      this.shift = -1;\r\n    },\r\n\r\n    next() {\r\n      if (this.position >= this.end) {\r\n        return -1;\r\n      }\r\n      return this.data[this.position++];\r\n    },\r\n  };\r\n\r\n  function getCustomHuffmanTable(index, referredTo, customTables) {\r\n    // Returns a Tables segment that has been earlier decoded.\r\n    // See 7.4.2.1.6 (symbol dictionary) or 7.4.3.1.6 (text region).\r\n    let currentIndex = 0;\r\n    for (let i = 0, ii = referredTo.length; i < ii; i++) {\r\n      const table = customTables[referredTo[i]];\r\n      if (table) {\r\n        if (index === currentIndex) {\r\n          return table;\r\n        }\r\n        currentIndex++;\r\n      }\r\n    }\r\n    throw new Jbig2Error(\"can't find custom Huffman table\");\r\n  }\r\n\r\n  function getTextRegionHuffmanTables(\r\n    textRegion,\r\n    referredTo,\r\n    customTables,\r\n    numberOfSymbols,\r\n    reader\r\n  ) {\r\n    // 7.4.3.1.7 Symbol ID Huffman table decoding\r\n\r\n    // Read code lengths for RUNCODEs 0...34.\r\n    const codes = [];\r\n    for (let i = 0; i <= 34; i++) {\r\n      const codeLength = reader.readBits(4);\r\n      codes.push(new HuffmanLine([i, codeLength, 0, 0]));\r\n    }\r\n    // Assign Huffman codes for RUNCODEs.\r\n    const runCodesTable = new HuffmanTable(codes, false);\r\n\r\n    // Read a Huffman code using the assignment above.\r\n    // Interpret the RUNCODE codes and the additional bits (if any).\r\n    codes.length = 0;\r\n    for (let i = 0; i < numberOfSymbols; ) {\r\n      const codeLength = runCodesTable.decode(reader);\r\n      if (codeLength >= 32) {\r\n        let repeatedLength, numberOfRepeats, j;\r\n        switch (codeLength) {\r\n          case 32:\r\n            if (i === 0) {\r\n              throw new Jbig2Error(\"no previous value in symbol ID table\");\r\n            }\r\n            numberOfRepeats = reader.readBits(2) + 3;\r\n            repeatedLength = codes[i - 1].prefixLength;\r\n            break;\r\n          case 33:\r\n            numberOfRepeats = reader.readBits(3) + 3;\r\n            repeatedLength = 0;\r\n            break;\r\n          case 34:\r\n            numberOfRepeats = reader.readBits(7) + 11;\r\n            repeatedLength = 0;\r\n            break;\r\n          default:\r\n            throw new Jbig2Error(\"invalid code length in symbol ID table\");\r\n        }\r\n        for (j = 0; j < numberOfRepeats; j++) {\r\n          codes.push(new HuffmanLine([i, repeatedLength, 0, 0]));\r\n          i++;\r\n        }\r\n      } else {\r\n        codes.push(new HuffmanLine([i, codeLength, 0, 0]));\r\n        i++;\r\n      }\r\n    }\r\n    reader.byteAlign();\r\n    const symbolIDTable = new HuffmanTable(codes, false);\r\n\r\n    // 7.4.3.1.6 Text region segment Huffman table selection\r\n\r\n    let customIndex = 0,\r\n      tableFirstS,\r\n      tableDeltaS,\r\n      tableDeltaT;\r\n\r\n    switch (textRegion.huffmanFS) {\r\n      case 0:\r\n      case 1:\r\n        tableFirstS = getStandardTable(textRegion.huffmanFS + 6);\r\n        break;\r\n      case 3:\r\n        tableFirstS = getCustomHuffmanTable(\r\n          customIndex,\r\n          referredTo,\r\n          customTables\r\n        );\r\n        customIndex++;\r\n        break;\r\n      default:\r\n        throw new Jbig2Error(\"invalid Huffman FS selector\");\r\n    }\r\n\r\n    switch (textRegion.huffmanDS) {\r\n      case 0:\r\n      case 1:\r\n      case 2:\r\n        tableDeltaS = getStandardTable(textRegion.huffmanDS + 8);\r\n        break;\r\n      case 3:\r\n        tableDeltaS = getCustomHuffmanTable(\r\n          customIndex,\r\n          referredTo,\r\n          customTables\r\n        );\r\n        customIndex++;\r\n        break;\r\n      default:\r\n        throw new Jbig2Error(\"invalid Huffman DS selector\");\r\n    }\r\n\r\n    switch (textRegion.huffmanDT) {\r\n      case 0:\r\n      case 1:\r\n      case 2:\r\n        tableDeltaT = getStandardTable(textRegion.huffmanDT + 11);\r\n        break;\r\n      case 3:\r\n        tableDeltaT = getCustomHuffmanTable(\r\n          customIndex,\r\n          referredTo,\r\n          customTables\r\n        );\r\n        customIndex++;\r\n        break;\r\n      default:\r\n        throw new Jbig2Error(\"invalid Huffman DT selector\");\r\n    }\r\n\r\n    if (textRegion.refinement) {\r\n      // Load tables RDW, RDH, RDX and RDY.\r\n      throw new Jbig2Error(\"refinement with Huffman is not supported\");\r\n    }\r\n\r\n    return {\r\n      symbolIDTable,\r\n      tableFirstS,\r\n      tableDeltaS,\r\n      tableDeltaT,\r\n    };\r\n  }\r\n\r\n  function getSymbolDictionaryHuffmanTables(\r\n    dictionary,\r\n    referredTo,\r\n    customTables\r\n  ) {\r\n    // 7.4.2.1.6 Symbol dictionary segment Huffman table selection\r\n\r\n    let customIndex = 0,\r\n      tableDeltaHeight,\r\n      tableDeltaWidth;\r\n    switch (dictionary.huffmanDHSelector) {\r\n      case 0:\r\n      case 1:\r\n        tableDeltaHeight = getStandardTable(dictionary.huffmanDHSelector + 4);\r\n        break;\r\n      case 3:\r\n        tableDeltaHeight = getCustomHuffmanTable(\r\n          customIndex,\r\n          referredTo,\r\n          customTables\r\n        );\r\n        customIndex++;\r\n        break;\r\n      default:\r\n        throw new Jbig2Error(\"invalid Huffman DH selector\");\r\n    }\r\n\r\n    switch (dictionary.huffmanDWSelector) {\r\n      case 0:\r\n      case 1:\r\n        tableDeltaWidth = getStandardTable(dictionary.huffmanDWSelector + 2);\r\n        break;\r\n      case 3:\r\n        tableDeltaWidth = getCustomHuffmanTable(\r\n          customIndex,\r\n          referredTo,\r\n          customTables\r\n        );\r\n        customIndex++;\r\n        break;\r\n      default:\r\n        throw new Jbig2Error(\"invalid Huffman DW selector\");\r\n    }\r\n\r\n    let tableBitmapSize, tableAggregateInstances;\r\n    if (dictionary.bitmapSizeSelector) {\r\n      tableBitmapSize = getCustomHuffmanTable(\r\n        customIndex,\r\n        referredTo,\r\n        customTables\r\n      );\r\n      customIndex++;\r\n    } else {\r\n      tableBitmapSize = getStandardTable(1);\r\n    }\r\n\r\n    if (dictionary.aggregationInstancesSelector) {\r\n      tableAggregateInstances = getCustomHuffmanTable(\r\n        customIndex,\r\n        referredTo,\r\n        customTables\r\n      );\r\n    } else {\r\n      tableAggregateInstances = getStandardTable(1);\r\n    }\r\n\r\n    return {\r\n      tableDeltaHeight,\r\n      tableDeltaWidth,\r\n      tableBitmapSize,\r\n      tableAggregateInstances,\r\n    };\r\n  }\r\n\r\n  function readUncompressedBitmap(reader, width, height) {\r\n    const bitmap = [];\r\n    for (let y = 0; y < height; y++) {\r\n      const row = new Uint8Array(width);\r\n      bitmap.push(row);\r\n      for (let x = 0; x < width; x++) {\r\n        row[x] = reader.readBit();\r\n      }\r\n      reader.byteAlign();\r\n    }\r\n    return bitmap;\r\n  }\r\n\r\n  function decodeMMRBitmap(input, width, height, endOfBlock) {\r\n    // MMR is the same compression algorithm as the PDF filter\r\n    // CCITTFaxDecode with /K -1.\r\n    const params = {\r\n      K: -1,\r\n      Columns: width,\r\n      Rows: height,\r\n      BlackIs1: true,\r\n      EndOfBlock: endOfBlock,\r\n    };\r\n    const decoder = new CCITTFaxDecoder(input, params);\r\n    const bitmap = [];\r\n    let currentByte,\r\n      eof = false;\r\n\r\n    for (let y = 0; y < height; y++) {\r\n      const row = new Uint8Array(width);\r\n      bitmap.push(row);\r\n      let shift = -1;\r\n      for (let x = 0; x < width; x++) {\r\n        if (shift < 0) {\r\n          currentByte = decoder.readNextChar();\r\n          if (currentByte === -1) {\r\n            // Set the rest of the bits to zero.\r\n            currentByte = 0;\r\n            eof = true;\r\n          }\r\n          shift = 7;\r\n        }\r\n        row[x] = (currentByte >> shift) & 1;\r\n        shift--;\r\n      }\r\n    }\r\n\r\n    if (endOfBlock && !eof) {\r\n      // Read until EOFB has been consumed.\r\n      const lookForEOFLimit = 5;\r\n      for (let i = 0; i < lookForEOFLimit; i++) {\r\n        if (decoder.readNextChar() === -1) {\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    return bitmap;\r\n  }\r\n\r\n  // eslint-disable-next-line no-shadow\r\n  function Jbig2Image() {}\r\n\r\n  Jbig2Image.prototype = {\r\n    parseChunks(chunks) {\r\n      return parseJbig2Chunks(chunks);\r\n    },\r\n\r\n    parse(data) {\r\n      const { imgData, width, height } = parseJbig2(data);\r\n      this.width = width;\r\n      this.height = height;\r\n      return imgData;\r\n    },\r\n  };\r\n\r\n  return Jbig2Image;\r\n})();\r\n\r\nexport { Jbig2Image };\r\n","/* Copyright 2017 Mozilla Foundation\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/* eslint no-var: error */\r\n\r\nimport { isNodeJS } from \"./is_node.js\";\r\n\r\n// Skip compatibility checks for modern builds and if we already ran the module.\r\nif (\r\n  (typeof PDFJSDev === \"undefined\" || !PDFJSDev.test(\"SKIP_BABEL\")) &&\r\n  (typeof globalThis === \"undefined\" || !globalThis._pdfjsCompatibilityChecked)\r\n) {\r\n  // Provides support for globalThis in legacy browsers.\r\n  // Support: IE11/Edge, Opera\r\n  if (typeof globalThis === \"undefined\" || globalThis.Math !== Math) {\r\n    // eslint-disable-next-line no-global-assign\r\n    globalThis = require(\"core-js/es/global-this\");\r\n  }\r\n  globalThis._pdfjsCompatibilityChecked = true;\r\n\r\n  // Support: Node.js\r\n  (function checkNodeBtoa() {\r\n    if (globalThis.btoa || !isNodeJS) {\r\n      return;\r\n    }\r\n    globalThis.btoa = function (chars) {\r\n      // eslint-disable-next-line no-undef\r\n      return Buffer.from(chars, \"binary\").toString(\"base64\");\r\n    };\r\n  })();\r\n\r\n  // Support: Node.js\r\n  (function checkNodeAtob() {\r\n    if (globalThis.atob || !isNodeJS) {\r\n      return;\r\n    }\r\n    globalThis.atob = function (input) {\r\n      // eslint-disable-next-line no-undef\r\n      return Buffer.from(input, \"base64\").toString(\"binary\");\r\n    };\r\n  })();\r\n\r\n  // Provides support for String.prototype.startsWith in legacy browsers.\r\n  // Support: IE, Chrome<41\r\n  (function checkStringStartsWith() {\r\n    if (String.prototype.startsWith) {\r\n      return;\r\n    }\r\n    require(\"core-js/es/string/starts-with.js\");\r\n  })();\r\n\r\n  // Provides support for String.prototype.endsWith in legacy browsers.\r\n  // Support: IE, Chrome<41\r\n  (function checkStringEndsWith() {\r\n    if (String.prototype.endsWith) {\r\n      return;\r\n    }\r\n    require(\"core-js/es/string/ends-with.js\");\r\n  })();\r\n\r\n  // Provides support for String.prototype.includes in legacy browsers.\r\n  // Support: IE, Chrome<41\r\n  (function checkStringIncludes() {\r\n    if (String.prototype.includes) {\r\n      return;\r\n    }\r\n    require(\"core-js/es/string/includes.js\");\r\n  })();\r\n\r\n  // Provides support for Array.prototype.includes in legacy browsers.\r\n  // Support: IE, Chrome<47\r\n  (function checkArrayIncludes() {\r\n    if (Array.prototype.includes) {\r\n      return;\r\n    }\r\n    require(\"core-js/es/array/includes.js\");\r\n  })();\r\n\r\n  // Provides support for Array.from in legacy browsers.\r\n  // Support: IE\r\n  (function checkArrayFrom() {\r\n    if (Array.from) {\r\n      return;\r\n    }\r\n    require(\"core-js/es/array/from.js\");\r\n  })();\r\n\r\n  // Provides support for Object.assign in legacy browsers.\r\n  // Support: IE\r\n  (function checkObjectAssign() {\r\n    if (Object.assign) {\r\n      return;\r\n    }\r\n    require(\"core-js/es/object/assign.js\");\r\n  })();\r\n\r\n  // Provides support for Object.fromEntries in legacy browsers.\r\n  // Support: IE, Chrome<73\r\n  (function checkObjectFromEntries() {\r\n    if (Object.fromEntries) {\r\n      return;\r\n    }\r\n    require(\"core-js/es/object/from-entries.js\");\r\n  })();\r\n\r\n  // Provides support for Math.log2 in legacy browsers.\r\n  // Support: IE, Chrome<38\r\n  (function checkMathLog2() {\r\n    if (Math.log2) {\r\n      return;\r\n    }\r\n    Math.log2 = require(\"core-js/es/math/log2.js\");\r\n  })();\r\n\r\n  // Provides support for Number.isNaN in legacy browsers.\r\n  // Support: IE.\r\n  (function checkNumberIsNaN() {\r\n    if (Number.isNaN) {\r\n      return;\r\n    }\r\n    Number.isNaN = require(\"core-js/es/number/is-nan.js\");\r\n  })();\r\n\r\n  // Provides support for Number.isInteger in legacy browsers.\r\n  // Support: IE, Chrome<34\r\n  (function checkNumberIsInteger() {\r\n    if (Number.isInteger) {\r\n      return;\r\n    }\r\n    Number.isInteger = require(\"core-js/es/number/is-integer.js\");\r\n  })();\r\n\r\n  // Provides support for TypedArray.prototype.slice in legacy browsers.\r\n  // Support: IE\r\n  (function checkTypedArraySlice() {\r\n    if (Uint8Array.prototype.slice) {\r\n      return;\r\n    }\r\n    require(\"core-js/es/typed-array/slice\");\r\n  })();\r\n\r\n  // Provides support for *recent* additions to the Promise specification,\r\n  // however basic Promise support is assumed to be available natively.\r\n  // Support: Firefox<71, Safari<13, Chrome<76\r\n  (function checkPromise() {\r\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"IMAGE_DECODERS\")) {\r\n      // The current image decoders are synchronous, hence `Promise` shouldn't\r\n      // need to be polyfilled for the IMAGE_DECODERS build target.\r\n      return;\r\n    }\r\n    if (globalThis.Promise.allSettled) {\r\n      return;\r\n    }\r\n    globalThis.Promise = require(\"core-js/es/promise/index.js\");\r\n  })();\r\n\r\n  // Support: IE\r\n  (function checkURL() {\r\n    if (typeof PDFJSDev === \"undefined\" || !PDFJSDev.test(\"PRODUCTION\")) {\r\n      // Prevent \"require is not a function\" errors in development mode,\r\n      // since the `URL` constructor should be available in modern browers.\r\n      return;\r\n    } else if (!PDFJSDev.test(\"GENERIC\")) {\r\n      // The `URL` constructor is assumed to be available in the extension\r\n      // builds.\r\n      return;\r\n    } else if (PDFJSDev.test(\"IMAGE_DECODERS\")) {\r\n      // The current image decoders don't use the `URL` constructor, so it\r\n      // doesn't need to be polyfilled for the IMAGE_DECODERS build target.\r\n      return;\r\n    }\r\n    globalThis.URL = require(\"core-js/web/url.js\");\r\n  })();\r\n\r\n  // Support: IE, Node.js\r\n  (function checkReadableStream() {\r\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"IMAGE_DECODERS\")) {\r\n      // The current image decoders are synchronous, hence `ReadableStream`\r\n      // shouldn't need to be polyfilled for the IMAGE_DECODERS build target.\r\n      return;\r\n    }\r\n    let isReadableStreamSupported = false;\r\n\r\n    if (typeof ReadableStream !== \"undefined\") {\r\n      // MS Edge may say it has ReadableStream but they are not up to spec yet.\r\n      try {\r\n        // eslint-disable-next-line no-new\r\n        new ReadableStream({\r\n          start(controller) {\r\n            controller.close();\r\n          },\r\n        });\r\n        isReadableStreamSupported = true;\r\n      } catch (e) {\r\n        // The ReadableStream constructor cannot be used.\r\n      }\r\n    }\r\n    if (isReadableStreamSupported) {\r\n      return;\r\n    }\r\n    globalThis.ReadableStream = require(\"web-streams-polyfill/dist/ponyfill.js\").ReadableStream;\r\n  })();\r\n\r\n  // We want to support Map iteration, but it doesn't seem possible to easily\r\n  // test for that specifically; hence using a similarly unsupported property.\r\n  // Support: IE11\r\n  (function checkMapEntries() {\r\n    if (globalThis.Map && globalThis.Map.prototype.entries) {\r\n      return;\r\n    }\r\n    globalThis.Map = require(\"core-js/es/map/index.js\");\r\n  })();\r\n\r\n  // We want to support Set iteration, but it doesn't seem possible to easily\r\n  // test for that specifically; hence using a similarly unsupported property.\r\n  // Support: IE11\r\n  (function checkSetEntries() {\r\n    if (globalThis.Set && globalThis.Set.prototype.entries) {\r\n      return;\r\n    }\r\n    globalThis.Set = require(\"core-js/es/set/index.js\");\r\n  })();\r\n\r\n  // Support: IE<11, Safari<8, Chrome<36\r\n  (function checkWeakMap() {\r\n    if (globalThis.WeakMap) {\r\n      return;\r\n    }\r\n    globalThis.WeakMap = require(\"core-js/es/weak-map/index.js\");\r\n  })();\r\n\r\n  // Support: IE11\r\n  (function checkWeakSet() {\r\n    if (globalThis.WeakSet) {\r\n      return;\r\n    }\r\n    globalThis.WeakSet = require(\"core-js/es/weak-set/index.js\");\r\n  })();\r\n\r\n  // Provides support for String.codePointAt in legacy browsers.\r\n  // Support: IE11.\r\n  (function checkStringCodePointAt() {\r\n    if (String.prototype.codePointAt) {\r\n      return;\r\n    }\r\n    require(\"core-js/es/string/code-point-at.js\");\r\n  })();\r\n\r\n  // Provides support for String.fromCodePoint in legacy browsers.\r\n  // Support: IE11.\r\n  (function checkStringFromCodePoint() {\r\n    if (String.fromCodePoint) {\r\n      return;\r\n    }\r\n    String.fromCodePoint = require(\"core-js/es/string/from-code-point.js\");\r\n  })();\r\n\r\n  // Support: IE\r\n  (function checkSymbol() {\r\n    if (globalThis.Symbol) {\r\n      return;\r\n    }\r\n    require(\"core-js/es/symbol/index.js\");\r\n  })();\r\n\r\n  // Provides support for String.prototype.padStart in legacy browsers.\r\n  // Support: IE, Chrome<57\r\n  (function checkStringPadStart() {\r\n    if (String.prototype.padStart) {\r\n      return;\r\n    }\r\n    require(\"core-js/es/string/pad-start.js\");\r\n  })();\r\n\r\n  // Provides support for String.prototype.padEnd in legacy browsers.\r\n  // Support: IE, Chrome<57\r\n  (function checkStringPadEnd() {\r\n    if (String.prototype.padEnd) {\r\n      return;\r\n    }\r\n    require(\"core-js/es/string/pad-end.js\");\r\n  })();\r\n\r\n  // Provides support for Object.values in legacy browsers.\r\n  // Support: IE, Chrome<54\r\n  (function checkObjectValues() {\r\n    if (Object.values) {\r\n      return;\r\n    }\r\n    Object.values = require(\"core-js/es/object/values.js\");\r\n  })();\r\n\r\n  // Provides support for Object.entries in legacy browsers.\r\n  // Support: IE, Chrome<54\r\n  (function checkObjectEntries() {\r\n    if (Object.entries) {\r\n      return;\r\n    }\r\n    Object.entries = require(\"core-js/es/object/entries.js\");\r\n  })();\r\n}\r\n","/*\r\n * ofd.js - A Javascript class for reading and rendering ofd files\r\n * <https://github.com/DLTech21/ofd.js>\r\n *\r\n * Copyright (c) 2020. DLTech21 All Rights Reserved.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * You may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *      http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n *  Unless required by applicable law or agreed to in writing, software\r\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\r\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n *  See the License for the specific language governing permissions and\r\n *  limitations under the License.\r\n *\r\n */\r\n\r\nimport {\r\n    calPathPoint,\r\n    calTextPoint,\r\n    converterDpi, convertPathAbbreviatedDatatoPoint,\r\n    getFontFamily,\r\n    parseColor,\r\n    parseCtm,\r\n    parseStBox,\r\n    setPageScal,\r\n    converterBox, setMaxPageScal,\r\n} from \"@/utils/ofd/ofd_util\";\r\n\r\nexport const renderPageBox = function (screenWidth, pages, document) {\r\n    let pageBoxs = [];\r\n    for (const page of pages) {\r\n        let boxObj = {};\r\n        boxObj['id'] = Object.keys(page)[0];\r\n        boxObj['box'] = calPageBox(screenWidth, document, page);\r\n        pageBoxs.push(boxObj);\r\n    }\r\n    return pageBoxs;\r\n}\r\n\r\nexport const calPageBox = function (screenWidth, document, page) {\r\n    const area = page[Object.keys(page)[0]]['json']['ofd:Area'];\r\n    let box;\r\n    if (area) {\r\n        const physicalBox = area['ofd:PhysicalBox']\r\n        if (physicalBox) {\r\n            box = (physicalBox);\r\n        } else {\r\n            const applicationBox = area['ofd:ApplicationBox']\r\n            if (applicationBox) {\r\n                box = (applicationBox);\r\n            } else {\r\n                const contentBox = area['ofd:ContentBox']\r\n                if (contentBox) {\r\n                    box = (contentBox);\r\n                }\r\n            }\r\n        }\r\n    } else {\r\n        let documentArea = document['ofd:CommonData']['ofd:PageArea']\r\n        const physicalBox = documentArea['ofd:PhysicalBox']\r\n        if (physicalBox) {\r\n            box = (physicalBox);\r\n        } else {\r\n            const applicationBox = documentArea['ofd:ApplicationBox']\r\n            if (applicationBox) {\r\n                box = (applicationBox);\r\n            } else {\r\n                const contentBox = documentArea['ofd:ContentBox']\r\n                if (contentBox) {\r\n                    box = (contentBox);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    let array = box.split(' ');\r\n    const scale = ((screenWidth - 10) / parseFloat(array[2])).toFixed(1);\r\n    setMaxPageScal(scale);\r\n    setPageScal(scale);\r\n    box = parseStBox( box);\r\n    box = converterBox(box)\r\n    return box;\r\n}\r\n\r\nexport const calPageBoxScale = function (document, page) {\r\n    const area = page[Object.keys(page)[0]]['json']['ofd:Area'];\r\n    let box;\r\n    if (area) {\r\n        const physicalBox = area['ofd:PhysicalBox']\r\n        if (physicalBox) {\r\n            box = (physicalBox);\r\n        } else {\r\n            const applicationBox = area['ofd:ApplicationBox']\r\n            if (applicationBox) {\r\n                box = (applicationBox);\r\n            } else {\r\n                const contentBox = area['ofd:ContentBox']\r\n                if (contentBox) {\r\n                    box = (contentBox);\r\n                }\r\n            }\r\n        }\r\n    } else {\r\n        let documentArea = document['ofd:CommonData']['ofd:PageArea']\r\n        const physicalBox = documentArea['ofd:PhysicalBox']\r\n        if (physicalBox) {\r\n            box = (physicalBox);\r\n        } else {\r\n            const applicationBox = documentArea['ofd:ApplicationBox']\r\n            if (applicationBox) {\r\n                box = (applicationBox);\r\n            } else {\r\n                const contentBox = documentArea['ofd:ContentBox']\r\n                if (contentBox) {\r\n                    box = (contentBox);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    box = parseStBox( box);\r\n    box = converterBox(box)\r\n    return box;\r\n}\r\n\r\n\r\n\r\nexport const renderPage = function (pageDiv, page, tpls, fontResObj, drawParamResObj, multiMediaResObj) {\r\n    const pageId = Object.keys(page)[0];\r\n    const template = page[pageId]['json']['ofd:Template'];\r\n    if (template) {\r\n        let array = [];\r\n        const layers = tpls[template['@_TemplateID']]['json']['ofd:Content']['ofd:Layer'];\r\n        array = array.concat(layers);\r\n        for (let layer of array) {\r\n            if (layer) {\r\n                renderLayer(pageDiv, fontResObj, drawParamResObj, multiMediaResObj, layer, false);\r\n            }\r\n        }\r\n    }\r\n    const contentLayers = page[pageId]['json']['ofd:Content']['ofd:Layer'];\r\n    let array = [];\r\n    array = array.concat(contentLayers);\r\n    for (let contentLayer of array) {\r\n        if (contentLayer) {\r\n            renderLayer(pageDiv, fontResObj, drawParamResObj, multiMediaResObj, contentLayer, false);\r\n        }\r\n    }\r\n    if (page[pageId].stamp) {\r\n        for (const stamp of page[pageId].stamp) {\r\n          if (stamp.type === 'ofd') {\r\n            renderSealPage(pageDiv, stamp.obj.pages, stamp.obj.tpls, true, stamp.stamp.stampAnnot, stamp.obj.fontResObj, stamp.obj.drawParamResObj, stamp.obj.multiMediaResObj, stamp.stamp.sealObj.SES_Signature, stamp.stamp.signedInfo);\r\n          } else if (stamp.type === 'png') {\r\n              let sealBoundary = converterBox(stamp.obj.boundary);\r\n              let element = renderImageOnDiv(pageDiv.style.width, pageDiv.style.height, stamp.obj.img, sealBoundary, stamp.obj.clip, true, stamp.stamp.sealObj.SES_Signature, stamp.stamp.signedInfo);\r\n              pageDiv.appendChild(element);\r\n          }\r\n        }\r\n    }\r\n    if (page[pageId].annotation) {\r\n        for (const annotation of page[pageId].annotation) {\r\n            renderAnnotation(pageDiv, annotation, fontResObj, drawParamResObj, multiMediaResObj);\r\n        }\r\n    }\r\n}\r\n\r\nconst renderAnnotation = function (pageDiv, annotation, fontResObj, drawParamResObj, multiMediaResObj) {\r\n    let div = document.createElement('div');\r\n    div.setAttribute('style', `position:relative;`)\r\n    let boundary = annotation['appearance']['@_Boundary'];\r\n    if (boundary) {\r\n        let divBoundary = converterBox(parseStBox(boundary));\r\n        div.setAttribute('style', `z-index:-1;position:absolute; left: ${divBoundary.x}px; top: ${divBoundary.y}px; width: ${divBoundary.w}px; height: ${divBoundary.h}px`)\r\n    }\r\n    const contentLayer = annotation['appearance'];\r\n    renderLayer(div, fontResObj, drawParamResObj, multiMediaResObj, contentLayer, false);\r\n    pageDiv.appendChild(div);\r\n\r\n}\r\n\r\nconst renderSealPage = function (pageDiv, pages, tpls, isStampAnnot, stampAnnot, fontResObj, drawParamResObj, multiMediaResObj, SES_Signature, signedInfo) {\r\n    for (const page of pages) {\r\n        const pageId = Object.keys(page)[0];\r\n        let stampAnnotBoundary = {x: 0, y: 0, w: 0, h: 0};\r\n        if (isStampAnnot && stampAnnot) {\r\n            stampAnnotBoundary = stampAnnot.boundary;\r\n        }\r\n        let divBoundary = converterBox(stampAnnotBoundary);\r\n        let div = document.createElement('div');\r\n        div.setAttribute(\"name\",\"seal_img_div\");\r\n        div.setAttribute('style', `cursor: pointer; position:relative; left: ${divBoundary.x}px; top: ${divBoundary.y}px; width: ${divBoundary.w}px; height: ${divBoundary.h}px`)\r\n        div.setAttribute('data-ses-signature', `${JSON.stringify(SES_Signature)}`);\r\n        div.setAttribute('data-signed-info', `${JSON.stringify(signedInfo)}`);\r\n        const template = page[pageId]['json']['ofd:Template'];\r\n        if (template) {\r\n            const layers = tpls[template['@_TemplateID']]['json']['ofd:Content']['ofd:Layer'];\r\n            let array = [];\r\n            array = array.concat(layers);\r\n            for (let layer of array) {\r\n                if (layer) {\r\n                    renderLayer(div, fontResObj, drawParamResObj, multiMediaResObj, layer,  isStampAnnot);\r\n                }\r\n            }\r\n        }\r\n        const contentLayers = page[pageId]['json']['ofd:Content']['ofd:Layer'];\r\n        let array = [];\r\n        array = array.concat(contentLayers);\r\n        for (let contentLayer of array) {\r\n            if (contentLayer) {\r\n                renderLayer(div, fontResObj, drawParamResObj, multiMediaResObj, contentLayer, isStampAnnot);\r\n            }\r\n        }\r\n        pageDiv.appendChild(div);\r\n    }\r\n}\r\n\r\nconst renderLayer = function (pageDiv, fontResObj, drawParamResObj, multiMediaResObj, layer, isStampAnnot) {\r\n    let fillColor = null;\r\n    let strokeColor = null;\r\n    let lineWith = converterDpi(0.353);\r\n    let drawParam = layer['@_DrawParam'];\r\n    if (drawParam && Object.keys(drawParamResObj).length > 0 && drawParamResObj[drawParam]) {\r\n        if (drawParamResObj[drawParam]['relative']) {\r\n            drawParam = drawParamResObj[drawParam]['relative'];\r\n            if (drawParamResObj[drawParam]['FillColor']) {\r\n                fillColor = parseColor(drawParamResObj[drawParam]['FillColor']);\r\n            }\r\n            if (drawParamResObj[drawParam]['StrokeColor']) {\r\n                strokeColor = parseColor(drawParamResObj[drawParam]['StrokeColor']);\r\n            }\r\n            if (drawParamResObj[drawParam]['LineWidth']) {\r\n                lineWith = converterDpi(drawParamResObj[drawParam]['LineWidth']);\r\n            }\r\n        }\r\n        if (drawParamResObj[drawParam]['FillColor']) {\r\n            fillColor = parseColor(drawParamResObj[drawParam]['FillColor']);\r\n        }\r\n        if (drawParamResObj[drawParam]['StrokeColor']) {\r\n            strokeColor = parseColor(drawParamResObj[drawParam]['StrokeColor']);\r\n        }\r\n        if (drawParamResObj[drawParam]['LineWidth']) {\r\n            lineWith = converterDpi(drawParamResObj[drawParam]['LineWidth']);\r\n        }\r\n    }\r\n    const imageObjects = layer['ofd:ImageObject'];\r\n    let imageObjectArray = [];\r\n    imageObjectArray = imageObjectArray.concat(imageObjects);\r\n    for (const imageObject of imageObjectArray) {\r\n        if (imageObject) {\r\n            let element = renderImageObject(pageDiv.style.width, pageDiv.style.height, multiMediaResObj, imageObject)\r\n            pageDiv.appendChild(element);\r\n        }\r\n    }\r\n    const pathObjects = layer['ofd:PathObject'];\r\n    let pathObjectArray = [];\r\n    pathObjectArray = pathObjectArray.concat(pathObjects);\r\n    for (const pathObject of pathObjectArray) {\r\n        if (pathObject) {\r\n            let svg = renderPathObject(drawParamResObj, pathObject, fillColor, strokeColor, lineWith, isStampAnnot)\r\n            pageDiv.appendChild(svg);\r\n        }\r\n    }\r\n    const textObjects = layer['ofd:TextObject'];\r\n    let textObjectArray = [];\r\n    textObjectArray = textObjectArray.concat(textObjects);\r\n    for (const textObject of textObjectArray) {\r\n        if (textObject) {\r\n            let svg = renderTextObject(fontResObj, textObject, fillColor, strokeColor);\r\n            pageDiv.appendChild(svg);\r\n        }\r\n    }\r\n    const pageBlockArray = layer['ofd:PageBlock'];\r\n    if (pageBlockArray) {\r\n        for (const pageBlock of pageBlockArray) {\r\n            const textObjects = pageBlock['ofd:TextObject'];\r\n            let textObjectArray = [];\r\n            textObjectArray = textObjectArray.concat(textObjects);\r\n            for (const textObject of textObjectArray) {\r\n                if (textObject) {\r\n                    let svg = renderTextObject(fontResObj, textObject, fillColor, strokeColor);\r\n                    pageDiv.appendChild(svg);\r\n                }\r\n            }\r\n            const imageObjects = pageBlock['ofd:ImageObject'];\r\n            let imageObjectArray = [];\r\n            imageObjectArray = imageObjectArray.concat(imageObjects);\r\n            for (const imageObject of imageObjectArray) {\r\n                if (imageObject) {\r\n                    let element = renderImageObject(pageDiv.style.width, pageDiv.style.height, multiMediaResObj, imageObject)\r\n                    pageDiv.appendChild(element);\r\n                }\r\n            }\r\n            const pathObjects = pageBlock['ofd:PathObject'];\r\n            let pathObjectArray = [];\r\n            pathObjectArray = pathObjectArray.concat(pathObjects);\r\n            for (const pathObject of pathObjectArray) {\r\n                if (pathObject) {\r\n                    let svg = renderPathObject(drawParamResObj, pathObject, fillColor, strokeColor, lineWith, isStampAnnot)\r\n                    pageDiv.appendChild(svg);\r\n                }\r\n            }\r\n        }\r\n    }\r\n \r\n}\r\n\r\nexport const renderImageObject = function (pageWidth, pageHeight, multiMediaResObj, imageObject){\r\n    let boundary = parseStBox(imageObject['@_Boundary']);\r\n    boundary = converterBox(boundary);\r\n    const resId = imageObject['@_ResourceID'];\r\n    if (multiMediaResObj[resId].format === 'gbig2') {\r\n        const img = multiMediaResObj[resId].img;\r\n        const width = multiMediaResObj[resId].width;\r\n        const height = multiMediaResObj[resId].height;\r\n        return renderImageOnCanvas(img, width, height, boundary, imageObject['@_ID']);\r\n    } else {\r\n        return renderImageOnDiv(pageWidth, pageHeight, multiMediaResObj[resId].img, boundary, false, false, null, null, imageObject['@_ID']);\r\n    }\r\n}\r\n\r\nconst renderImageOnCanvas = function (img, imgWidth, imgHeight, boundary, oid){\r\n    const arr = new Uint8ClampedArray(4 * imgWidth * imgHeight);\r\n    for (var i = 0; i < img.length; i++) {\r\n        arr[4 * i] = img[i];\r\n        arr[4 * i + 1] = img[i];\r\n        arr[4 * i + 2] = img[i];\r\n        arr[4 * i + 3] = 255;\r\n    }\r\n    let imageData = new ImageData(arr, imgWidth, imgHeight);\r\n    let canvas = document.createElement('canvas');\r\n    canvas.width = imgWidth;\r\n    canvas.height = imgHeight;\r\n    let context = canvas.getContext('2d');\r\n    context.putImageData(imageData, 0, 0);\r\n    canvas.setAttribute('style', `left: ${boundary.x}px; top: ${boundary.y}px; width: ${boundary.w}px; height: ${boundary.h}px;z-index: ${oid}`)\r\n    canvas.style.position = 'absolute';\r\n    return canvas;\r\n}\r\n\r\nexport const renderImageOnDiv = function (pageWidth, pageHeight, imgSrc, boundary, clip, isStampAnnot, SES_Signature, signedInfo, oid) {\r\n    let div = document.createElement('div');\r\n    if(isStampAnnot)\r\n    {\r\n        div.setAttribute(\"name\",\"seal_img_div\");\r\n        div.setAttribute('data-ses-signature', `${JSON.stringify(SES_Signature)}`);\r\n        div.setAttribute('data-signed-info', `${JSON.stringify(signedInfo)}`);\r\n    }\r\n    let img = document.createElement('img');\r\n    img.src = imgSrc;\r\n    img.setAttribute('width', '100%');\r\n    img.setAttribute('height', '100%');\r\n    div.appendChild(img);\r\n    const pw = parseFloat(pageWidth.replace('px', ''));\r\n    const ph = parseFloat(pageHeight.replace('px', ''));\r\n    const w = boundary.w > pw ? pw : boundary.w;\r\n    const h = boundary.h > ph ? ph : boundary.h;\r\n    let c = '';\r\n    if (clip) {\r\n        clip = converterBox(clip);\r\n        c = `clip: rect(${clip.y}px, ${clip.w + clip.x}px, ${clip.h + clip.y}px, ${clip.x}px)`\r\n    }\r\n    div.setAttribute('style', `cursor: pointer; overflow: hidden; position: absolute; left: ${c ? boundary.x : boundary.x < 0 ? 0 : boundary.x}px; top: ${c ? boundary.y : boundary.y < 0 ? 0 : boundary.y}px; width: ${w}px; height: ${h}px; ${c};z-index: ${oid}`)\r\n    return div;\r\n}\r\n\r\nexport const renderTextObject = function (fontResObj, textObject, defaultFillColor, defaultStrokeColor) {\r\n    let defaultFillOpacity = 1;\r\n    let boundary = parseStBox(textObject['@_Boundary']);\r\n    boundary = converterBox(boundary);\r\n    const ctm = textObject['@_CTM'];\r\n    const hScale = textObject['@_HScale'];\r\n    const font = textObject['@_Font'];\r\n    const weight = textObject['@_Weight'];\r\n    const size = converterDpi(parseFloat(textObject['@_Size']));\r\n    let array = [];\r\n    array = array.concat(textObject['ofd:TextCode']);\r\n    const textCodePointList = calTextPoint(array);\r\n    let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n    svg.setAttribute('version', '1.1');\r\n    const fillColor = textObject['ofd:FillColor'];\r\n    if (fillColor) {\r\n        defaultFillColor = parseColor(fillColor['@_Value']);\r\n        let alpha = fillColor['@_Alpha'];\r\n        if (alpha) {\r\n            defaultFillOpacity = alpha>1? alpha/255:alpha;\r\n        }\r\n        if (defaultFillOpacity === 1) {\r\n            let alpha = textObject['@_Alpha'];\r\n            if (alpha) {\r\n                defaultFillOpacity = alpha>1? alpha/255:alpha;\r\n            }\r\n        }\r\n    }\r\n    for (const textCodePoint of textCodePointList) {\r\n        if (textCodePoint && !isNaN(textCodePoint.x)) {\r\n            let text = document.createElementNS('http://www.w3.org/2000/svg', 'text');\r\n            text.setAttribute('x', textCodePoint.x);\r\n            text.setAttribute('y', textCodePoint.y);\r\n            text.innerHTML = textCodePoint.text;\r\n            if (ctm) {\r\n                const ctms = parseCtm(ctm);\r\n                text.setAttribute('transform', `matrix(${ctms[0]} ${ctms[1]} ${ctms[2]} ${ctms[3]} ${converterDpi(ctms[4])} ${converterDpi(ctms[5])})`)\r\n            }\r\n            if (hScale) {\r\n                text.setAttribute('transform', `matrix(${hScale}, 0, 0, 1, ${(1-hScale)*textCodePoint.x}, 0)`)\r\n                // text.setAttribute('transform-origin', `${textCodePoint.x}`);\r\n            }\r\n            text.setAttribute('fill', defaultStrokeColor);\r\n            text.setAttribute('fill', defaultFillColor);\r\n            text.setAttribute('fill-opacity', defaultFillOpacity);\r\n            text.setAttribute('style', `font-weight: ${weight};font-size:${size}px;font-family: ${getFontFamily(fontResObj[font])};`)\r\n            svg.appendChild(text);\r\n        }\r\n\r\n    }\r\n    let width = boundary.w;\r\n    let height = boundary.h;\r\n    let left = boundary.x;\r\n    let top = boundary.y;\r\n    svg.setAttribute('style', `overflow:visible;position:absolute;width:${width}px;height:${height}px;left:${left}px;top:${top}px;z-index:${textObject['@_Id']}`);\r\n    return svg;\r\n}\r\n\r\nexport const renderPathObject = function (drawParamResObj, pathObject, defaultFillColor, defaultStrokeColor, defaultLineWith, isStampAnnot) {\r\n    let boundary = parseStBox(pathObject['@_Boundary']);\r\n    boundary = converterBox(boundary);\r\n    let lineWidth = pathObject['@_LineWidth'];\r\n    const abbreviatedData = pathObject['ofd:AbbreviatedData'];\r\n    const points = calPathPoint(convertPathAbbreviatedDatatoPoint(abbreviatedData));\r\n    const ctm = pathObject['@_CTM'];\r\n    let svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n    svg.setAttribute('version', '1.1');\r\n    let path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\r\n    if (lineWidth) {\r\n        defaultLineWith = converterDpi(lineWidth);\r\n    }\r\n    const drawParam = pathObject['@_DrawParam'];\r\n    if (drawParam) {\r\n        lineWidth = drawParamResObj[drawParam].LineWidth;\r\n        if (lineWidth) {\r\n            defaultLineWith = converterDpi(lineWidth);\r\n        }\r\n    }\r\n    if (ctm) {\r\n        const ctms = parseCtm(ctm);\r\n        path.setAttribute('transform', `matrix(${ctms[0]} ${ctms[1]} ${ctms[2]} ${ctms[3]} ${converterDpi(ctms[4])} ${converterDpi(ctms[5])})`)\r\n    }\r\n    let strokeStyle = '';\r\n    const strokeColor = pathObject['ofd:StrokeColor'];\r\n    if (strokeColor) {\r\n        defaultStrokeColor = parseColor(strokeColor['@_Value'])\r\n    }\r\n    let fillStyle = 'fill: none;';\r\n    const fillColor = pathObject['ofd:FillColor'];\r\n    if (fillColor) {\r\n        defaultFillColor = parseColor(fillColor['@_Value'])\r\n    }\r\n    if (defaultLineWith > 0 && !defaultStrokeColor) {\r\n        defaultStrokeColor = defaultFillColor;\r\n        if (!defaultStrokeColor) {\r\n            defaultStrokeColor = 'rgb(0, 0, 0)';\r\n        }\r\n    }\r\n    strokeStyle = `stroke:${defaultStrokeColor};stroke-width:${defaultLineWith}px;`;\r\n    if (pathObject['@_Stroke'] == 'false') {\r\n        strokeStyle = ``;\r\n    }\r\n    if (pathObject['@_Fill'] != 'false') {\r\n        fillStyle = `fill:${isStampAnnot ? 'none' : defaultFillColor ? defaultFillColor : 'none'};`;\r\n    }\r\n    let defaultFillOpacity = 1;\r\n    const alpha = pathObject['@_Alpha'];\r\n    if (alpha) {\r\n        defaultFillOpacity = alpha>1? alpha/255:alpha;\r\n    }\r\n    path.setAttribute('fill-opacity', defaultFillOpacity);\r\n    path.setAttribute('style', `${strokeStyle};${fillStyle}`)\r\n    let d = '';\r\n    for (const point of points) {\r\n        if (point.type === 'M') {\r\n            d += `M${point.x} ${point.y} `;\r\n        } else if (point.type === 'L') {\r\n            d += `L${point.x} ${point.y} `;\r\n        } else if (point.type === 'B') {\r\n            d += `C${point.x1} ${point.y1} ${point.x2} ${point.y2} ${point.x3} ${point.y3} `;\r\n        } else if (point.type === 'C') {\r\n            d += `Z`;\r\n        }\r\n    }\r\n    path.setAttribute('d', d);\r\n    svg.appendChild(path);\r\n    let width = isStampAnnot ? boundary.w : Math.ceil(boundary.w);\r\n    let height = isStampAnnot ? boundary.h : Math.ceil(boundary.h);\r\n    let left = boundary.x;\r\n    let top = boundary.y;\r\n    svg.setAttribute('style', `overflow:visible;position:absolute;width:${width}px;height:${height}px;left:${left}px;top:${top}px;z-index:${pathObject['@_Id']}`);\r\n    return svg;\r\n}\r\n","/*\r\n * ofd.js - A Javascript class for reading and rendering ofd files\r\n * <https://github.com/DLTech21/ofd.js>\r\n *\r\n * Copyright (c) 2020. DLTech21 All Rights Reserved.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * You may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *      http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n *  Unless required by applicable law or agreed to in writing, software\r\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\r\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n *  See the License for the specific language governing permissions and\r\n *  limitations under the License.\r\n *\r\n */\r\n\r\nimport {calPageBox, calPageBoxScale, renderPage} from \"@/utils/ofd/ofd_render\";\r\nimport {pipeline} from \"@/utils/ofd/pipeline\";\r\nimport {\r\n    getDocRoots,\r\n    parseSingleDoc,\r\n    unzipOfd\r\n} from \"@/utils/ofd/ofd_parser\";\r\nimport {digestCheckProcess} from \"@/utils/ofd/ses_signature_parser\"\r\nimport {getPageScal, setPageScal} from \"@/utils/ofd/ofd_util\";\r\nimport * as JSZipUtils from \"jszip-utils\";\r\n\r\nexport const parseOfdDocument = function (options) {\r\n    if (options.ofd instanceof File || options.ofd instanceof ArrayBuffer) {\r\n        doParseOFD(options);\r\n    } else {\r\n        JSZipUtils.getBinaryContent(options.ofd, function (err, data) {\r\n            if (err) {\r\n                if (options.fail) {\r\n                    options.fail(err);\r\n                }\r\n            } else {\r\n                options.ofd = data;\r\n                doParseOFD(options);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nconst doParseOFD = function (options) {\r\n    pipeline.call(this, async () => await unzipOfd(options.ofd), getDocRoots, parseSingleDoc)\r\n        .then(res => {\r\n            if (options.success) {\r\n                options.success(res);\r\n            }\r\n        })\r\n        .catch(res => {\r\n            console.log(res)\r\n            if (options.fail) {\r\n                options.fail(res);\r\n            }\r\n        });\r\n}\r\n\r\nexport const renderOfd = function (screenWidth, ofd) {\r\n    let divArray = [];\r\n    if (!ofd) {\r\n        return divArray;\r\n    }\r\n    for (const page of ofd.pages) {\r\n        let box = calPageBox(screenWidth, ofd.document, page);\r\n        const pageId = Object.keys(page)[0];\r\n        let pageDiv = document.createElement('div');\r\n        pageDiv.id = pageId;\r\n        pageDiv.setAttribute('style', `margin-bottom: 20px;position: relative;width:${box.w}px;height:${box.h}px;background: #F5F5F5;`)\r\n        renderPage(pageDiv, page, ofd.tpls, ofd.fontResObj, ofd.drawParamResObj, ofd.multiMediaResObj);\r\n        divArray.push(pageDiv);\r\n    }\r\n    return divArray;\r\n}\r\n\r\nexport const renderOfdByScale = function (ofd) {\r\n    let divArray = [];\r\n    if (!ofd) {\r\n        return divArray;\r\n    }\r\n    for (const page of ofd.pages) {\r\n        let box = calPageBoxScale(ofd.document, page);\r\n        const pageId = Object.keys(page)[0];\r\n        let pageDiv = document.createElement('div');\r\n        pageDiv.id = pageId;\r\n        pageDiv.setAttribute('style', `margin-bottom: 20px;position: relative;width:${box.w}px;height:${box.h}px;background: white;`)\r\n        renderPage(pageDiv, page, ofd.tpls, ofd.fontResObj, ofd.drawParamResObj, ofd.multiMediaResObj);\r\n        divArray.push(pageDiv);\r\n    }\r\n    return divArray;\r\n}\r\n\r\nexport const digestCheck = function (options) {\r\n    // pipeline.call(this, async () => await digestCheckProcess(options.arr))\r\n    //     .then(res => {\r\n    //         if (options.success) {\r\n    //             options.success(res);\r\n    //         }\r\n    //     });\r\n    return digestCheckProcess(options)\r\n}\r\n\r\nexport const setPageScale = function (scale) {\r\n    setPageScal(scale);\r\n}\r\n\r\nexport const getPageScale = function () {\r\n    return getPageScal();\r\n}\r\n\r\n","<template>\r\n  <el-container style=\"width: 100vw; height: 100vh\">\r\n    <el-header\r\n      style=\"\r\n        background: #f5f5f5;\r\n        display: flex;\r\n        height: 40px;\r\n        border: 1px solid #e8e8e8;\r\n        align-items: center;\r\n      \"\r\n    >\r\n      <div style=\"display: flex; align-items: center\" v-if=\"ofdObj\">\r\n        <div class=\"scale-icon\" style=\"margin-left: 10px\" @click=\"plus\">\r\n          <font-awesome-icon icon=\"search-plus\" />\r\n        </div>\r\n        <div class=\"scale-icon\" @click=\"minus\">\r\n          <font-awesome-icon icon=\"search-minus\" />\r\n        </div>\r\n        <div class=\"scale-icon\">\r\n          <font-awesome-icon icon=\"step-backward\" @click=\"firstPage\" />\r\n        </div>\r\n        <div class=\"scale-icon\" style=\"font-size: 18px\" @click=\"prePage\">\r\n          <font-awesome-icon icon=\"caret-left\" />\r\n        </div>\r\n        <div class=\"scale-icon\">{{ pageIndex }}/{{ pageCount }}</div>\r\n        <div class=\"scale-icon\" style=\"font-size: 18px\" @click=\"nextPage\">\r\n          <font-awesome-icon icon=\"caret-right\" />\r\n        </div>\r\n        <div class=\"scale-icon\" @click=\"lastPage\">\r\n          <font-awesome-icon icon=\"step-forward\" />\r\n        </div>\r\n      </div>\r\n    </el-header>\r\n    <el-main\r\n      style=\"height: auto; background: #808080; padding: 0\"\r\n      v-loading=\"loading\"\r\n    >\r\n      <div\r\n        class=\"main-section\"\r\n        id=\"content\"\r\n        ref=\"contentDiv\"\r\n        @mousewheel=\"scrool\"\r\n      ></div>\r\n    </el-main>\r\n    <div\r\n      class=\"SealContainer\"\r\n      id=\"sealInfoDiv\"\r\n      hidden=\"hidden\"\r\n      ref=\"sealInfoDiv\"\r\n    >\r\n      <div class=\"SealContainer mask\" @click=\"closeSealInfoDialog\"></div>\r\n      <div class=\"SealContainer-layout\">\r\n        <div class=\"SealContainer-content\">\r\n          <p class=\"content-title\">签章信息</p>\r\n          <div class=\"subcontent\">\r\n            <span class=\"title\">签章人</span>\r\n            <span class=\"value\" id=\"spSigner\">[无效的签章结构]</span>\r\n          </div>\r\n          <div class=\"subcontent\">\r\n            <span class=\"title\">签章提供者</span>\r\n            <span class=\"value\" id=\"spProvider\">[无效的签章结构]</span>\r\n          </div>\r\n          <div class=\"subcontent\">\r\n            <span class=\"title\">原文摘要值</span>\r\n            <span\r\n              class=\"value\"\r\n              id=\"spHashedValue\"\r\n              @click=\"showMore('原文摘要值', 'spHashedValue')\"\r\n              style=\"cursor: pointer\"\r\n              >[无效的签章结构]</span\r\n            >\r\n          </div>\r\n          <div class=\"subcontent\">\r\n            <span class=\"title\">签名值</span>\r\n            <span\r\n              class=\"value\"\r\n              id=\"spSignedValue\"\r\n              @click=\"showMore('签名值', 'spSignedValue')\"\r\n              style=\"cursor: pointer\"\r\n              >[无效的签章结构]</span\r\n            >\r\n          </div>\r\n          <div class=\"subcontent\">\r\n            <span class=\"title\">签名算法</span>\r\n            <span class=\"value\" id=\"spSignMethod\">[无效的签章结构]</span>\r\n          </div>\r\n          <div class=\"subcontent\">\r\n            <span class=\"title\">版本号</span>\r\n            <span class=\"value\" id=\"spVersion\">[无效的签章结构]</span>\r\n          </div>\r\n          <div class=\"subcontent\">\r\n            <span class=\"title\">验签结果</span>\r\n            <span class=\"value\" id=\"VerifyRet\">[无效的签章结构]</span>\r\n          </div>\r\n\r\n          <p class=\"content-title\">印章信息</p>\r\n          <div class=\"subcontent\">\r\n            <span class=\"title\">印章标识</span>\r\n            <span class=\"value\" id=\"spSealID\">[无效的签章结构]</span>\r\n          </div>\r\n          <div class=\"subcontent\">\r\n            <span class=\"title\">印章名称</span>\r\n            <span class=\"value\" id=\"spSealName\">[无效的签章结构]</span>\r\n          </div>\r\n          <div class=\"subcontent\">\r\n            <span class=\"title\">印章类型</span>\r\n            <span class=\"value\" id=\"spSealType\">[无效的签章结构]</span>\r\n          </div>\r\n          <div class=\"subcontent\">\r\n            <span class=\"title\">有效时间</span>\r\n            <span class=\"value\" id=\"spSealAuthTime\">[无效的签章结构]</span>\r\n          </div>\r\n          <div class=\"subcontent\">\r\n            <span class=\"title\">制章日期</span>\r\n            <span class=\"value\" id=\"spSealMakeTime\">[无效的签章结构]</span>\r\n          </div>\r\n          <div class=\"subcontent\">\r\n            <span class=\"title\">印章版本</span>\r\n            <span class=\"value\" id=\"spSealVersion\">[无效的签章结构]</span>\r\n          </div>\r\n        </div>\r\n        <input\r\n          style=\"position: absolute; right: 1%; top: 1%\"\r\n          type=\"button\"\r\n          name=\"\"\r\n          id=\"\"\r\n          value=\"X\"\r\n          @click=\"closeSealInfoDialog()\"\r\n        />\r\n      </div>\r\n    </div>\r\n\r\n    <el-dialog :title=\"title\" :visible.sync=\"dialogFormVisible\">\r\n      <span style=\"text-align: left\">\r\n        {{ value }}\r\n      </span>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click=\"dialogFormVisible = false\"\r\n          >确 定</el-button\r\n        >\r\n      </div>\r\n    </el-dialog>\r\n  </el-container>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  parseOfdDocument,\r\n  renderOfd,\r\n  renderOfdByScale,\r\n  digestCheck,\r\n  getPageScale,\r\n  setPageScale,\r\n} from \"@/utils/ofd/ofd\";\r\nimport * as JSZipUtils from \"jszip-utils\";\r\n\r\nexport default {\r\n  name: \"HelloWorld\",\r\n  data() {\r\n    return {\r\n      ofdBase64: null,\r\n      loading: false,\r\n      pageIndex: 1,\r\n      pageCount: 0,\r\n      scale: 0,\r\n      title: null,\r\n      value: null,\r\n      dialogFormVisible: false,\r\n      ofdObj: null,\r\n      screenWidth: document.body.clientWidth,\r\n    };\r\n  },\r\n\r\n  created() {\r\n    this.file = null;\r\n  },\r\n\r\n  mounted() {\r\n    this.screenWidth = document.body.clientWidth;\r\n    let that = this;\r\n    this.$refs.contentDiv.addEventListener(\"scroll\", this.scrool);\r\n    window.onresize = () => {\r\n      return (() => {\r\n        that.screenWidth = document.body.clientWidth - 88;\r\n        const divs = renderOfd(that.screenWidth, that.ofdObj);\r\n        that.displayOfdDiv(divs);\r\n      })();\r\n    };\r\n    this.loadOfd();\r\n  },\r\n\r\n  methods: {\r\n    scrool() {\r\n      let scrolled =\r\n        this.$refs.contentDiv.firstElementChild?.getBoundingClientRect()?.top -\r\n        60;\r\n      let top = 0;\r\n      let index = 0;\r\n      for (let i = 0; i < this.$refs.contentDiv.childElementCount; i++) {\r\n        top +=\r\n          Math.abs(\r\n            this.$refs.contentDiv.children\r\n              .item(i)\r\n              ?.style.height.replace(\"px\", \"\")\r\n          ) +\r\n          Math.abs(\r\n            this.$refs.contentDiv.children\r\n              .item(i)\r\n              ?.style.marginBottom.replace(\"px\", \"\")\r\n          );\r\n        if (Math.abs(scrolled) < top) {\r\n          index = i;\r\n          break;\r\n        }\r\n      }\r\n      this.pageIndex = index + 1;\r\n    },\r\n\r\n    closeSealInfoDialog() {\r\n      this.$refs.sealInfoDiv.setAttribute(\"style\", \"display: none\");\r\n      document.getElementById(\"spSigner\").innerText = \"[无效的签章结构]\";\r\n      document.getElementById(\"spProvider\").innerText = \"[无效的签章结构]\";\r\n      document.getElementById(\"spHashedValue\").innerText = \"[无效的签章结构]\";\r\n      document.getElementById(\"spSignedValue\").innerText = \"[无效的签章结构]\";\r\n      document.getElementById(\"spSignMethod\").innerText = \"[无效的签章结构]\";\r\n      document.getElementById(\"spSealID\").innerText = \"[无效的签章结构]\";\r\n      document.getElementById(\"spSealName\").innerText = \"[无效的签章结构]\";\r\n      document.getElementById(\"spSealType\").innerText = \"[无效的签章结构]\";\r\n      document.getElementById(\"spSealAuthTime\").innerText = \"[无效的签章结构]\";\r\n      document.getElementById(\"spSealMakeTime\").innerText = \"[无效的签章结构]\";\r\n      document.getElementById(\"spSealVersion\").innerText = \"[无效的签章结构]\";\r\n      document.getElementById(\"spVersion\").innerText = \"[无效的签章结构]\";\r\n      document.getElementById(\"VerifyRet\").innerText = \"[无效的签章结构]\";\r\n    },\r\n\r\n    showMore(title, id) {\r\n      this.dialogFormVisible = true;\r\n      this.value = document.getElementById(id).innerText;\r\n      this.title = title;\r\n    },\r\n\r\n    plus() {\r\n      setPageScale(++this.scale);\r\n      const divs = renderOfdByScale(this.ofdObj);\r\n      this.displayOfdDiv(divs);\r\n    },\r\n\r\n    minus() {\r\n      setPageScale(--this.scale);\r\n      const divs = renderOfdByScale(this.ofdObj);\r\n      this.displayOfdDiv(divs);\r\n    },\r\n\r\n    prePage() {\r\n      let contentDiv = document.getElementById(\"content\");\r\n      let ele = contentDiv.children.item(this.pageIndex - 2);\r\n      ele?.scrollIntoView(true);\r\n      ele ? (this.pageIndex = this.pageIndex - 1) : \"\";\r\n    },\r\n\r\n    firstPage() {\r\n      let contentDiv = document.getElementById(\"content\");\r\n      let ele = contentDiv.firstElementChild;\r\n      ele?.scrollIntoView(true);\r\n      ele ? (this.pageIndex = 1) : \"\";\r\n    },\r\n\r\n    nextPage() {\r\n      let contentDiv = document.getElementById(\"content\");\r\n      let ele = contentDiv.children.item(this.pageIndex);\r\n      ele?.scrollIntoView(true);\r\n      ele ? ++this.pageIndex : \"\";\r\n    },\r\n\r\n    lastPage() {\r\n      let contentDiv = document.getElementById(\"content\");\r\n      let ele = contentDiv.lastElementChild;\r\n      ele?.scrollIntoView(true);\r\n      ele ? (this.pageIndex = contentDiv.childElementCount) : \"\";\r\n    },\r\n\r\n    parseQueryString(query) {\r\n      const parts = query.split(\"&\");\r\n      const params = Object.create(null);\r\n\r\n      for (let i = 0, ii = parts.length; i < ii; ++i) {\r\n        const param = parts[i].split(\"=\");\r\n        const key = param[0].toLowerCase();\r\n        const value = param.length > 1 ? param[1] : null;\r\n        params[decodeURIComponent(key)] = decodeURIComponent(value);\r\n      }\r\n\r\n      return params;\r\n    },\r\n\r\n    loadOfd() {\r\n      const queryString = document.location.search.substring(1);\r\n      const params = (0, this.parseQueryString)(queryString);\r\n      const ofdFile = params.file;\r\n      const filename = params.filename;\r\n      document.title = filename;\r\n      let that = this;\r\n      JSZipUtils.getBinaryContent(ofdFile, function (err, data) {\r\n        if (err) {\r\n          console.log(err);\r\n        } else {\r\n          let base64String = btoa(\r\n            String.fromCharCode.apply(null, new Uint8Array(data))\r\n          );\r\n          that.ofdBase64 = base64String;\r\n        }\r\n      });\r\n      this.getOfdDocumentObj(ofdFile, this.screenWidth);\r\n    },\r\n\r\n    getOfdDocumentObj(file, screenWidth) {\r\n      let that = this;\r\n      let t = new Date().getTime();\r\n      this.loading = true;\r\n      parseOfdDocument({\r\n        ofd: file,\r\n        success(res) {\r\n          console.log(res);\r\n          let t1 = new Date().getTime();\r\n          console.log(\"解析ofd\", t1 - t);\r\n          that.ofdObj = res[0];\r\n          that.pageCount = res[0].pages.length;\r\n          const divs = renderOfd(screenWidth, res[0]);\r\n          let t2 = new Date().getTime();\r\n          console.log(\"xml转svg\", t2 - t1);\r\n          that.displayOfdDiv(divs);\r\n          let t3 = new Date().getTime();\r\n          console.log(\"svg渲染到页面\", t3 - t2);\r\n          that.loading = false;\r\n        },\r\n        fail(error) {\r\n          that.loading = false;\r\n          that.$alert(\"OFD打开失败\", error, {\r\n            confirmButtonText: \"确定\",\r\n            callback: (action) => {\r\n              this.$message({\r\n                type: \"info\",\r\n                message: `action: ${action}`,\r\n              });\r\n            },\r\n          });\r\n        },\r\n      });\r\n    },\r\n\r\n    displayOfdDiv(divs) {\r\n      this.scale = getPageScale();\r\n      let contentDiv = document.getElementById(\"content\");\r\n      contentDiv.innerHTML = \"\";\r\n      for (const div of divs) {\r\n        contentDiv.appendChild(div);\r\n      }\r\n      for (let ele of document.getElementsByName(\"seal_img_div\")) {\r\n        this.addEventOnSealDiv(\r\n          ele,\r\n          JSON.parse(ele.dataset.sesSignature),\r\n          JSON.parse(ele.dataset.signedInfo)\r\n        );\r\n      }\r\n    },\r\n\r\n    addEventOnSealDiv(div, SES_Signature, signedInfo) {\r\n      try {\r\n        global.HashRet = null;\r\n        global.VerifyRet = signedInfo.VerifyRet;\r\n        div.addEventListener(\"click\", function () {\r\n          document.getElementById(\"sealInfoDiv\").hidden = false;\r\n          document\r\n            .getElementById(\"sealInfoDiv\")\r\n            .setAttribute(\r\n              \"style\",\r\n              \"display:flex;align-items: center;justify-content: center;\"\r\n            );\r\n          if (SES_Signature.realVersion < 4) {\r\n            document.getElementById(\"spSigner\").innerText =\r\n              SES_Signature.toSign.cert[\"commonName\"];\r\n            document.getElementById(\"spProvider\").innerText =\r\n              signedInfo.Provider[\"@_ProviderName\"];\r\n            document.getElementById(\r\n              \"spHashedValue\"\r\n            ).innerText = SES_Signature.toSign.dataHash.replace(/\\n/g, \"\");\r\n            document.getElementById(\r\n              \"spSignedValue\"\r\n            ).innerText = SES_Signature.signature.replace(/\\n/g, \"\");\r\n            document.getElementById(\r\n              \"spSignMethod\"\r\n            ).innerText = SES_Signature.toSign.signatureAlgorithm.replace(\r\n              /\\n/g,\r\n              \"\"\r\n            );\r\n            document.getElementById(\"spSealID\").innerText =\r\n              SES_Signature.toSign.eseal.esealInfo.esID;\r\n            document.getElementById(\"spSealName\").innerText =\r\n              SES_Signature.toSign.eseal.esealInfo.property.name;\r\n            document.getElementById(\"spSealType\").innerText =\r\n              SES_Signature.toSign.eseal.esealInfo.property.type;\r\n            document.getElementById(\"spSealAuthTime\").innerText =\r\n              \"从 \" +\r\n              SES_Signature.toSign.eseal.esealInfo.property.validStart +\r\n              \" 到 \" +\r\n              SES_Signature.toSign.eseal.esealInfo.property.validEnd;\r\n            document.getElementById(\"spSealMakeTime\").innerText =\r\n              SES_Signature.toSign.eseal.esealInfo.property.createDate;\r\n            document.getElementById(\"spSealVersion\").innerText =\r\n              SES_Signature.toSign.eseal.esealInfo.header.version;\r\n          } else {\r\n            document.getElementById(\"spSigner\").innerText =\r\n              SES_Signature.cert[\"commonName\"];\r\n            document.getElementById(\"spProvider\").innerText =\r\n              signedInfo.Provider[\"@_ProviderName\"];\r\n            document.getElementById(\r\n              \"spHashedValue\"\r\n            ).innerText = SES_Signature.toSign.dataHash.replace(/\\n/g, \"\");\r\n            document.getElementById(\r\n              \"spSignedValue\"\r\n            ).innerText = SES_Signature.signature.replace(/\\n/g, \"\");\r\n            document.getElementById(\r\n              \"spSignMethod\"\r\n            ).innerText = SES_Signature.signatureAlgID.replace(/\\n/g, \"\");\r\n            document.getElementById(\"spSealID\").innerText =\r\n              SES_Signature.toSign.eseal.esealInfo.esID;\r\n            document.getElementById(\"spSealName\").innerText =\r\n              SES_Signature.toSign.eseal.esealInfo.property.name;\r\n            document.getElementById(\"spSealType\").innerText =\r\n              SES_Signature.toSign.eseal.esealInfo.property.type;\r\n            document.getElementById(\"spSealAuthTime\").innerText =\r\n              \"从 \" +\r\n              SES_Signature.toSign.eseal.esealInfo.property.validStart +\r\n              \" 到 \" +\r\n              SES_Signature.toSign.eseal.esealInfo.property.validEnd;\r\n            document.getElementById(\"spSealMakeTime\").innerText =\r\n              SES_Signature.toSign.eseal.esealInfo.property.createDate;\r\n            document.getElementById(\"spSealVersion\").innerText =\r\n              SES_Signature.toSign.eseal.esealInfo.header.version;\r\n          }\r\n          document.getElementById(\"spVersion\").innerText =\r\n            SES_Signature.toSign.version;\r\n          document.getElementById(\"VerifyRet\").innerText =\r\n            \"文件摘要值后台验证中，请稍等... \" +\r\n            (global.VerifyRet ? \"签名值验证成功\" : \"签名值验证失败\");\r\n          if (\r\n            global.HashRet == null ||\r\n            global.HashRet == undefined ||\r\n            Object.keys(global.HashRet).length <= 0\r\n          ) {\r\n            setTimeout(function () {\r\n              const signRetStr = global.VerifyRet\r\n                ? \"签名值验证成功\"\r\n                : \"签名值验证失败\";\r\n              global.HashRet = digestCheck(\r\n                global.toBeChecked.get(signedInfo.signatureID)\r\n              );\r\n              const hashRetStr = global.HashRet\r\n                ? \"文件摘要值验证成功\"\r\n                : \"文件摘要值验证失败\";\r\n              document.getElementById(\"VerifyRet\").innerText =\r\n                hashRetStr + \" \" + signRetStr;\r\n            }, 1000);\r\n          }\r\n        });\r\n      } catch (e) {\r\n        console.log(e);\r\n      }\r\n      if (!global.VerifyRet) {\r\n        div.setAttribute(\"class\", \"gray\");\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n.upload-icon {\r\n  display: flex;\r\n  cursor: pointer;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 28px;\r\n  padding-left: 10px;\r\n  padding-right: 10px;\r\n  background-color: rgb(59, 95, 232);\r\n  border-radius: 1px;\r\n  border-color: #5867dd;\r\n  font-weight: 500;\r\n  font-size: 12px;\r\n  color: white;\r\n  margin: 1px;\r\n}\r\n\r\n.scale-icon {\r\n  display: flex;\r\n  cursor: pointer;\r\n  justify-content: center;\r\n  align-items: center;\r\n  width: 33px;\r\n  height: 28px;\r\n  background-color: #f5f5f5;\r\n  border-radius: 1px;\r\n  font-weight: 500;\r\n  font-size: 12px;\r\n  color: #333333;\r\n  text-align: center;\r\n  padding: 2px;\r\n}\r\n.scale-icon :active {\r\n  color: rgb(59, 95, 232);\r\n}\r\n.scale-icon :hover {\r\n  color: rgb(59, 95, 232);\r\n}\r\n\r\n.text-icon {\r\n  display: flex;\r\n  cursor: pointer;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 28px;\r\n  width: 90%;\r\n  background-color: rgb(59, 95, 232);\r\n  border-radius: 1px;\r\n  border-color: #5867dd;\r\n  font-weight: 500;\r\n  font-size: 10px;\r\n  color: white;\r\n  margin-top: 20px;\r\n}\r\n\r\n.hidden {\r\n  display: none !important;\r\n}\r\n\r\n.SealContainer {\r\n  position: fixed;\r\n  left: 0;\r\n  top: 0;\r\n  width: 100vw;\r\n  height: 100vh;\r\n}\r\n\r\n.SealContainer .mask {\r\n  background: #000000;\r\n  opacity: 0.3;\r\n}\r\n\r\n.content-title {\r\n  font-size: 16px;\r\n  text-align: center;\r\n  border-bottom: 1px solid rgb(59, 95, 232);\r\n  color: rgb(59, 95, 232);\r\n  margin-top: 10px;\r\n}\r\n\r\n.SealContainer-content {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow-y: auto;\r\n  background: white;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 10px;\r\n  align-items: center;\r\n}\r\n\r\n.SealContainer-layout {\r\n  position: relative;\r\n  width: 60%;\r\n  height: 80vh;\r\n  overflow-y: auto;\r\n  background: white;\r\n  z-index: 100;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 10px;\r\n  align-items: center;\r\n}\r\n\r\n.subcontent {\r\n  width: 80%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  text-align: left;\r\n  margin-bottom: 10px;\r\n  font-family: simsun;\r\n}\r\n\r\n.subcontent .title {\r\n  font-weight: 600;\r\n}\r\n\r\n.subcontent .value {\r\n  font-weight: 400;\r\n  -webkit-line-clamp: 1;\r\n  display: -webkit-box;\r\n  -webkit-box-orient: vertical;\r\n  overflow: hidden;\r\n}\r\n\r\n.left-section {\r\n  position: fixed;\r\n  width: 88px;\r\n  height: 100%;\r\n  background: #f5f5f5;\r\n  border: 1px solid #e8e8e8;\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.main-section {\r\n  padding-top: 20px;\r\n  margin-left: 88px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: #808080;\r\n  overflow: hidden;\r\n}\r\n\r\n@media (max-width: 767px) {\r\n  .SealContainer-layout {\r\n    position: relative;\r\n    width: 90%;\r\n    height: 90vh;\r\n    overflow-y: auto;\r\n    background: white;\r\n    z-index: 100;\r\n    display: flex;\r\n    flex-direction: column;\r\n    padding: 10px;\r\n    align-items: center;\r\n  }\r\n\r\n  .subcontent {\r\n    width: 95%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    text-align: left;\r\n    margin-bottom: 10px;\r\n    font-family: simsun;\r\n  }\r\n\r\n  .left-section {\r\n    position: fixed;\r\n    width: 0px;\r\n    height: 100%;\r\n    background: #f5f5f5;\r\n    border: 1px solid #e8e8e8;\r\n    align-items: center;\r\n    display: none;\r\n    flex-direction: column;\r\n  }\r\n\r\n  .main-section {\r\n    padding-top: 20px;\r\n    margin-left: 0px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n    background: #808080;\r\n    overflow: hidden;\r\n  }\r\n}\r\n</style>\r\n","/**\r\n * 左补0到指定长度\r\n */\r\nfunction leftPad(input, num) {\r\n    if (input.length >= num) return input\r\n  \r\n    return (new Array(num - input.length + 1)).join('0') + input\r\n  }\r\n  \r\n  /**\r\n   * 二进制转化为十六进制\r\n   */\r\n  function binary2hex(binary) {\r\n    const binaryLength = 8\r\n    let hex = ''\r\n    for (let i = 0; i < binary.length / binaryLength; i++) {\r\n      hex += leftPad(parseInt(binary.substr(i * binaryLength, binaryLength), 2).toString(16), 2)\r\n    }\r\n    return hex\r\n  }\r\n  \r\n  /**\r\n   * 十六进制转化为二进制\r\n   */\r\n  function hex2binary(hex) {\r\n    const hexLength = 2\r\n    let binary = ''\r\n    for (let i = 0; i < hex.length / hexLength; i++) {\r\n      binary += leftPad(parseInt(hex.substr(i * hexLength, hexLength), 16).toString(2), 8)\r\n    }\r\n    return binary\r\n  }\r\n  \r\n  /**\r\n   * 普通字符串转化为二进制\r\n   */\r\n  function str2binary(str) {\r\n    let binary = ''\r\n    for (let i = 0, len = str.length; i < len; i++) {\r\n      const ch = str[i]\r\n      binary += leftPad(ch.codePointAt(0).toString(2), 8)\r\n    }\r\n    return binary\r\n  }\r\n  \r\n  /**\r\n   * 循环左移\r\n   */\r\n  function rol(str, n) {\r\n    return str.substring(n % str.length) + str.substr(0, n % str.length)\r\n  }\r\n  \r\n  /**\r\n   * 二进制运算\r\n   */\r\n  function binaryCal(x, y, method) {\r\n    const a = x || ''\r\n    const b = y || ''\r\n    const result = []\r\n    let prevResult\r\n  \r\n    for (let i = a.length - 1; i >= 0; i--) { // 大端\r\n      prevResult = method(a[i], b[i], prevResult)\r\n      result[i] = prevResult[0]\r\n    }\r\n    return result.join('')\r\n  }\r\n  \r\n  /**\r\n   * 二进制异或运算\r\n   */\r\n  function xor(x, y) {\r\n    return binaryCal(x, y, (a, b) => [(a === b ? '0' : '1')])\r\n  }\r\n  \r\n  /**\r\n   * 二进制与运算\r\n   */\r\n  function and(x, y) {\r\n    return binaryCal(x, y, (a, b) => [(a === '1' && b === '1' ? '1' : '0')])\r\n  }\r\n  \r\n  /**\r\n   * 二进制或运算\r\n   */\r\n  function or(x, y) {\r\n    return binaryCal(x, y, (a, b) => [(a === '1' || b === '1' ? '1' : '0')]) // a === '0' && b === '0' ? '0' : '1'\r\n  }\r\n  \r\n  /**\r\n   * 二进制与运算\r\n   */\r\n  function add(x, y) {\r\n    const result = binaryCal(x, y, (a, b, prevResult) => {\r\n      const carry = prevResult ? prevResult[1] : '0' || '0'\r\n  \r\n      // a,b不等时,carry不变，结果与carry相反\r\n      // a,b相等时，结果等于原carry，新carry等于a\r\n      if (a !== b) return [carry === '0' ? '1' : '0', carry]\r\n  \r\n      return [carry, a]\r\n    })\r\n  \r\n    return result\r\n  }\r\n  \r\n  /**\r\n   * 二进制非运算\r\n   */\r\n  function not(x) {\r\n    return binaryCal(x, undefined, a => [a === '1' ? '0' : '1'])\r\n  }\r\n  \r\n  function calMulti(method) {\r\n    return (...arr) => arr.reduce((prev, curr) => method(prev, curr))\r\n  }\r\n  \r\n  /**\r\n   * 压缩函数中的置换函数 P1(X) = X xor (X <<< 9) xor (X <<< 17)\r\n   */\r\n  function P0(X) {\r\n    return calMulti(xor)(X, rol(X, 9), rol(X, 17))\r\n  }\r\n  \r\n  /**\r\n   * 消息扩展中的置换函数 P1(X) = X xor (X <<< 15) xor (X <<< 23)\r\n   */\r\n  function P1(X) {\r\n    return calMulti(xor)(X, rol(X, 15), rol(X, 23))\r\n  }\r\n  \r\n  function FF(X, Y, Z, j) {\r\n    return j >= 0 && j <= 15 ? calMulti(xor)(X, Y, Z) : calMulti(or)(and(X, Y), and(X, Z), and(Y, Z))\r\n  }\r\n  \r\n  function GG(X, Y, Z, j) {\r\n    return j >= 0 && j <= 15 ? calMulti(xor)(X, Y, Z) : or(and(X, Y), and(not(X), Z))\r\n  }\r\n  \r\n  function T(j) {\r\n    return j >= 0 && j <= 15 ? hex2binary('79cc4519') : hex2binary('7a879d8a')\r\n  }\r\n  \r\n  /**\r\n   * 压缩函数\r\n   */\r\n  function CF(V, Bi) {\r\n    // 消息扩展\r\n    const wordLength = 32\r\n    const W = []\r\n    const M = [] // W'\r\n  \r\n    // 将消息分组B划分为16个字W0， W1，…… ，W15 （字为长度为32的比特串）\r\n    for (let i = 0; i < 16; i++) {\r\n      W.push(Bi.substr(i * wordLength, wordLength))\r\n    }\r\n  \r\n    // W[j] <- P1(W[j−16] xor W[j−9] xor (W[j−3] <<< 15)) xor (W[j−13] <<< 7) xor W[j−6]\r\n    for (let j = 16; j < 68; j++) {\r\n      W.push(calMulti(xor)(\r\n        P1(calMulti(xor)(W[j - 16], W[j - 9], rol(W[j - 3], 15))),\r\n        rol(W[j - 13], 7),\r\n        W[j - 6]\r\n      ))\r\n    }\r\n  \r\n    // W′[j] = W[j] xor W[j+4]\r\n    for (let j = 0; j < 64; j++) {\r\n      M.push(xor(W[j], W[j + 4]))\r\n    }\r\n  \r\n    // 压缩\r\n    const wordRegister = [] // 字寄存器\r\n    for (let j = 0; j < 8; j++) {\r\n      wordRegister.push(V.substr(j * wordLength, wordLength))\r\n    }\r\n  \r\n    let A = wordRegister[0]\r\n    let B = wordRegister[1]\r\n    let C = wordRegister[2]\r\n    let D = wordRegister[3]\r\n    let E = wordRegister[4]\r\n    let F = wordRegister[5]\r\n    let G = wordRegister[6]\r\n    let H = wordRegister[7]\r\n  \r\n    // 中间变量\r\n    let SS1\r\n    let SS2\r\n    let TT1\r\n    let TT2\r\n    for (let j = 0; j < 64; j++) {\r\n      SS1 = rol(calMulti(add)(rol(A, 12), E, rol(T(j), j)), 7)\r\n      SS2 = xor(SS1, rol(A, 12))\r\n  \r\n      TT1 = calMulti(add)(FF(A, B, C, j), D, SS2, M[j])\r\n      TT2 = calMulti(add)(GG(E, F, G, j), H, SS1, W[j])\r\n  \r\n      D = C\r\n      C = rol(B, 9)\r\n      B = A\r\n      A = TT1\r\n      H = G\r\n      G = rol(F, 19)\r\n      F = E\r\n      E = P0(TT2)\r\n    }\r\n  \r\n    return xor([A, B, C, D, E, F, G, H].join(''), V)\r\n  }\r\n  \r\n  //export function sm3(str: string): string;\r\n    export function sm3(hexstr) {\r\n    const binary = hex2binary(hexstr)\r\n    // 填充\r\n    const len = binary.length\r\n  \r\n    // k是满足len + 1 + k = 448mod512的最小的非负整数\r\n    let k = len % 512\r\n  \r\n    // 如果 448 <= (512 % len) < 512，需要多补充 (len % 448) 比特'0'以满足总比特长度为512的倍数\r\n    k = k >= 448 ? 512 - (k % 448) - 1 : 448 - k - 1\r\n  \r\n    const m = `${binary}1${leftPad('', k)}${leftPad(len.toString(2), 64)}`.toString() // k个0\r\n  \r\n    // 迭代压缩\r\n    const n = (len + k + 65) / 512\r\n  \r\n    let V = hex2binary('7380166f4914b2b9172442d7da8a0600a96f30bc163138aae38dee4db0fb0e4e')\r\n    for (let i = 0; i <= n - 1; i++) {\r\n      const B = m.substr(512 * i, 512)\r\n      V = CF(V, B)\r\n    }\r\n    return binary2hex(V)\r\n  }","import {\r\n    sm2\r\n} from \"sm-crypto\";\r\nimport {sm3} from \"@/utils/ofd/sm3\";\r\nimport md5 from \"js-md5\";\r\nimport sha1 from \"js-sha1\"\r\nimport rsa from \"jsrsasign\"\r\nimport {Uint8ArrayToHexString} from \"@/utils/ofd/ofd_util\";\r\nimport Base64 from \"@lapo/asn1js/base64\";\r\n\r\nexport const digestByteArray = function(data,hashedBase64,checkMethod){\r\n    const hashedHex = Uint8ArrayToHexString(Base64.decode(hashedBase64));\r\n    checkMethod = checkMethod.toLowerCase();\r\n    if(checkMethod.indexOf(\"1.2.156.10197.1.401\")>=0 || checkMethod.indexOf(\"sm3\")>=0){\r\n        return hashedHex==sm3(Uint8ArrayToHexString(data));\r\n    }else if(checkMethod.indexOf(\"md5\")>=0){\r\n        return hashedHex==md5(data);\r\n    }else if(checkMethod.indexOf(\"sha1\")>=0){\r\n        return hashedHex==sha1(data);\r\n    }else{\r\n        return \"\";\r\n    }\r\n}\r\n\r\nexport const SES_Signature_Verify = function(SES_Signature){\r\n    try {\r\n        let signAlg = SES_Signature.realVersion<4?SES_Signature.toSign.signatureAlgorithm:SES_Signature.signatureAlgID;\r\n        signAlg = signAlg.toLowerCase();\r\n        const msg = SES_Signature.toSignDer;\r\n        if(signAlg.indexOf(\"1.2.156.10197.1.501\")>=0 || signAlg.indexOf(\"sm2\")>=0){\r\n            let sigValueHex = SES_Signature.signature.replace(/ /g,'').replace(/\\n/g,'');\r\n            if(sigValueHex.indexOf('00')==0){\r\n                sigValueHex = sigValueHex.substr(2,sigValueHex.length-2);\r\n            }\r\n            const cert = SES_Signature.realVersion<4?SES_Signature.toSign.cert:SES_Signature.cert;\r\n            let publicKey = cert.subjectPublicKeyInfo.subjectPublicKey.replace(/ /g,'').replace(/\\n/g,'');\r\n            if(publicKey.indexOf('00')==0){\r\n                publicKey = publicKey.substr(2,publicKey.length-2);\r\n            }\r\n            return sm2.doVerifySignature(msg, sigValueHex, publicKey, {\r\n                der : true,\r\n                hash: true,\r\n                userId:\"1234567812345678\"\r\n            });\r\n        }else{\r\n            let sig = new rsa.KJUR.crypto.Signature({\"alg\": \"SHA1withRSA\"});\r\n            const cert = SES_Signature.realVersion<4?SES_Signature.toSign.cert:SES_Signature.cert;\r\n            let sigValueHex = SES_Signature.signature.replace(/ /g,'').replace(/\\n/g,'');\r\n            if(sigValueHex.indexOf('00')==0){\r\n                sigValueHex = sigValueHex.substr(2,sigValueHex.length-2);\r\n            }\r\n            sig.init(cert);\r\n            sig.updateHex(msg);\r\n            return sig.verify(sigValueHex);\r\n        }\r\n    } catch (e) {\r\n        console.log(e)\r\n        return false;\r\n    }\r\n}\r\n","/*\r\n * ofd.js - A Javascript class for reading and rendering ofd files\r\n * <https://github.com/DLTech21/ofd.js>\r\n *\r\n * Copyright (c) 2020. DLTech21 All Rights Reserved.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * You may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *      http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n *  Unless required by applicable law or agreed to in writing, software\r\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\r\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n *  See the License for the specific language governing permissions and\r\n *  limitations under the License.\r\n *\r\n */\r\n\r\n\r\nimport Hex from \"@lapo/asn1js/hex\";\r\nimport Base64 from \"@lapo/asn1js/base64\";\r\nimport ASN1 from \"@lapo/asn1js\";\r\nimport {SES_Signature_Verify} from \"@/utils/ofd/verify_signature_util\";\r\nimport {digestByteArray} from \"@/utils/ofd/verify_signature_util\";\r\nlet reHex = /^\\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\\s*)+$/;\r\n\r\nexport const parseSesSignature = async function (zip, name) {\r\n    return new Promise((resolve, reject) => {\r\n        zip.files[name].async('base64').then(function (bytes) {\r\n            let res = decodeText(bytes);\r\n            resolve(res);\r\n        }, function error(e) {\r\n            reject(e);\r\n        })\r\n    });\r\n}\r\n\r\nexport const digestCheckProcess = function (arr){\r\n    let ret = true;\r\n    for (const val of arr) {\r\n        const value = digestByteArray(val.fileData, val.hashed, val.checkMethod);\r\n        ret = ret && value;\r\n    }\r\n    return ret;\r\n}\r\n\r\nconst decodeText = function (val) {\r\n    try {\r\n        let der = reHex.test(val) ? Hex.decode(val) : Base64.unarmor(val);\r\n        return decode(der);\r\n    } catch (e) {\r\n        console.log(e)\r\n        return {};\r\n    }\r\n}\r\n\r\nconst decode = function (der, offset) {\r\n    offset = offset || 0;\r\n    try {\r\n        const SES_Signature = decodeSES_Signature(der,offset);\r\n        const type = SES_Signature.toSign.eseal.esealInfo.picture.type;\r\n        const ofdArray = SES_Signature.toSign.eseal.esealInfo.picture.data.byte;\r\n        return {ofdArray, 'type': type.toLowerCase(), SES_Signature,'verifyRet':SES_Signature_Verify(SES_Signature)};\r\n    } catch (e) {\r\n        console.log(e)\r\n        return {};\r\n    }\r\n}\r\n\r\nconst decodeUTCTime = function (str) {\r\n    str = str.replace('Unrecognized time: ','');\r\n    const UTC = str.indexOf('Z') > 0;\r\n    str = str.replace('Z', '');\r\n    str = str.substr(0,1)<'5'?'20'+str:'19'+str;\r\n    return str;\r\n}\r\n\r\nconst decodeSES_Signature = function (der, offset) {\r\n    offset = offset || 0;\r\n    let asn1 = ASN1.decode(der, offset);\r\n    var SES_Signature;\r\n    try {\r\n        //V1 V4分支判断\r\n        //V1\r\n        //Unrecognized time:\r\n        const createDate = decodeUTCTime(asn1.sub[0]?.sub[1]?.sub[0]?.sub[2]?.sub[3]?.stream.parseTime(asn1.sub[0].sub[1].sub[0].sub[2].sub[3].stream.pos + asn1.sub[0].sub[1].sub[0].sub[2].sub[3].header, asn1.sub[0].sub[1].sub[0].sub[2].sub[3].stream.pos + asn1.sub[0].sub[1].sub[0].sub[2].sub[3].header + asn1.sub[0].sub[1].sub[0].sub[2].sub[3].length));\r\n        const validStart = decodeUTCTime(asn1.sub[0]?.sub[1]?.sub[0]?.sub[2]?.sub[4]?.stream.parseTime(asn1.sub[0].sub[1].sub[0].sub[2].sub[4].stream.pos + asn1.sub[0].sub[1].sub[0].sub[2].sub[4].header, asn1.sub[0].sub[1].sub[0].sub[2].sub[4].stream.pos + asn1.sub[0].sub[1].sub[0].sub[2].sub[4].header + asn1.sub[0].sub[1].sub[0].sub[2].sub[4].length));\r\n        const validEnd = decodeUTCTime(asn1.sub[0]?.sub[1]?.sub[0]?.sub[2]?.sub[5]?.stream.parseTime(asn1.sub[0].sub[1].sub[0].sub[2].sub[5].stream.pos + asn1.sub[0].sub[1].sub[0].sub[2].sub[5].header, asn1.sub[0].sub[1].sub[0].sub[2].sub[5].stream.pos + asn1.sub[0].sub[1].sub[0].sub[2].sub[5].header + asn1.sub[0].sub[1].sub[0].sub[2].sub[5].length));\r\n        const timeInfo = decodeUTCTime(asn1.sub[0]?.sub[2]?.stream.parseTime(asn1.sub[0].sub[2].stream.pos + asn1.sub[0].sub[2].header, asn1.sub[0].sub[2].stream.pos + asn1.sub[0].sub[2].header + asn1.sub[0].sub[2].length, false));\r\n        const asn1CertList = asn1.sub[0]?.sub[1]?.sub[0]?.sub[2]?.sub[2];\r\n        let certList = new Array();\r\n        if(asn1CertList){\r\n            asn1CertList.sub.forEach(asn1Cert => {\r\n                certList.push(asn1Cert.stream.parseOctetString(asn1Cert.stream.pos + asn1Cert.header, asn1Cert.stream.pos + asn1Cert.header+asn1Cert.length));\r\n            });\r\n        }\r\n        const asn1ExtDatas = asn1.sub[0]?.sub[1]?.sub[0]?.sub[4];\r\n        let extDatas = new Array();\r\n        if(asn1ExtDatas){\r\n            asn1ExtDatas.sub.forEach(asn1ExtData => {\r\n                extDatas.push({\r\n                    'extnID':asn1ExtData.sub[0]?.stream.parseOID(asn1ExtData.sub[0].stream.pos + asn1ExtData.sub[0].header, asn1ExtData.sub[0].stream.pos + asn1ExtData.sub[0].header+asn1ExtData.sub[0].length),\r\n                    'critical':asn1ExtData.sub[1]?.stream.parseInteger(asn1ExtData.sub[1].stream.pos + asn1ExtData.sub[1].header, asn1ExtData.sub[1].stream.pos + asn1ExtData.sub[1].header+asn1ExtData.sub[1].length),\r\n                    'extnValue':asn1ExtData.sub[2]?.stream.parseOctetString(asn1ExtData.sub[2].stream.pos + asn1ExtData.sub[2].header, asn1ExtData.sub[2].stream.pos + asn1ExtData.sub[2].header+asn1ExtData.sub[2].length),\r\n                })\r\n            });\r\n        }\r\n        //ASN1.decode(asn1.sub[0]?.sub[1]?.sub[0]?.sub[2]?.sub[3]);\r\n        SES_Signature =\r\n        {\r\n            'realVersion':1,\r\n            'toSignDer':asn1.sub[0]?.stream.enc.subarray(asn1.sub[0].stream.pos,asn1.sub[0].stream.pos+asn1.sub[0].header+asn1.sub[0].length),\r\n            'toSign':{\r\n                'version':asn1.sub[0]?.sub[0]?.stream.parseInteger(asn1.sub[0].sub[0].stream.pos + asn1.sub[0].sub[0].header, asn1.sub[0].sub[0].stream.pos + asn1.sub[0].sub[0].header + asn1.sub[0].sub[0].length),\r\n                'eseal':{\r\n                    'esealInfo':{\r\n                        'header':{\r\n                            'ID':asn1.sub[0]?.sub[1]?.sub[0]?.sub[0]?.sub[0]?.stream.parseStringUTF(asn1.sub[0].sub[1].sub[0].sub[0].sub[0].stream.pos + asn1.sub[0].sub[1].sub[0].sub[0].sub[0].header, asn1.sub[0].sub[1].sub[0].sub[0].sub[0].stream.pos + asn1.sub[0].sub[1].sub[0].sub[0].sub[0].header + asn1.sub[0].sub[1].sub[0].sub[0].sub[0].length),\r\n                            'version':asn1.sub[0]?.sub[1]?.sub[0]?.sub[0]?.sub[1]?.stream.parseInteger(asn1.sub[0].sub[1].sub[0].sub[0].sub[1].stream.pos + asn1.sub[0].sub[1].sub[0].sub[0].sub[1].header, asn1.sub[0].sub[1].sub[0].sub[0].sub[1].stream.pos + asn1.sub[0].sub[1].sub[0].sub[0].sub[1].header + asn1.sub[0].sub[1].sub[0].sub[0].sub[1].length),\r\n                            'Vid':asn1.sub[0]?.sub[1]?.sub[0]?.sub[0]?.sub[2]?.stream.parseStringUTF(asn1.sub[0].sub[1].sub[0].sub[0].sub[2].stream.pos + asn1.sub[0].sub[1].sub[0].sub[0].sub[2].header, asn1.sub[0].sub[1].sub[0].sub[0].sub[2].stream.pos + asn1.sub[0].sub[1].sub[0].sub[0].sub[2].header + asn1.sub[0].sub[1].sub[0].sub[0].sub[2].length),\r\n                        },\r\n                        'esID':asn1.sub[0]?.sub[1]?.sub[0]?.sub[1]?.stream.parseStringUTF(asn1.sub[0].sub[1].sub[0].sub[1].stream.pos + asn1.sub[0].sub[1].sub[0].sub[1].header, asn1.sub[0].sub[1].sub[0].sub[1].stream.pos + asn1.sub[0].sub[1].sub[0].sub[1].header + asn1.sub[0].sub[1].sub[0].sub[1].length),\r\n                        'property':{\r\n                            'type':asn1.sub[0]?.sub[1]?.sub[0]?.sub[2]?.sub[0]?.stream.parseInteger(asn1.sub[0].sub[1].sub[0].sub[2].sub[0].stream.pos + asn1.sub[0].sub[1].sub[0].sub[2].sub[0].header, asn1.sub[0].sub[1].sub[0].sub[2].sub[0].stream.pos + asn1.sub[0].sub[1].sub[0].sub[2].sub[0].header + asn1.sub[0].sub[1].sub[0].sub[2].sub[0].length),\r\n                            'name':asn1.sub[0]?.sub[1]?.sub[0]?.sub[2]?.sub[1]?.stream.parseStringUTF(asn1.sub[0].sub[1].sub[0].sub[2].sub[1].stream.pos + asn1.sub[0].sub[1].sub[0].sub[2].sub[1].header, asn1.sub[0].sub[1].sub[0].sub[2].sub[1].stream.pos + asn1.sub[0].sub[1].sub[0].sub[2].sub[1].header + asn1.sub[0].sub[1].sub[0].sub[2].sub[1].length),\r\n                            'certList':certList,\r\n                            'createDate':createDate,\r\n                            'validStart':validStart,\r\n                            'validEnd':validEnd,\r\n                        },\r\n                        'picture':{\r\n                            'type':asn1.sub[0]?.sub[1]?.sub[0]?.sub[3]?.sub[0]?.stream.parseStringUTF(asn1.sub[0].sub[1].sub[0].sub[3].sub[0].stream.pos + asn1.sub[0].sub[1].sub[0].sub[3].sub[0].header, asn1.sub[0].sub[1].sub[0].sub[3].sub[0].stream.pos + asn1.sub[0].sub[1].sub[0].sub[3].sub[0].header + asn1.sub[0].sub[1].sub[0].sub[3].sub[0].length),\r\n                            'data': {'hex': asn1.sub[0]?.sub[1]?.sub[0]?.sub[3]?.sub[1]?.stream.parseOctetString(asn1.sub[0].sub[1].sub[0].sub[3].sub[1].stream.pos + asn1.sub[0].sub[1].sub[0].sub[3].sub[1].header, asn1.sub[0].sub[1].sub[0].sub[3].sub[1].stream.pos + asn1.sub[0].sub[1].sub[0].sub[3].sub[1].header + asn1.sub[0].sub[1].sub[0].sub[3].sub[1].length), byte: asn1.sub[0]?.sub[1]?.sub[0]?.sub[3]?.sub[1]?.stream.enc.subarray(asn1.sub[0].sub[1].sub[0].sub[3].sub[1].stream.pos + asn1.sub[0].sub[1].sub[0].sub[3].sub[1].header, asn1.sub[0].sub[1].sub[0].sub[3].sub[1].stream.pos + asn1.sub[0].sub[1].sub[0].sub[3].sub[1].header + asn1.sub[0].sub[1].sub[0].sub[3].sub[1].length)},\r\n                            'width':asn1.sub[0]?.sub[1]?.sub[0]?.sub[3]?.sub[2]?.stream.parseInteger(asn1.sub[0].sub[1].sub[0].sub[3].sub[2].stream.pos + asn1.sub[0].sub[1].sub[0].sub[3].sub[2].header, asn1.sub[0].sub[1].sub[0].sub[3].sub[2].stream.pos + asn1.sub[0].sub[1].sub[0].sub[3].sub[2].header + asn1.sub[0].sub[1].sub[0].sub[3].sub[2].length),\r\n                            'height':asn1.sub[0]?.sub[1]?.sub[0]?.sub[3]?.sub[3]?.stream.parseInteger(asn1.sub[0].sub[1].sub[0].sub[3].sub[3].stream.pos + asn1.sub[0].sub[1].sub[0].sub[3].sub[3].header, asn1.sub[0].sub[1].sub[0].sub[3].sub[3].stream.pos + asn1.sub[0].sub[1].sub[0].sub[3].sub[3].header + asn1.sub[0].sub[1].sub[0].sub[3].sub[3].length),\r\n                        },\r\n                        'extDatas':extDatas,\r\n                    },\r\n                    'signInfo':{\r\n                        'cert':decodeCert(asn1.sub[0]?.sub[1]?.sub[1]?.sub[0]),\r\n                        'signatureAlgorithm':asn1.sub[0]?.sub[1]?.sub[1]?.sub[1]?.stream.parseOID(asn1.sub[0].sub[1].sub[1].sub[1].stream.pos + asn1.sub[0].sub[1].sub[1].sub[1].header, asn1.sub[0].sub[1].sub[1].sub[1].stream.pos + asn1.sub[0].sub[1].sub[1].sub[1].header + asn1.sub[0].sub[1].sub[1].sub[1].length),\r\n                        'signData':asn1.sub[0]?.sub[1]?.sub[1]?.sub[2]?.stream.hexDump(asn1.sub[0].sub[1].sub[1].sub[2].stream.pos + asn1.sub[0].sub[1].sub[1].sub[2].header, asn1.sub[0].sub[1].sub[1].sub[2].stream.pos + asn1.sub[0].sub[1].sub[1].sub[2].header + asn1.sub[0].sub[1].sub[1].sub[2].length, false)\r\n                    },\r\n\r\n                },\r\n                'timeInfo':timeInfo,\r\n                'dataHash':asn1.sub[0]?.sub[3]?.stream.hexDump(asn1.sub[0].sub[3].stream.pos + asn1.sub[0].sub[3].header, asn1.sub[0].sub[3].stream.pos + asn1.sub[0].sub[3].header + asn1.sub[0].sub[3].length, false),\r\n                'propertyInfo':asn1.sub[0]?.sub[4]?.stream.parseStringUTF(asn1.sub[0].sub[4].stream.pos + asn1.sub[0].sub[4].header, asn1.sub[0].sub[4].stream.pos + asn1.sub[0].sub[4].header + asn1.sub[0].sub[4].length),\r\n                'cert':decodeCert(asn1.sub[0]?.sub[5]),\r\n                'signatureAlgorithm':asn1.sub[0]?.sub[6]?.stream.parseOID(asn1.sub[0].sub[6].stream.pos + asn1.sub[0].sub[6].header, asn1.sub[0].sub[6].stream.pos + asn1.sub[0].sub[6].header + asn1.sub[0].sub[6].length),\r\n            },\r\n            'signature':asn1.sub[1]?.stream.hexDump(asn1.sub[1].stream.pos + asn1.sub[1].header, asn1.sub[1].stream.pos + asn1.sub[1].header + asn1.sub[1].length, false),\r\n        };\r\n    } catch (e) {\r\n        try {\r\n            //V4\r\n            const certListType = asn1.sub[0]?.sub[1]?.sub[0]?.sub[2]?.sub[2]?.stream.parseInteger(asn1.sub[0].sub[1].sub[0].sub[2].sub[2].stream.pos + asn1.sub[0].sub[1].sub[0].sub[2].sub[2].header, asn1.sub[0].sub[1].sub[0].sub[2].sub[2].stream.pos + asn1.sub[0].sub[1].sub[0].sub[2].sub[2].header + asn1.sub[0].sub[1].sub[0].sub[2].sub[2].length);\r\n            const asn1CertList = asn1.sub[0]?.sub[1]?.sub[0]?.sub[2]?.sub[3];\r\n            let certList = new Array();\r\n            if(asn1CertList){\r\n                asn1CertList.sub.forEach(asn1Cert => {\r\n                    certList.push(asn1Cert.stream.parseOctetString(asn1Cert.stream.pos + asn1Cert.header, asn1Cert.stream.pos + asn1Cert.header+asn1Cert.length));\r\n                });\r\n            }\r\n            const asn1ExtDatas = asn1.sub[0]?.sub[1]?.sub[0]?.sub[4];\r\n            let extDatas = new Array();\r\n            if(asn1ExtDatas){\r\n                asn1ExtDatas.sub.forEach(asn1ExtData => {\r\n                    extDatas.push({\r\n                        'extnID':asn1ExtData.sub[0]?.stream.parseOID(asn1ExtData.sub[0].stream.pos + asn1ExtData.sub[0].header, asn1ExtData.sub[0].stream.pos + asn1ExtData.sub[0].header+asn1ExtData.sub[0].length),\r\n                        'critical':asn1ExtData.sub[1]?.stream.parseInteger(asn1ExtData.sub[1].stream.pos + asn1ExtData.sub[1].header, asn1ExtData.sub[1].stream.pos + asn1ExtData.sub[1].header+asn1ExtData.sub[1].length),\r\n                        'extnValue':asn1ExtData.sub[2]?.stream.parseOctetString(asn1ExtData.sub[2].stream.pos + asn1ExtData.sub[2].header, asn1ExtData.sub[2].stream.pos + asn1ExtData.sub[2].header+asn1ExtData.sub[2].length),\r\n                    })\r\n                });\r\n            }\r\n            SES_Signature =\r\n            {\r\n                'realVersion':4,\r\n                'toSignDer':asn1.sub[0]?.stream.enc.subarray(asn1.sub[0].stream.pos,asn1.sub[0].stream.pos+asn1.sub[0].header+asn1.sub[0].length),\r\n                'toSign':{\r\n                    'version':asn1.sub[0]?.sub[0]?.stream.parseInteger(asn1.sub[0].sub[0].stream.pos + asn1.sub[0].sub[0].header, asn1.sub[0].sub[0].stream.pos + asn1.sub[0].sub[0].header + asn1.sub[0].sub[0].length),\r\n                    'eseal':{\r\n                        'esealInfo':{\r\n                            'header':{\r\n                                'ID':asn1.sub[0]?.sub[1]?.sub[0]?.sub[0]?.sub[0]?.stream.parseStringUTF(asn1.sub[0].sub[1].sub[0].sub[0].sub[0].stream.pos + asn1.sub[0].sub[1].sub[0].sub[0].sub[0].header, asn1.sub[0].sub[1].sub[0].sub[0].sub[0].stream.pos + asn1.sub[0].sub[1].sub[0].sub[0].sub[0].header + asn1.sub[0].sub[1].sub[0].sub[0].sub[0].length),\r\n                                'version':asn1.sub[0]?.sub[1]?.sub[0]?.sub[0]?.sub[1]?.stream.parseInteger(asn1.sub[0].sub[1].sub[0].sub[0].sub[1].stream.pos + asn1.sub[0].sub[1].sub[0].sub[0].sub[1].header, asn1.sub[0].sub[1].sub[0].sub[0].sub[1].stream.pos + asn1.sub[0].sub[1].sub[0].sub[0].sub[1].header + asn1.sub[0].sub[1].sub[0].sub[0].sub[1].length),\r\n                                'Vid':asn1.sub[0]?.sub[1]?.sub[0]?.sub[0]?.sub[2]?.stream.parseStringUTF(asn1.sub[0].sub[1].sub[0].sub[0].sub[2].stream.pos + asn1.sub[0].sub[1].sub[0].sub[0].sub[2].header, asn1.sub[0].sub[1].sub[0].sub[0].sub[2].stream.pos + asn1.sub[0].sub[1].sub[0].sub[0].sub[2].header + asn1.sub[0].sub[1].sub[0].sub[0].sub[2].length),\r\n                            },\r\n                            'esID':asn1.sub[0]?.sub[1]?.sub[0]?.sub[1]?.stream.parseStringUTF(asn1.sub[0].sub[1].sub[0].sub[1].stream.pos + asn1.sub[0].sub[1].sub[0].sub[1].header, asn1.sub[0].sub[1].sub[0].sub[1].stream.pos + asn1.sub[0].sub[1].sub[0].sub[1].header + asn1.sub[0].sub[1].sub[0].sub[1].length),\r\n                            'property':{\r\n                                'type':asn1.sub[0]?.sub[1]?.sub[0]?.sub[2]?.sub[0]?.stream.parseInteger(asn1.sub[0].sub[1].sub[0].sub[2].sub[0].stream.pos + asn1.sub[0].sub[1].sub[0].sub[2].sub[0].header, asn1.sub[0].sub[1].sub[0].sub[2].sub[0].stream.pos + asn1.sub[0].sub[1].sub[0].sub[2].sub[0].header + asn1.sub[0].sub[1].sub[0].sub[2].sub[0].length),\r\n                                'name':asn1.sub[0]?.sub[1]?.sub[0]?.sub[2]?.sub[1]?.stream.parseStringUTF(asn1.sub[0].sub[1].sub[0].sub[2].sub[1].stream.pos + asn1.sub[0].sub[1].sub[0].sub[2].sub[1].header, asn1.sub[0].sub[1].sub[0].sub[2].sub[1].stream.pos + asn1.sub[0].sub[1].sub[0].sub[2].sub[1].header + asn1.sub[0].sub[1].sub[0].sub[2].sub[1].length),\r\n                                'certListType':certListType,\r\n                                'certList':certList,\r\n                                'createDate':asn1.sub[0]?.sub[1]?.sub[0]?.sub[2]?.sub[4]?.stream.parseTime(asn1.sub[0].sub[1].sub[0].sub[2].sub[4].stream.pos + asn1.sub[0].sub[1].sub[0].sub[2].sub[4].header, asn1.sub[0].sub[1].sub[0].sub[2].sub[4].stream.pos + asn1.sub[0].sub[1].sub[0].sub[2].sub[4].header + asn1.sub[0].sub[1].sub[0].sub[2].sub[4].length),\r\n                                'validStart':asn1.sub[0]?.sub[1]?.sub[0]?.sub[2]?.sub[5]?.stream.parseTime(asn1.sub[0].sub[1].sub[0].sub[2].sub[5].stream.pos + asn1.sub[0].sub[1].sub[0].sub[2].sub[5].header, asn1.sub[0].sub[1].sub[0].sub[2].sub[5].stream.pos + asn1.sub[0].sub[1].sub[0].sub[2].sub[5].header + asn1.sub[0].sub[1].sub[0].sub[2].sub[5].length),\r\n                                'validEnd':asn1.sub[0]?.sub[1]?.sub[0]?.sub[2]?.sub[6]?.stream.parseTime(asn1.sub[0].sub[1].sub[0].sub[2].sub[6].stream.pos + asn1.sub[0].sub[1].sub[0].sub[2].sub[6].header, asn1.sub[0].sub[1].sub[0].sub[2].sub[6].stream.pos + asn1.sub[0].sub[1].sub[0].sub[2].sub[6].header + asn1.sub[0].sub[1].sub[0].sub[2].sub[6].length),\r\n\r\n                            },\r\n                            'picture':{\r\n                                'type':asn1.sub[0]?.sub[1]?.sub[0]?.sub[3]?.sub[0]?.stream.parseStringUTF(asn1.sub[0].sub[1].sub[0].sub[3].sub[0].stream.pos + asn1.sub[0].sub[1].sub[0].sub[3].sub[0].header, asn1.sub[0].sub[1].sub[0].sub[3].sub[0].stream.pos + asn1.sub[0].sub[1].sub[0].sub[3].sub[0].header + asn1.sub[0].sub[1].sub[0].sub[3].sub[0].length),\r\n                                'data': {'hex': asn1.sub[0]?.sub[1]?.sub[0]?.sub[3]?.sub[1]?.stream.parseOctetString(asn1.sub[0].sub[1].sub[0].sub[3].sub[1].stream.pos + asn1.sub[0].sub[1].sub[0].sub[3].sub[1].header, asn1.sub[0].sub[1].sub[0].sub[3].sub[1].stream.pos + asn1.sub[0].sub[1].sub[0].sub[3].sub[1].header + asn1.sub[0].sub[1].sub[0].sub[3].sub[1].length), byte: asn1.sub[0]?.sub[1]?.sub[0]?.sub[3]?.sub[1]?.stream.enc.subarray(asn1.sub[0].sub[1].sub[0].sub[3].sub[1].stream.pos + asn1.sub[0].sub[1].sub[0].sub[3].sub[1].header, asn1.sub[0].sub[1].sub[0].sub[3].sub[1].stream.pos + asn1.sub[0].sub[1].sub[0].sub[3].sub[1].header + asn1.sub[0].sub[1].sub[0].sub[3].sub[1].length)},\r\n                                'width':asn1.sub[0]?.sub[1]?.sub[0]?.sub[3]?.sub[2]?.stream.parseInteger(asn1.sub[0].sub[1].sub[0].sub[3].sub[2].stream.pos + asn1.sub[0].sub[1].sub[0].sub[3].sub[2].header, asn1.sub[0].sub[1].sub[0].sub[3].sub[2].stream.pos + asn1.sub[0].sub[1].sub[0].sub[3].sub[2].header + asn1.sub[0].sub[1].sub[0].sub[3].sub[2].length),\r\n                                'height':asn1.sub[0]?.sub[1]?.sub[0]?.sub[3]?.sub[3]?.stream.parseInteger(asn1.sub[0].sub[1].sub[0].sub[3].sub[3].stream.pos + asn1.sub[0].sub[1].sub[0].sub[3].sub[3].header, asn1.sub[0].sub[1].sub[0].sub[3].sub[3].stream.pos + asn1.sub[0].sub[1].sub[0].sub[3].sub[3].header + asn1.sub[0].sub[1].sub[0].sub[3].sub[3].length),\r\n                            },\r\n                            'extDatas':extDatas,\r\n                        },\r\n                        'cert':decodeCert(asn1.sub[0]?.sub[1]?.sub[1]),\r\n                        'signAlgID':asn1.sub[0]?.sub[1]?.sub[2]?.stream.parseOID(asn1.sub[0].sub[1].sub[2].stream.pos + asn1.sub[0].sub[1].sub[2].header, asn1.sub[0].sub[1].sub[2].stream.pos + asn1.sub[0].sub[1].sub[2].header + asn1.sub[0].sub[1].sub[2].length),\r\n                        'signedValue':asn1.sub[0]?.sub[1]?.sub[3]?.stream.hexDump(asn1.sub[0].sub[1].sub[3].stream.pos + asn1.sub[0].sub[1].sub[3].header, asn1.sub[0].sub[1].sub[3].stream.pos + asn1.sub[0].sub[1].sub[3].header + asn1.sub[0].sub[1].sub[3].length, false)\r\n                    },\r\n                    'timeInfo':asn1.sub[0]?.sub[2]?.stream.parseTime(asn1.sub[0].sub[2].stream.pos + asn1.sub[0].sub[2].header, asn1.sub[0].sub[2].stream.pos + asn1.sub[0].sub[2].header + asn1.sub[0].sub[2].length, false),\r\n                    'dataHash':asn1.sub[0]?.sub[3]?.stream.hexDump(asn1.sub[0].sub[3].stream.pos + asn1.sub[0].sub[3].header, asn1.sub[0].sub[3].stream.pos + asn1.sub[0].sub[3].header + asn1.sub[0].sub[3].length, false),\r\n                    'propertyInfo':Uint8ArrayToString(asn1.sub[0].sub[4])\r\n                },\r\n                'cert':decodeCert(asn1.sub[1]),\r\n                'signatureAlgID':asn1.sub[2]?.stream.parseOID(asn1.sub[2].stream.pos + asn1.sub[2].header, asn1.sub[2].stream.pos + asn1.sub[2].header + asn1.sub[2].length),\r\n                'signature':asn1.sub[3]?.stream.hexDump(asn1.sub[3].stream.pos + asn1.sub[3].header, asn1.sub[3].stream.pos + asn1.sub[3].header + asn1.sub[3].length, false),\r\n                'timpStamp':asn1.sub[4]?.stream.parseTime(asn1.sub[4].stream.pos + asn1.sub[4].header, asn1.sub[4].stream.pos + asn1.sub[4].header + asn1.sub[4].length)\r\n            };\r\n        } catch (e) {\r\n            console.log(e);\r\n            SES_Signature={};\r\n        }\r\n    }\r\n    return SES_Signature;\r\n}\r\n\r\nconst decodeCert = function (asn1, offset) {\r\n    offset = offset || 0;\r\n    try {\r\n        const asn1Subject = asn1.sub[0].sub[0].sub[5];\r\n        let subject = new Map();\r\n        asn1Subject.sub.forEach(element => {\r\n            const key = element.sub[0].sub[0].content().split('\\n')[0];\r\n            const value = element.sub[0].sub[1]?.stream.parseStringUTF(element.sub[0].sub[1].stream.pos + element.sub[0].sub[1].header, element.sub[0].sub[1].stream.pos + element.sub[0].sub[1].header + element.sub[0].sub[1].length);\r\n            subject.set(key, value);\r\n        });\r\n\r\n        const asn1PublicKeyInfo = asn1.sub[0].sub[0].sub[6];\r\n        return {\r\n            subject,\r\n            'commonName':subject.get(\"2.5.4.3\"),\r\n            'subjectPublicKeyInfo':{\r\n                'algorithm':asn1PublicKeyInfo.sub[0]?.stream.parseOID(asn1PublicKeyInfo.sub[0].stream.pos+asn1PublicKeyInfo.sub[0].header,asn1PublicKeyInfo.sub[0].stream.pos+asn1PublicKeyInfo.sub[0].header+asn1PublicKeyInfo.sub[0].length),\r\n                'subjectPublicKey':asn1PublicKeyInfo.sub[1]?.stream.hexDump(asn1PublicKeyInfo.sub[1].stream.pos+asn1PublicKeyInfo.sub[1].header,asn1PublicKeyInfo.sub[1].stream.pos+asn1PublicKeyInfo.sub[1].header+asn1PublicKeyInfo.sub[1].length),\r\n            }};\r\n    } catch (e) {\r\n        console.log(e)\r\n        return {};\r\n    }\r\n}\r\n\r\nconst Uint8ArrayToString = function (fileData) {\r\n    let dataString = \"\";\r\n    for (let i = 0; i < fileData.length; i++) {\r\n        dataString += String.fromCharCode(fileData[i]);\r\n    }\r\n    return dataString\r\n}\r\n","/* Copyright 2018 Mozilla Foundation\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/* globals process */\r\n\r\n// NW.js / Electron is a browser context, but copies some Node.js objects; see\r\n// http://docs.nwjs.io/en/latest/For%20Users/Advanced/JavaScript%20Contexts%20in%20NW.js/#access-nodejs-and-nwjs-api-in-browser-context\r\n// https://www.electronjs.org/docs/api/process#processversionselectron-readonly\r\n// https://www.electronjs.org/docs/api/process#processtype-readonly\r\nconst isNodeJS =\r\n  typeof process === \"object\" &&\r\n  process + \"\" === \"[object process]\" &&\r\n  !process.versions.nw &&\r\n  !(process.versions.electron && process.type && process.type !== \"browser\");\r\n\r\nexport { isNodeJS };\r\n"],"sourceRoot":""}